<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : DTS : /DTS/includes/dts_functions.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of DTS</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Mon May  5 14:14:03 2014 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='DTS/includes';
filename='dts_functions.php.source.html';
cookiekey='phpxref_dts';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/DTS/includes/</a> -> <a href="dts_functions.php.html">dts_functions.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="dts_functions.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="dts_functions.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php 
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  
<a name="l4"><span class="linenum">   4</span></a>  
<a name="l5"><span class="linenum">   5</span></a>  require_once 'Connections/Assessment.php'; 
<a name="l6"><span class="linenum">   6</span></a>  require_once 'WA_SecurityAssist/Helper_PHP.php';
<a name="l7"><span class="linenum">   7</span></a>  include_once 'includes/swiftmailer/swift_required.php';    
<a name="l8"><span class="linenum">   8</span></a>  
<a name="l9"><span class="linenum">   9</span></a>  
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// PAGE ID</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// Return a string that acts as a unique fingerprint for this page.</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// Any time you return to the exact same URL, </span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// this function would generate the exact same 10-digit string.</span>
<a name="l14"><span class="linenum">  14</span></a>  function <a class="function" onClick="logFunction('pageid')" href="../../_functions/pageid.html" onMouseOver="funcPopup(event,'pageid')">pageid</a>() { return <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(md5(<a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../_variables/_SERVER.html">$_SERVER</a>['PHP_SELF']), 0, 10); }
<a name="l15"><span class="linenum">  15</span></a>  
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  function <a class="function" onClick="logFunction('prepsql')" href="../../_functions/prepsql.html" onMouseOver="funcPopup(event,'prepsql')">prepsql</a>() {
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment">    // prepsql is the replacement for all SQLstr and GetSqlValueString functions. It sanitizes</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment">    // all passed values as strings and returns a complete SQL statement. (Mysql doesn't mind</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment">    // if integers or even decimals are passed as strings.)</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment">    // NOTE that this function does not convert /n, /r, /t, ', or &quot; characters;</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment">    // i.e., it sanitizes strings for Mysql but it doesn't sanitize strings for HTML / Javascript.</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment">    // Any text that should be HTML / JS-sanitized before entering the database, needs a different or additional solution.</span>
<a name="l25"><span class="linenum">  25</span></a>      <a class="var it2198" onMouseOver="hilite(2198)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a> = <a class="phpfunction" onClick="logFunction('func_get_args')" href="../../_functions/func_get_args.html" onMouseOver="phpfuncPopup(event,'func_get_args')">func_get_args</a>();
<a name="l26"><span class="linenum">  26</span></a>      <a class="var it1420" onMouseOver="hilite(1420)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it2198" onMouseOver="hilite(2198)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l27"><span class="linenum">  27</span></a>      if (strlen(<a class="var it1420" onMouseOver="hilite(1420)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>) &lt; 10) {
<a name="l28"><span class="linenum">  28</span></a>          die(&quot;<a class="function" onClick="logFunction('prepsql')" href="../../_functions/prepsql.html" onMouseOver="funcPopup(event,'prepsql')">prepsql</a>() requires a query string of at least 10 characters.&quot;);
<a name="l29"><span class="linenum">  29</span></a>      } else if (!<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>('_'.<a class="var it1420" onMouseOver="hilite(1420)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>, ' ')) { 
<a name="l30"><span class="linenum">  30</span></a>          die(&quot;<a class="function" onClick="logFunction('prepsql')" href="../../_functions/prepsql.html" onMouseOver="funcPopup(event,'prepsql')">prepsql</a>() requires a query as first argument: &quot;.<a class="var it1420" onMouseOver="hilite(1420)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>); }
<a name="l31"><span class="linenum">  31</span></a>  
<a name="l32"><span class="linenum">  32</span></a>      foreach (<a class="var it2198" onMouseOver="hilite(2198)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a> as <a class="var it364" onMouseOver="hilite(364)" onMouseOut="lolite()" onClick="logVariable('arg')" href="../../_variables/arg.html">$arg</a>) {
<a name="l33"><span class="linenum">  33</span></a>  
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment">        // sanitize each argument, and 'protect' $ signs from the regex parser </span>
<a name="l35"><span class="linenum">  35</span></a>          <a class="var it364" onMouseOver="hilite(364)" onMouseOut="lolite()" onClick="logVariable('arg')" href="../../_variables/arg.html">$arg</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('$', '\$', <a class="phpfunction" onClick="logFunction('mysql_real_escape_string')" href="../../_functions/mysql_real_escape_string.html" onMouseOver="phpfuncPopup(event,'mysql_real_escape_string')">mysql_real_escape_string</a>(<a class="var it364" onMouseOver="hilite(364)" onMouseOut="lolite()" onClick="logVariable('arg')" href="../../_variables/arg.html">$arg</a>));
<a name="l36"><span class="linenum">  36</span></a>          <a class="var it364" onMouseOver="hilite(364)" onMouseOut="lolite()" onClick="logVariable('arg')" href="../../_variables/arg.html">$arg</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('?', '\qm', <a class="var it364" onMouseOver="hilite(364)" onMouseOut="lolite()" onClick="logVariable('arg')" href="../../_variables/arg.html">$arg</a>);
<a name="l37"><span class="linenum">  37</span></a>  
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment">        // provide surrounding quotes, but turn blanks into NULLs, and leave integers quoteless.</span>
<a name="l39"><span class="linenum">  39</span></a>          if (<a class="var it364" onMouseOver="hilite(364)" onMouseOut="lolite()" onClick="logVariable('arg')" href="../../_variables/arg.html">$arg</a> == '') { <a class="var it364" onMouseOver="hilite(364)" onMouseOut="lolite()" onClick="logVariable('arg')" href="../../_variables/arg.html">$arg</a> = 'NULL'; }
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">        // only strict integers should be allowed to go quoteless. No decimals, no dates.</span>
<a name="l41"><span class="linenum">  41</span></a>          else if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(&quot;/^\d+$/&quot;, <a class="var it364" onMouseOver="hilite(364)" onMouseOut="lolite()" onClick="logVariable('arg')" href="../../_variables/arg.html">$arg</a>)) { <a class="var it364" onMouseOver="hilite(364)" onMouseOut="lolite()" onClick="logVariable('arg')" href="../../_variables/arg.html">$arg</a> = <a class="phpfunction" onClick="logFunction('intval')" href="../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it364" onMouseOver="hilite(364)" onMouseOut="lolite()" onClick="logVariable('arg')" href="../../_variables/arg.html">$arg</a>); }
<a name="l42"><span class="linenum">  42</span></a>          else { <a class="var it364" onMouseOver="hilite(364)" onMouseOut="lolite()" onClick="logVariable('arg')" href="../../_variables/arg.html">$arg</a> = &quot;'{<a class="var it364" onMouseOver="hilite(364)" onMouseOut="lolite()" onClick="logVariable('arg')" href="../../_variables/arg.html">$arg</a>}'&quot;; }
<a name="l43"><span class="linenum">  43</span></a>  
<a name="l44"><span class="linenum">  44</span></a>          <a class="var it1420" onMouseOver="hilite(1420)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;/\?/&quot;, <a class="var it364" onMouseOver="hilite(364)" onMouseOut="lolite()" onClick="logVariable('arg')" href="../../_variables/arg.html">$arg</a>, <a class="var it1420" onMouseOver="hilite(1420)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>, 1);
<a name="l45"><span class="linenum">  45</span></a>      }
<a name="l46"><span class="linenum">  46</span></a>      
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment">    // restore question marks</span>
<a name="l48"><span class="linenum">  48</span></a>      <a class="var it1420" onMouseOver="hilite(1420)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('\qm', '?', <a class="var it1420" onMouseOver="hilite(1420)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>);
<a name="l49"><span class="linenum">  49</span></a>  
<a name="l50"><span class="linenum">  50</span></a>      return <a class="var it1420" onMouseOver="hilite(1420)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>;
<a name="l51"><span class="linenum">  51</span></a>  }
<a name="l52"><span class="linenum">  52</span></a>  
<a name="l53"><span class="linenum">  53</span></a>  
<a name="l54"><span class="linenum">  54</span></a>  
<a name="l55"><span class="linenum">  55</span></a>  
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">// a simple shortcut query. </span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">// I can refer to this from any functions, without having to declare global $mysqli in each function.</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment">// When I use query(), I no longer need to add &quot;or die(&quot;ERROR&quot;); &quot; caveats on every query call. It's automatically included, along with query info for authorized users.</span>
<a name="l59"><span class="linenum">  59</span></a>  function <a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a> (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it7746" onMouseOver="hilite(7746)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>) {
<a name="l60"><span class="linenum">  60</span></a>      global <a class="var it3139" onMouseOver="hilite(3139)" onMouseOut="lolite()" onClick="logVariable('mysqli')" href="../../_variables/mysqli.html">$mysqli</a>;
<a name="l61"><span class="linenum">  61</span></a>      <a class="var it912" onMouseOver="hilite(912)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a> = <a class="var it3139" onMouseOver="hilite(3139)" onMouseOut="lolite()" onClick="logVariable('mysqli')" href="../../_variables/mysqli.html">$mysqli</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>); 
<a name="l62"><span class="linenum">  62</span></a>      if (!<a class="var it912" onMouseOver="hilite(912)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a>) { 
<a name="l63"><span class="linenum">  63</span></a>          echo &quot;ERROR running {<a class="var it7746" onMouseOver="hilite(7746)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>}.&quot;;
<a name="l64"><span class="linenum">  64</span></a>          if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> == '') { echo &quot;\n&lt;br&gt;The query string was empty!&quot;; }
<a name="l65"><span class="linenum">  65</span></a>          if (<a class="function" onClick="logFunction('WA_Auth_RulePasses')" href="../../_functions/wa_auth_rulepasses.html" onMouseOver="funcPopup(event,'wa_auth_rulepasses')">WA_Auth_RulePasses</a>('Logged in as senior')) { 
<a name="l66"><span class="linenum">  66</span></a>              echo &quot;\n&lt;br&gt;The error: &quot;.<a class="var it3139" onMouseOver="hilite(3139)" onMouseOut="lolite()" onClick="logVariable('mysqli')" href="../../_variables/mysqli.html">$mysqli</a>-&gt;<a onClick="logVariable('error')" class="var it11436" onMouseOver="hilite(11436)" onMouseOut="lolite()" href="../../_variables/error.html">error</a>.&quot;&lt;br&gt;\nThe query:&lt;br&gt;\n{<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>}&quot;; }
<a name="l67"><span class="linenum">  67</span></a>          die();
<a name="l68"><span class="linenum">  68</span></a>      }
<a name="l69"><span class="linenum">  69</span></a>      return <a class="var it912" onMouseOver="hilite(912)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a>;
<a name="l70"><span class="linenum">  70</span></a>  }
<a name="l71"><span class="linenum">  71</span></a>  
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>  
<a name="l74"><span class="linenum">  74</span></a>  
<a name="l75"><span class="linenum">  75</span></a>  
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment">// QUERY SORT</span>
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment">// Modify a query by accepting a sort column from $_GET, if specified, </span>
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment">// and injecting it into the current query after checking for safety.</span>
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">// Call this on a query after replacing the order line with this:</span>
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment">//   ORDER BY [SORT d.default_column_name]</span>
<a name="l81"><span class="linenum">  81</span></a>  function <a class="function" onClick="logFunction('query_sort')" href="../../_functions/query_sort.html" onMouseOver="funcPopup(event,'query_sort')">query_sort</a>(<a class="var it1420" onMouseOver="hilite(1420)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>) {
<a name="l82"><span class="linenum">  82</span></a>      <a class="var it7747" onMouseOver="hilite(7747)" onMouseOut="lolite()" onClick="logVariable('sort_tag')" href="../../_variables/sort_tag.html">$sort_tag</a> = &quot;/\[<a class="phpfunction" onClick="logFunction('SORT')" href="../../_functions/sort.html" onMouseOver="phpfuncPopup(event,'sort')">SORT</a> ([\w\d\.]+)\]/&quot;;
<a name="l83"><span class="linenum">  83</span></a>      <a class="var it2408" onMouseOver="hilite(2408)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a> = &quot;&quot;;
<a name="l84"><span class="linenum">  84</span></a>      
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">    // check that the query has the correct sort tag</span>
<a name="l86"><span class="linenum">  86</span></a>      if (!<a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(<a class="var it7747" onMouseOver="hilite(7747)" onMouseOut="lolite()" onClick="logVariable('sort_tag')" href="../../_variables/sort_tag.html">$sort_tag</a>, <a class="var it1420" onMouseOver="hilite(1420)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>)) {
<a name="l87"><span class="linenum">  87</span></a>          die(&quot;ERROR: You tried to query_sort a query that didn't have a [SORT col] tag. &lt;br /&gt;
<a name="l88"><span class="linenum">  88</span></a>              Query: &quot;.<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it1420" onMouseOver="hilite(1420)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>, 0, 50));
<a name="l89"><span class="linenum">  89</span></a>      }
<a name="l90"><span class="linenum">  90</span></a>  
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment">    // detect sort specifiers in GET or in a saved cookie.</span>
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment">    // When set in GET, sort_THIS_PAGE is saved to a cookie.</span>
<a name="l93"><span class="linenum">  93</span></a>  <span class="comment">    // That will be the default sort for this page until another is clicked.</span>
<a name="l94"><span class="linenum">  94</span></a>      if (isset(<a class="var it1010" onMouseOver="hilite(1010)" onMouseOut="lolite()" onClick="logVariable('_COOKIE')" href="../../_variables/_COOKIE.html">$_COOKIE</a>['sort_'.<a class="function" onClick="logFunction('pageid')" href="../../_functions/pageid.html" onMouseOver="funcPopup(event,'pageid')">pageid</a>()])) { 
<a name="l95"><span class="linenum">  95</span></a>          <a class="var it2408" onMouseOver="hilite(2408)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a> = <a class="var it1010" onMouseOver="hilite(1010)" onMouseOut="lolite()" onClick="logVariable('_COOKIE')" href="../../_variables/_COOKIE.html">$_COOKIE</a>['sort_'.<a class="function" onClick="logFunction('pageid')" href="../../_functions/pageid.html" onMouseOver="funcPopup(event,'pageid')">pageid</a>()]; }
<a name="l96"><span class="linenum">  96</span></a>      if (isset(<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('_GET')" href="../../_variables/_GET.html">$_GET</a>['sort'])) {
<a name="l97"><span class="linenum">  97</span></a>          <a class="var it2408" onMouseOver="hilite(2408)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a> = <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('_GET')" href="../../_variables/_GET.html">$_GET</a>['sort'];
<a name="l98"><span class="linenum">  98</span></a>          if (isset(<a class="var it1010" onMouseOver="hilite(1010)" onMouseOut="lolite()" onClick="logVariable('_COOKIE')" href="../../_variables/_COOKIE.html">$_COOKIE</a>['sort_'.<a class="function" onClick="logFunction('pageid')" href="../../_functions/pageid.html" onMouseOver="funcPopup(event,'pageid')">pageid</a>()]) AND false) {
<a name="l99"><span class="linenum">  99</span></a>              <a class="var it1010" onMouseOver="hilite(1010)" onMouseOut="lolite()" onClick="logVariable('_COOKIE')" href="../../_variables/_COOKIE.html">$_COOKIE</a>['sort_'.<a class="function" onClick="logFunction('pageid')" href="../../_functions/pageid.html" onMouseOver="funcPopup(event,'pageid')">pageid</a>()] = <a class="var it2408" onMouseOver="hilite(2408)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>;
<a name="l100"><span class="linenum"> 100</span></a>          } else {
<a name="l101"><span class="linenum"> 101</span></a>              <a class="phpfunction" onClick="logFunction('setcookie')" href="../../_functions/setcookie.html" onMouseOver="phpfuncPopup(event,'setcookie')">setcookie</a>('sort_'.<a class="function" onClick="logFunction('pageid')" href="../../_functions/pageid.html" onMouseOver="funcPopup(event,'pageid')">pageid</a>(), <a class="var it2408" onMouseOver="hilite(2408)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>()+(86400));
<a name="l102"><span class="linenum"> 102</span></a>          }
<a name="l103"><span class="linenum"> 103</span></a>      }
<a name="l104"><span class="linenum"> 104</span></a>      if (isset(<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('_GET')" href="../../_variables/_GET.html">$_GET</a>['clear'])) { 
<a name="l105"><span class="linenum"> 105</span></a>          <a class="var it2408" onMouseOver="hilite(2408)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a> = &quot;&quot;;
<a name="l106"><span class="linenum"> 106</span></a>          <a class="phpfunction" onClick="logFunction('setcookie')" href="../../_functions/setcookie.html" onMouseOver="phpfuncPopup(event,'setcookie')">setcookie</a>('sort_'.<a class="function" onClick="logFunction('pageid')" href="../../_functions/pageid.html" onMouseOver="funcPopup(event,'pageid')">pageid</a>(), <a class="var it2408" onMouseOver="hilite(2408)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>()-(86400));
<a name="l107"><span class="linenum"> 107</span></a>      }
<a name="l108"><span class="linenum"> 108</span></a>  
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">    // if no change detected</span>
<a name="l110"><span class="linenum"> 110</span></a>      if (<a class="var it2408" onMouseOver="hilite(2408)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a> == '') {
<a name="l111"><span class="linenum"> 111</span></a>          <a class="var it1420" onMouseOver="hilite(1420)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(<a class="var it7747" onMouseOver="hilite(7747)" onMouseOut="lolite()" onClick="logVariable('sort_tag')" href="../../_variables/sort_tag.html">$sort_tag</a>, &quot;<a class="var it66" onMouseOver="hilite(66)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../_variables/1.html">$1</a> <span class="comment">/* SORT: no column specified. Using default. */</span>&quot;, <a class="var it1420" onMouseOver="hilite(1420)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>);
<a name="l112"><span class="linenum"> 112</span></a>          return <a class="var it1420" onMouseOver="hilite(1420)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>;    
<a name="l113"><span class="linenum"> 113</span></a>      }
<a name="l114"><span class="linenum"> 114</span></a>  
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment">    // if the sort column is illegally formatted</span>
<a name="l116"><span class="linenum"> 116</span></a>      <a class="var it7748" onMouseOver="hilite(7748)" onMouseOut="lolite()" onClick="logVariable('required_sortcol_format')" href="../../_variables/required_sortcol_format.html">$required_sortcol_format</a> = &quot;/^[\w\d\.]+( (DESC|ASC))?$/&quot;;
<a name="l117"><span class="linenum"> 117</span></a>      if (!<a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(<a class="var it7748" onMouseOver="hilite(7748)" onMouseOut="lolite()" onClick="logVariable('required_sortcol_format')" href="../../_variables/required_sortcol_format.html">$required_sortcol_format</a>, <a class="var it2408" onMouseOver="hilite(2408)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>)) {
<a name="l118"><span class="linenum"> 118</span></a>          die(&quot;ERROR: I can't understand sort column '{<a class="var it2408" onMouseOver="hilite(2408)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>}'.&quot;); 
<a name="l119"><span class="linenum"> 119</span></a>      }
<a name="l120"><span class="linenum"> 120</span></a>  
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">    // **** Someday, maybe I could check to ensure that this column is available to this query?</span>
<a name="l122"><span class="linenum"> 122</span></a>  
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">    // replace the sort column!</span>
<a name="l124"><span class="linenum"> 124</span></a>      <a class="var it1420" onMouseOver="hilite(1420)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(<a class="var it7747" onMouseOver="hilite(7747)" onMouseOut="lolite()" onClick="logVariable('sort_tag')" href="../../_variables/sort_tag.html">$sort_tag</a>, &quot;{<a class="var it2408" onMouseOver="hilite(2408)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>} <span class="comment">/* SORT: column replaced. */</span>&quot;, <a class="var it1420" onMouseOver="hilite(1420)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>);
<a name="l125"><span class="linenum"> 125</span></a>      return <a class="var it1420" onMouseOver="hilite(1420)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>;
<a name="l126"><span class="linenum"> 126</span></a>  }
<a name="l127"><span class="linenum"> 127</span></a>  
<a name="l128"><span class="linenum"> 128</span></a>  
<a name="l129"><span class="linenum"> 129</span></a>  
<a name="l130"><span class="linenum"> 130</span></a>  
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment">// Function: add new-tab attribute to all links in this text</span>
<a name="l132"><span class="linenum"> 132</span></a>  function <a class="function" onClick="logFunction('linknewtab')" href="../../_functions/linknewtab.html" onMouseOver="funcPopup(event,'linknewtab')">linknewtab</a>(<a class="var it188" onMouseOver="hilite(188)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>) { return <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;a href&quot;, &quot;a target='_blank' href&quot;, <a class="var it188" onMouseOver="hilite(188)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>); }
<a name="l133"><span class="linenum"> 133</span></a>  
<a name="l134"><span class="linenum"> 134</span></a>  function <a class="function" onClick="logFunction('friendly_date')" href="../../_functions/friendly_date.html" onMouseOver="funcPopup(event,'friendly_date')">friendly_date</a>(<a class="var it1325" onMouseOver="hilite(1325)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../_variables/date.html">$date</a>) { 
<a name="l135"><span class="linenum"> 135</span></a>      if (<a class="var it1325" onMouseOver="hilite(1325)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../_variables/date.html">$date</a> == '') { return ''; }
<a name="l136"><span class="linenum"> 136</span></a>      if (<a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y') == <a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y', <a class="phpfunction" onClick="logFunction('strtotime')" href="../../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>(<a class="var it1325" onMouseOver="hilite(1325)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../_variables/date.html">$date</a>))) { return <a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('F jS', <a class="phpfunction" onClick="logFunction('strtotime')" href="../../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>(<a class="var it1325" onMouseOver="hilite(1325)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../_variables/date.html">$date</a>)); }
<a name="l137"><span class="linenum"> 137</span></a>      return <a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('F jS, Y', <a class="phpfunction" onClick="logFunction('strtotime')" href="../../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>(<a class="var it1325" onMouseOver="hilite(1325)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../_variables/date.html">$date</a>));  
<a name="l138"><span class="linenum"> 138</span></a>  }
<a name="l139"><span class="linenum"> 139</span></a>  
<a name="l140"><span class="linenum"> 140</span></a>  function <a class="function" onClick="logFunction('friendly_time')" href="../../_functions/friendly_time.html" onMouseOver="funcPopup(event,'friendly_time')">friendly_time</a>(<a class="var it6240" onMouseOver="hilite(6240)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../_variables/time.html">$time</a>) { 
<a name="l141"><span class="linenum"> 141</span></a>      if (<a class="var it6240" onMouseOver="hilite(6240)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../_variables/time.html">$time</a> == '') { return ''; }
<a name="l142"><span class="linenum"> 142</span></a>      return <a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('g:i', <a class="phpfunction" onClick="logFunction('strtotime')" href="../../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>(<a class="var it6240" onMouseOver="hilite(6240)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../_variables/time.html">$time</a>)); 
<a name="l143"><span class="linenum"> 143</span></a>  }
<a name="l144"><span class="linenum"> 144</span></a>  
<a name="l145"><span class="linenum"> 145</span></a>  function <a class="function" onClick="logFunction('lookup_profession')" href="../../_functions/lookup_profession.html" onMouseOver="funcPopup(event,'lookup_profession')">lookup_profession</a>(<a class="var it216" onMouseOver="hilite(216)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>, <a class="var it2065" onMouseOver="hilite(2065)" onMouseOut="lolite()" onClick="logVariable('other')" href="../../_variables/other.html">$other</a> = '') {
<a name="l146"><span class="linenum"> 146</span></a>      if (<a class="var it2065" onMouseOver="hilite(2065)" onMouseOut="lolite()" onClick="logVariable('other')" href="../../_variables/other.html">$other</a> &lt;&gt; '') { return <a class="var it2065" onMouseOver="hilite(2065)" onMouseOut="lolite()" onClick="logVariable('other')" href="../../_variables/other.html">$other</a>; }
<a name="l147"><span class="linenum"> 147</span></a>      <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT profession FROM demogs_professions WHERE professionkey = &quot;.<a class="phpfunction" onClick="logFunction('intval')" href="../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it216" onMouseOver="hilite(216)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>);
<a name="l148"><span class="linenum"> 148</span></a>      <a class="var it7749" onMouseOver="hilite(7749)" onMouseOut="lolite()" onClick="logVariable('rsProf')" href="../../_variables/rsProf.html">$rsProf</a> = <a class="phpfunction" onClick="logFunction('mysql_query')" href="../../_functions/mysql_query.html" onMouseOver="phpfuncPopup(event,'mysql_query')">mysql_query</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>);
<a name="l149"><span class="linenum"> 149</span></a>      <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a> = <a class="phpfunction" onClick="logFunction('mysql_fetch_assoc')" href="../../_functions/mysql_fetch_assoc.html" onMouseOver="phpfuncPopup(event,'mysql_fetch_assoc')">mysql_fetch_assoc</a>(<a class="var it7749" onMouseOver="hilite(7749)" onMouseOut="lolite()" onClick="logVariable('rsProf')" href="../../_variables/rsProf.html">$rsProf</a>);
<a name="l150"><span class="linenum"> 150</span></a>      return <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['profession'];
<a name="l151"><span class="linenum"> 151</span></a>  }
<a name="l152"><span class="linenum"> 152</span></a>  
<a name="l153"><span class="linenum"> 153</span></a>  
<a name="l154"><span class="linenum"> 154</span></a>  <a class="var it7516" onMouseOver="hilite(7516)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a> = &quot;&quot;; <a class="var it7750" onMouseOver="hilite(7750)" onMouseOut="lolite()" onClick="logVariable('count_timers')" href="../../_variables/count_timers.html">$count_timers</a> = 0;
<a name="l155"><span class="linenum"> 155</span></a>  
<a name="l156"><span class="linenum"> 156</span></a>  function <a class="function" onClick="logFunction('bench')" href="../../_functions/bench.html" onMouseOver="funcPopup(event,'bench')">bench</a>(<a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = &quot;&quot;) {
<a name="l157"><span class="linenum"> 157</span></a>      <span class="comment">/* BENCH is used to quickly run timers on how long PHP script sections take to calculate.</span>
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">    Run it twice at different points in the code. The first time, it will start the timer.</span>
<a name="l159"><span class="linenum"> 159</span></a>  <span class="comment">    The second time, it will stop the timer and report how long the run took.</span>
<a name="l160"><span class="linenum"> 160</span></a>  <span class="comment">    The second time you run it, it will start a second timer. (no efficiency concern here though.) */</span>
<a name="l161"><span class="linenum"> 161</span></a>      
<a name="l162"><span class="linenum"> 162</span></a>      global <a class="var it7516" onMouseOver="hilite(7516)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>, <a class="var it7750" onMouseOver="hilite(7750)" onMouseOut="lolite()" onClick="logVariable('count_timers')" href="../../_variables/count_timers.html">$count_timers</a>;
<a name="l163"><span class="linenum"> 163</span></a>      
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment">    // If this function is being run a second time, output the timer result.</span>
<a name="l165"><span class="linenum"> 165</span></a>      if (<a class="var it7750" onMouseOver="hilite(7750)" onMouseOut="lolite()" onClick="logVariable('count_timers')" href="../../_variables/count_timers.html">$count_timers</a> &gt; 0) { 
<a name="l166"><span class="linenum"> 166</span></a>          if (<a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> == &quot;&quot;) { <a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = &quot;Timer &quot;.<a class="var it7750" onMouseOver="hilite(7750)" onMouseOut="lolite()" onClick="logVariable('count_timers')" href="../../_variables/count_timers.html">$count_timers</a>; }
<a name="l167"><span class="linenum"> 167</span></a>          <a class="var it389" onMouseOver="hilite(389)" onMouseOut="lolite()" onClick="logVariable('end')" href="../../_variables/end.html">$end</a>=<a class="phpfunction" onClick="logFunction('microtime')" href="../../_functions/microtime.html" onMouseOver="phpfuncPopup(event,'microtime')">microtime</a>(); <a class="var it389" onMouseOver="hilite(389)" onMouseOut="lolite()" onClick="logVariable('end')" href="../../_variables/end.html">$end</a>=<a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot; &quot;,<a class="var it389" onMouseOver="hilite(389)" onMouseOut="lolite()" onClick="logVariable('end')" href="../../_variables/end.html">$end</a>); <a class="var it389" onMouseOver="hilite(389)" onMouseOut="lolite()" onClick="logVariable('end')" href="../../_variables/end.html">$end</a>=<a class="var it389" onMouseOver="hilite(389)" onMouseOut="lolite()" onClick="logVariable('end')" href="../../_variables/end.html">$end</a>[1]+<a class="var it389" onMouseOver="hilite(389)" onMouseOut="lolite()" onClick="logVariable('end')" href="../../_variables/end.html">$end</a>[0]; 
<a name="l168"><span class="linenum"> 168</span></a>          <a class="var it7751" onMouseOver="hilite(7751)" onMouseOut="lolite()" onClick="logVariable('total')" href="../../_variables/total.html">$total</a> = <a class="phpfunction" onClick="logFunction('round')" href="../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>(<a class="var it389" onMouseOver="hilite(389)" onMouseOut="lolite()" onClick="logVariable('end')" href="../../_variables/end.html">$end</a>-<a class="var it7516" onMouseOver="hilite(7516)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>, 2);
<a name="l169"><span class="linenum"> 169</span></a>          
<a name="l170"><span class="linenum"> 170</span></a>          echo <a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>.&quot; took &quot;.<a class="var it7751" onMouseOver="hilite(7751)" onMouseOut="lolite()" onClick="logVariable('total')" href="../../_variables/total.html">$total</a>.&quot; seconds. &lt;br&gt;&quot;;
<a name="l171"><span class="linenum"> 171</span></a>      }
<a name="l172"><span class="linenum"> 172</span></a>      
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment">    // Start the next timer</span>
<a name="l174"><span class="linenum"> 174</span></a>      <a class="var it7750" onMouseOver="hilite(7750)" onMouseOut="lolite()" onClick="logVariable('count_timers')" href="../../_variables/count_timers.html">$count_timers</a> ++;
<a name="l175"><span class="linenum"> 175</span></a>      <a class="var it7516" onMouseOver="hilite(7516)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>=<a class="phpfunction" onClick="logFunction('microtime')" href="../../_functions/microtime.html" onMouseOver="phpfuncPopup(event,'microtime')">microtime</a>(); <a class="var it7516" onMouseOver="hilite(7516)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>=<a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot; &quot;,<a class="var it7516" onMouseOver="hilite(7516)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>); <a class="var it7516" onMouseOver="hilite(7516)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>=<a class="var it7516" onMouseOver="hilite(7516)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>[1]+<a class="var it7516" onMouseOver="hilite(7516)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>[0];
<a name="l176"><span class="linenum"> 176</span></a>       
<a name="l177"><span class="linenum"> 177</span></a>  }
<a name="l178"><span class="linenum"> 178</span></a>  
<a name="l179"><span class="linenum"> 179</span></a>  
<a name="l180"><span class="linenum"> 180</span></a>  
<a name="l181"><span class="linenum"> 181</span></a>  function <a class="function" onClick="logFunction('zeropad')" href="../../_functions/zeropad.html" onMouseOver="funcPopup(event,'zeropad')">zeropad</a>( <a class="var it324" onMouseOver="hilite(324)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>, <a class="var it390" onMouseOver="hilite(390)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../_variables/length.html">$length</a> ) {
<a name="l182"><span class="linenum"> 182</span></a>      return <a class="phpfunction" onClick="logFunction('str_pad')" href="../../_functions/str_pad.html" onMouseOver="phpfuncPopup(event,'str_pad')">str_pad</a>(<a class="var it324" onMouseOver="hilite(324)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>, <a class="var it390" onMouseOver="hilite(390)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../_variables/length.html">$length</a>, '0', STR_PAD_LEFT);
<a name="l183"><span class="linenum"> 183</span></a>  }
<a name="l184"><span class="linenum"> 184</span></a>  
<a name="l185"><span class="linenum"> 185</span></a>  
<a name="l186"><span class="linenum"> 186</span></a>  
<a name="l187"><span class="linenum"> 187</span></a>  
<a name="l188"><span class="linenum"> 188</span></a>  function <a class="function" onClick="logFunction('topher')" href="../../_functions/topher.html" onMouseOver="funcPopup(event,'topher')">topher</a>(<a class="var it5355" onMouseOver="hilite(5355)" onMouseOut="lolite()" onClick="logVariable('abort_message')" href="../../_variables/abort_message.html">$abort_message</a> = &quot;&quot;) 
<a name="l189"><span class="linenum"> 189</span></a>  {
<a name="l190"><span class="linenum"> 190</span></a>      <span class="comment">/* The act of &quot;Tophering&quot; involves killing a page and outputting a final death message, </span>
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment">         but only if the logged-in viewer is named Topher. I diagnose lots of problems by killing pages</span>
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment">         with error messages, and now there's an easy way to do so which is humane to other </span>
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment">         users of the page. </span>
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment">         Specify a string of text and it will be printed to the page </span>
<a name="l195"><span class="linenum"> 195</span></a>  <span class="comment">         (more useful in the pre-HTML header), and will NOT kill the page. </span>
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment">         Then call topher() without a message to kill the page. */</span>
<a name="l197"><span class="linenum"> 197</span></a>      if (<a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('_SESSION')" href="../../_variables/_SESSION.html">$_SESSION</a>['log_firstname'] == &quot;Topher&quot;) { 
<a name="l198"><span class="linenum"> 198</span></a>          if (<a class="var it5355" onMouseOver="hilite(5355)" onMouseOut="lolite()" onClick="logVariable('abort_message')" href="../../_variables/abort_message.html">$abort_message</a> &lt;&gt; &quot;&quot;) { echo <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;\n&quot;, &quot;&lt;br&gt;&quot;, <a class="var it5355" onMouseOver="hilite(5355)" onMouseOut="lolite()" onClick="logVariable('abort_message')" href="../../_variables/abort_message.html">$abort_message</a>).&quot;&lt;br&gt;&quot;; } 
<a name="l199"><span class="linenum"> 199</span></a>          else { die(&quot;&lt;br&gt;Success.&lt;br&gt;&quot;); }
<a name="l200"><span class="linenum"> 200</span></a>      }
<a name="l201"><span class="linenum"> 201</span></a>  }
<a name="l202"><span class="linenum"> 202</span></a>  
<a name="l203"><span class="linenum"> 203</span></a>  
<a name="l204"><span class="linenum"> 204</span></a>  
<a name="l205"><span class="linenum"> 205</span></a>  if (!<a class="phpfunction" onClick="logFunction('function_exists')" href="../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(&quot;SQLstr&quot;)) {
<a name="l206"><span class="linenum"> 206</span></a>  function <a class="function" onClick="logFunction('SQLstr')" href="../../_functions/sqlstr.html" onMouseOver="funcPopup(event,'sqlstr')">SQLstr</a>(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('theType')" href="../../_variables/theType.html">$theType</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('theDefinedValue')" href="../../_variables/theDefinedValue.html">$theDefinedValue</a> = &quot;&quot;, <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('theNotDefinedValue')" href="../../_variables/theNotDefinedValue.html">$theNotDefinedValue</a> = &quot;&quot;) {
<a name="l207"><span class="linenum"> 207</span></a>  <span class="comment">    // All SQL-input locations should run through this function.</span>
<a name="l208"><span class="linenum"> 208</span></a>  <span class="comment">    // Note the mysql_real_escape_string text which sanitizes input against SQL injection attacks.</span>
<a name="l209"><span class="linenum"> 209</span></a>      
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment">    // Replace tabs and newlines with more table-friendly whitespace. </span>
<a name="l211"><span class="linenum"> 211</span></a>      <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(array(&quot;\r\n&quot;, &quot;\n&quot;, &quot;\r&quot;), &quot;&lt;br&gt;&quot;, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a>);
<a name="l212"><span class="linenum"> 212</span></a>      <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(array(&quot;   &quot;, &quot;  &quot;), &quot; &quot;, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a>);
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">    // $theValue = str_replace(array(&quot;&lt;br&gt;&lt;br&gt;&quot;, &quot;&lt;br&gt; &lt;br&gt;&quot;), &quot;&lt;br&gt;&quot;, $theValue);</span>
<a name="l214"><span class="linenum"> 214</span></a>      <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;\t&quot;, &quot;    &quot;, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a>);
<a name="l215"><span class="linenum"> 215</span></a>    <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a> = <a class="phpfunction" onClick="logFunction('mysql_real_escape_string')" href="../../_functions/mysql_real_escape_string.html" onMouseOver="phpfuncPopup(event,'mysql_real_escape_string')">mysql_real_escape_string</a>(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a>);
<a name="l216"><span class="linenum"> 216</span></a>  
<a name="l217"><span class="linenum"> 217</span></a>    switch (<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('theType')" href="../../_variables/theType.html">$theType</a>) {
<a name="l218"><span class="linenum"> 218</span></a>      case &quot;text&quot;:
<a name="l219"><span class="linenum"> 219</span></a>        <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a> = (<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a> != &quot;&quot;) ? &quot;'&quot;.<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a>.&quot;'&quot; : &quot;NULL&quot;;
<a name="l220"><span class="linenum"> 220</span></a>        break;    
<a name="l221"><span class="linenum"> 221</span></a>      case &quot;long&quot;:
<a name="l222"><span class="linenum"> 222</span></a>      case &quot;int&quot;:
<a name="l223"><span class="linenum"> 223</span></a>        <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a> = (<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a> != &quot;&quot;) ? <a class="phpfunction" onClick="logFunction('intval')" href="../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a>) : &quot;NULL&quot;;
<a name="l224"><span class="linenum"> 224</span></a>        break;
<a name="l225"><span class="linenum"> 225</span></a>      case &quot;double&quot;:
<a name="l226"><span class="linenum"> 226</span></a>        <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a> = (<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a> != &quot;&quot;) ? doubleval(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a>) : &quot;NULL&quot;;
<a name="l227"><span class="linenum"> 227</span></a>        break;
<a name="l228"><span class="linenum"> 228</span></a>      case &quot;date&quot;:
<a name="l229"><span class="linenum"> 229</span></a>        <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a> = (<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a> != &quot;&quot;) ? &quot;'&quot; . <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a> . &quot;'&quot; : &quot;NULL&quot;;
<a name="l230"><span class="linenum"> 230</span></a>        break;
<a name="l231"><span class="linenum"> 231</span></a>      case &quot;defined&quot;:
<a name="l232"><span class="linenum"> 232</span></a>        <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a> = (<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a> != &quot;&quot;) ? <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('theDefinedValue')" href="../../_variables/theDefinedValue.html">$theDefinedValue</a> : <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('theNotDefinedValue')" href="../../_variables/theNotDefinedValue.html">$theNotDefinedValue</a>;
<a name="l233"><span class="linenum"> 233</span></a>        break;
<a name="l234"><span class="linenum"> 234</span></a>    }
<a name="l235"><span class="linenum"> 235</span></a>    return <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a>;
<a name="l236"><span class="linenum"> 236</span></a>  }
<a name="l237"><span class="linenum"> 237</span></a>  }
<a name="l238"><span class="linenum"> 238</span></a>  
<a name="l239"><span class="linenum"> 239</span></a>  function <a class="function" onClick="logFunction('SQLrstr')" href="../../_functions/sqlrstr.html" onMouseOver="funcPopup(event,'sqlrstr')">SQLrstr</a>(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('theType')" href="../../_variables/theType.html">$theType</a>) {
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment">    // Works like SQLstr, but 2 differences:</span>
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">    // 1) only for text type</span>
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">    // 2) doesn't turn newlines into &lt;br&gt;.</span>
<a name="l243"><span class="linenum"> 243</span></a>      
<a name="l244"><span class="linenum"> 244</span></a>      <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(array(&quot;   &quot;, &quot;  &quot;), &quot; &quot;, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a>);
<a name="l245"><span class="linenum"> 245</span></a>      <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;\t&quot;, &quot;    &quot;, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a>);
<a name="l246"><span class="linenum"> 246</span></a>    <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a> = <a class="phpfunction" onClick="logFunction('mysql_real_escape_string')" href="../../_functions/mysql_real_escape_string.html" onMouseOver="phpfuncPopup(event,'mysql_real_escape_string')">mysql_real_escape_string</a>(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a>);
<a name="l247"><span class="linenum"> 247</span></a>      <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a> = (<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a> != &quot;&quot;) ? &quot;'&quot;.<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a>.&quot;'&quot; : &quot;NULL&quot;;
<a name="l248"><span class="linenum"> 248</span></a>    return <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('theValue')" href="../../_variables/theValue.html">$theValue</a>;
<a name="l249"><span class="linenum"> 249</span></a>  }
<a name="l250"><span class="linenum"> 250</span></a>  
<a name="l251"><span class="linenum"> 251</span></a>  
<a name="l252"><span class="linenum"> 252</span></a>  
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment">// Prepare array containing all boilerplate fields of the types specified</span>
<a name="l254"><span class="linenum"> 254</span></a>  function <a class="function" onClick="logFunction('prepBoilerplate')" href="../../_functions/prepboilerplate.html" onMouseOver="funcPopup(event,'prepboilerplate')">prepBoilerplate</a>(<a class="var it7752" onMouseOver="hilite(7752)" onMouseOut="lolite()" onClick="logVariable('type1')" href="../../_variables/type1.html">$type1</a>, <a class="var it7753" onMouseOver="hilite(7753)" onMouseOut="lolite()" onClick="logVariable('type2')" href="../../_variables/type2.html">$type2</a>='', <a class="var it7754" onMouseOver="hilite(7754)" onMouseOut="lolite()" onClick="logVariable('type3')" href="../../_variables/type3.html">$type3</a>='') {
<a name="l255"><span class="linenum"> 255</span></a>      <a class="var it7755" onMouseOver="hilite(7755)" onMouseOut="lolite()" onClick="logVariable('sql_types')" href="../../_variables/sql_types.html">$sql_types</a> = sprintf(&quot;type = %s&quot;, <a class="function" onClick="logFunction('SQLstr')" href="../../_functions/sqlstr.html" onMouseOver="funcPopup(event,'sqlstr')">SQLstr</a>(<a class="var it7752" onMouseOver="hilite(7752)" onMouseOut="lolite()" onClick="logVariable('type1')" href="../../_variables/type1.html">$type1</a>, 'int'));
<a name="l256"><span class="linenum"> 256</span></a>      if (<a class="var it7753" onMouseOver="hilite(7753)" onMouseOut="lolite()" onClick="logVariable('type2')" href="../../_variables/type2.html">$type2</a> &lt;&gt; '') { <a class="var it7755" onMouseOver="hilite(7755)" onMouseOut="lolite()" onClick="logVariable('sql_types')" href="../../_variables/sql_types.html">$sql_types</a> .= sprintf(&quot; OR type = %s &quot;, <a class="function" onClick="logFunction('SQLstr')" href="../../_functions/sqlstr.html" onMouseOver="funcPopup(event,'sqlstr')">SQLstr</a>(<a class="var it7753" onMouseOver="hilite(7753)" onMouseOut="lolite()" onClick="logVariable('type2')" href="../../_variables/type2.html">$type2</a>, 'int')); }
<a name="l257"><span class="linenum"> 257</span></a>      if (<a class="var it7754" onMouseOver="hilite(7754)" onMouseOut="lolite()" onClick="logVariable('type3')" href="../../_variables/type3.html">$type3</a> &lt;&gt; '') { <a class="var it7755" onMouseOver="hilite(7755)" onMouseOut="lolite()" onClick="logVariable('sql_types')" href="../../_variables/sql_types.html">$sql_types</a> .= sprintf(&quot; OR type = %s &quot;, <a class="function" onClick="logFunction('SQLstr')" href="../../_functions/sqlstr.html" onMouseOver="funcPopup(event,'sqlstr')">SQLstr</a>(<a class="var it7754" onMouseOver="hilite(7754)" onMouseOut="lolite()" onClick="logVariable('type3')" href="../../_variables/type3.html">$type3</a>, 'int')); }
<a name="l258"><span class="linenum"> 258</span></a>      <a class="var it1529" onMouseOver="hilite(1529)" onMouseOut="lolite()" onClick="logVariable('rsLaBoil')" href="../../_variables/rsLaBoil.html">$rsLaBoil</a> = <a class="phpfunction" onClick="logFunction('mysql_query')" href="../../_functions/mysql_query.html" onMouseOver="phpfuncPopup(event,'mysql_query')">mysql_query</a>(&quot;SELECT * FROM la_boilerplate WHERE {<a class="var it7755" onMouseOver="hilite(7755)" onMouseOut="lolite()" onClick="logVariable('sql_types')" href="../../_variables/sql_types.html">$sql_types</a>}&quot;) 
<a name="l259"><span class="linenum"> 259</span></a>          or die(&quot;Boilerplate: &quot;.<a class="phpfunction" onClick="logFunction('mysql_error')" href="../../_functions/mysql_error.html" onMouseOver="phpfuncPopup(event,'mysql_error')">mysql_error</a>());
<a name="l260"><span class="linenum"> 260</span></a>      
<a name="l261"><span class="linenum"> 261</span></a>      <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('boilerplate')" href="../../_variables/boilerplate.html">$boilerplate</a> = array();
<a name="l262"><span class="linenum"> 262</span></a>      while (<a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a> = <a class="phpfunction" onClick="logFunction('mysql_fetch_assoc')" href="../../_functions/mysql_fetch_assoc.html" onMouseOver="phpfuncPopup(event,'mysql_fetch_assoc')">mysql_fetch_assoc</a>(<a class="var it1529" onMouseOver="hilite(1529)" onMouseOut="lolite()" onClick="logVariable('rsLaBoil')" href="../../_variables/rsLaBoil.html">$rsLaBoil</a>)) { 
<a name="l263"><span class="linenum"> 263</span></a>          <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('boilerplate')" href="../../_variables/boilerplate.html">$boilerplate</a>[<a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['name']] = <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['la_boilerplate_text']; 
<a name="l264"><span class="linenum"> 264</span></a>      }
<a name="l265"><span class="linenum"> 265</span></a>      
<a name="l266"><span class="linenum"> 266</span></a>      return <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('boilerplate')" href="../../_variables/boilerplate.html">$boilerplate</a>;
<a name="l267"><span class="linenum"> 267</span></a>  }
<a name="l268"><span class="linenum"> 268</span></a>  
<a name="l269"><span class="linenum"> 269</span></a>  
<a name="l270"><span class="linenum"> 270</span></a>  function <a class="function" onClick="logFunction('sendEmail')" href="../../_functions/sendemail.html" onMouseOver="funcPopup(event,'sendemail')">sendEmail</a>(<a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('to')" href="../../_variables/to.html">$to</a>, <a class="var it215" onMouseOver="hilite(215)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>, <a class="var it426" onMouseOver="hilite(426)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../../_variables/cc.html">$cc</a> = '', <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../_variables/subject.html">$subject</a>, <a class="var it211" onMouseOver="hilite(211)" onMouseOut="lolite()" onClick="logVariable('body')" href="../../_variables/body.html">$body</a>) {
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">    // SENDMAIL now relies on SWIFTMAIL.</span>
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">    // from = string, or associative array, like this: </span>
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">    //   array('service@lectica.org' =&gt; 'DTS Service')</span>
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment">    // to = string, or associative array of addresses, like this:</span>
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">    //   array('topher@lectica.org', 'inquiries@lectica.org' =&gt; 'Topher home address')</span>
<a name="l276"><span class="linenum"> 276</span></a>      
<a name="l277"><span class="linenum"> 277</span></a>  <span class="comment">    // Swiftmailer breaks and freaks out if you feed it a blank address.</span>
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment">    // if ($cc == &quot;&quot;) { unset($cc); }</span>
<a name="l279"><span class="linenum"> 279</span></a>      
<a name="l280"><span class="linenum"> 280</span></a>      if (<a class="var it215" onMouseOver="hilite(215)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a> == &quot;&quot;) { 
<a name="l281"><span class="linenum"> 281</span></a>          <a class="phpfunction" onClick="logFunction('error_log')" href="../../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>(&quot;ERROR - sendEmail doesn't like sending mails with no FROM address.&quot;);
<a name="l282"><span class="linenum"> 282</span></a>          <a class="var it215" onMouseOver="hilite(215)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a> = &quot;admin@lectica.org&quot;;
<a name="l283"><span class="linenum"> 283</span></a>      }
<a name="l284"><span class="linenum"> 284</span></a>      if (<a class="var it426" onMouseOver="hilite(426)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../../_variables/cc.html">$cc</a> == '' OR <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it426" onMouseOver="hilite(426)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../../_variables/cc.html">$cc</a>) == 0) { unset(<a class="var it426" onMouseOver="hilite(426)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../../_variables/cc.html">$cc</a>); }
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment">    // Check for, and split string by, commas separating addresses; converts string into an array.</span>
<a name="l286"><span class="linenum"> 286</span></a>      if (<a class="phpfunction" onClick="logFunction('is_string')" href="../../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('to')" href="../../_variables/to.html">$to</a>))   { <a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('to')" href="../../_variables/to.html">$to</a> =   <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;, &quot;, &quot;,&quot;, <a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('to')" href="../../_variables/to.html">$to</a>);   <a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('to')" href="../../_variables/to.html">$to</a> =   <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;,&quot;, <a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('to')" href="../../_variables/to.html">$to</a>); }
<a name="l287"><span class="linenum"> 287</span></a>      if (isset(<a class="var it426" onMouseOver="hilite(426)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../../_variables/cc.html">$cc</a>) AND <a class="phpfunction" onClick="logFunction('is_string')" href="../../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it426" onMouseOver="hilite(426)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../../_variables/cc.html">$cc</a>))   
<a name="l288"><span class="linenum"> 288</span></a>          { <a class="var it426" onMouseOver="hilite(426)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../../_variables/cc.html">$cc</a> =   <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;, &quot;, &quot;,&quot;, <a class="var it426" onMouseOver="hilite(426)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../../_variables/cc.html">$cc</a>);   <a class="var it426" onMouseOver="hilite(426)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../../_variables/cc.html">$cc</a> =   <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;,&quot;, <a class="var it426" onMouseOver="hilite(426)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../../_variables/cc.html">$cc</a>); }
<a name="l289"><span class="linenum"> 289</span></a>      if (<a class="phpfunction" onClick="logFunction('is_string')" href="../../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it215" onMouseOver="hilite(215)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>)) { <a class="var it215" onMouseOver="hilite(215)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;, &quot;, &quot;,&quot;, <a class="var it215" onMouseOver="hilite(215)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>); <a class="var it215" onMouseOver="hilite(215)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;,&quot;, <a class="var it215" onMouseOver="hilite(215)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>); }
<a name="l290"><span class="linenum"> 290</span></a>      
<a name="l291"><span class="linenum"> 291</span></a>      foreach (<a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('to')" href="../../_variables/to.html">$to</a> as <a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>) {
<a name="l292"><span class="linenum"> 292</span></a>          if (<a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a> == &quot;&quot;) {
<a name="l293"><span class="linenum"> 293</span></a>              <a class="phpfunction" onClick="logFunction('error_log')" href="../../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>(&quot;ERROR - sendEmail died: SwiftMailer requires non-blank TO address.&quot;);
<a name="l294"><span class="linenum"> 294</span></a>              return false;
<a name="l295"><span class="linenum"> 295</span></a>          }
<a name="l296"><span class="linenum"> 296</span></a>      }
<a name="l297"><span class="linenum"> 297</span></a>      foreach (<a class="var it215" onMouseOver="hilite(215)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a> as <a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>) {
<a name="l298"><span class="linenum"> 298</span></a>          if (<a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a> == &quot;&quot;) {
<a name="l299"><span class="linenum"> 299</span></a>              <a class="phpfunction" onClick="logFunction('error_log')" href="../../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>(&quot;ERROR - sendEmail died: SwiftMailer requires non-blank FROM address.&quot;);
<a name="l300"><span class="linenum"> 300</span></a>              return false;
<a name="l301"><span class="linenum"> 301</span></a>          }
<a name="l302"><span class="linenum"> 302</span></a>      }
<a name="l303"><span class="linenum"> 303</span></a>      
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment">    // Define the standard email transport and mailer here.</span>
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment">    // This means that each function call opens a new connection from our server to itself.</span>
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">    // This is better than mail(), which opens a new connection to the recipient server for each mail.</span>
<a name="l307"><span class="linenum"> 307</span></a>      <a class="var it1789" onMouseOver="hilite(1789)" onMouseOut="lolite()" onClick="logVariable('transport')" href="../../_variables/transport.html">$transport</a> = <a class="class" onClick="logClass('Swift_SmtpTransport')" href="../../_classes/swift_smtptransport.html" onMouseOver="classPopup(event,'swift_smtptransport')">Swift_SmtpTransport</a>::<a class="function" onClick="logFunction('newInstance')" href="../../_functions/newinstance.html" onMouseOver="funcPopup(event,'newinstance')">newInstance</a>('mail.lectica.org', 25)
<a name="l308"><span class="linenum"> 308</span></a>          -&gt;<a class="function" onClick="logFunction('setUsername')" href="../../_functions/setusername.html" onMouseOver="funcPopup(event,'setusername')">setUsername</a>('admin')
<a name="l309"><span class="linenum"> 309</span></a>          -&gt;<a class="function" onClick="logFunction('setPassword')" href="../../_functions/setpassword.html" onMouseOver="funcPopup(event,'setpassword')">setPassword</a>('grpf4(eO#');
<a name="l310"><span class="linenum"> 310</span></a>      <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('mailer')" href="../../_variables/mailer.html">$mailer</a> = <a class="class" onClick="logClass('Swift_Mailer')" href="../../_classes/swift_mailer.html" onMouseOver="classPopup(event,'swift_mailer')">Swift_Mailer</a>::<a class="function" onClick="logFunction('newInstance')" href="../../_functions/newinstance.html" onMouseOver="funcPopup(event,'newinstance')">newInstance</a>(<a class="var it1789" onMouseOver="hilite(1789)" onMouseOut="lolite()" onClick="logVariable('transport')" href="../../_variables/transport.html">$transport</a>);
<a name="l311"><span class="linenum"> 311</span></a>      
<a name="l312"><span class="linenum"> 312</span></a>  <span class="comment">    // Add the signature, if not already present</span>
<a name="l313"><span class="linenum"> 313</span></a>      <a class="var it7649" onMouseOver="hilite(7649)" onMouseOut="lolite()" onClick="logVariable('rsBp')" href="../../_variables/rsBp.html">$rsBp</a> = <a class="phpfunction" onClick="logFunction('mysql_query')" href="../../_functions/mysql_query.html" onMouseOver="phpfuncPopup(event,'mysql_query')">mysql_query</a>(&quot;SELECT * FROM la_boilerplate 
<a name="l314"><span class="linenum"> 314</span></a>          WHERE type = 'admin' AND name = 'email_signature'&quot;) or die(&quot;ERROR: &quot;.<a class="phpfunction" onClick="logFunction('mysql_error')" href="../../_functions/mysql_error.html" onMouseOver="phpfuncPopup(event,'mysql_error')">mysql_error</a>());
<a name="l315"><span class="linenum"> 315</span></a>      <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a> = <a class="phpfunction" onClick="logFunction('mysql_fetch_assoc')" href="../../_functions/mysql_fetch_assoc.html" onMouseOver="phpfuncPopup(event,'mysql_fetch_assoc')">mysql_fetch_assoc</a>(<a class="var it7649" onMouseOver="hilite(7649)" onMouseOut="lolite()" onClick="logVariable('rsBp')" href="../../_variables/rsBp.html">$rsBp</a>); 
<a name="l316"><span class="linenum"> 316</span></a>      <a class="var it5356" onMouseOver="hilite(5356)" onMouseOut="lolite()" onClick="logVariable('signature')" href="../../_variables/signature.html">$signature</a> = <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['la_boilerplate_text']; 
<a name="l317"><span class="linenum"> 317</span></a>      if (!<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it211" onMouseOver="hilite(211)" onMouseOut="lolite()" onClick="logVariable('body')" href="../../_variables/body.html">$body</a>, &quot;standardized, formative, and diagnostic developmental assessments&quot;)) { 
<a name="l318"><span class="linenum"> 318</span></a>          <a class="var it211" onMouseOver="hilite(211)" onMouseOut="lolite()" onClick="logVariable('body')" href="../../_variables/body.html">$body</a> .= <a class="var it5356" onMouseOver="hilite(5356)" onMouseOut="lolite()" onClick="logVariable('signature')" href="../../_variables/signature.html">$signature</a>;
<a name="l319"><span class="linenum"> 319</span></a>      }
<a name="l320"><span class="linenum"> 320</span></a>      
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">    // Create the message instance and send it.</span>
<a name="l322"><span class="linenum"> 322</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a> = <a class="class" onClick="logClass('Swift_Message')" href="../../_classes/swift_message.html" onMouseOver="classPopup(event,'swift_message')">Swift_Message</a>::<a class="function" onClick="logFunction('newInstance')" href="../../_functions/newinstance.html" onMouseOver="funcPopup(event,'newinstance')">newInstance</a>()
<a name="l323"><span class="linenum"> 323</span></a>          -&gt;<a class="function" onClick="logFunction('setFrom')" href="../../_functions/setfrom.html" onMouseOver="funcPopup(event,'setfrom')">setFrom</a>(<a class="var it215" onMouseOver="hilite(215)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>)
<a name="l324"><span class="linenum"> 324</span></a>          -&gt;<a class="function" onClick="logFunction('setTo')" href="../../_functions/setto.html" onMouseOver="funcPopup(event,'setto')">setTo</a>(<a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('to')" href="../../_variables/to.html">$to</a>)
<a name="l325"><span class="linenum"> 325</span></a>          -&gt;<a class="function" onClick="logFunction('setSubject')" href="../../_functions/setsubject.html" onMouseOver="funcPopup(event,'setsubject')">setSubject</a>(<a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../_variables/subject.html">$subject</a>)
<a name="l326"><span class="linenum"> 326</span></a>          -&gt;<a class="function" onClick="logFunction('setBody')" href="../../_functions/setbody.html" onMouseOver="funcPopup(event,'setbody')">setBody</a>(<a class="var it211" onMouseOver="hilite(211)" onMouseOut="lolite()" onClick="logVariable('body')" href="../../_variables/body.html">$body</a>);
<a name="l327"><span class="linenum"> 327</span></a>      if (isset(<a class="var it426" onMouseOver="hilite(426)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../../_variables/cc.html">$cc</a>)) { <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>-&gt;<a class="function" onClick="logFunction('setCc')" href="../../_functions/setcc.html" onMouseOver="funcPopup(event,'setcc')">setCc</a>(<a class="var it426" onMouseOver="hilite(426)" onMouseOut="lolite()" onClick="logVariable('cc')" href="../../_variables/cc.html">$cc</a>); }
<a name="l328"><span class="linenum"> 328</span></a>      <a class="var it7756" onMouseOver="hilite(7756)" onMouseOut="lolite()" onClick="logVariable('numSent')" href="../../_variables/numSent.html">$numSent</a> = <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('mailer')" href="../../_variables/mailer.html">$mailer</a>-&gt;<a class="function" onClick="logFunction('send')" href="../../_functions/send.html" onMouseOver="funcPopup(event,'send')">send</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>);
<a name="l329"><span class="linenum"> 329</span></a>      return <a class="var it7756" onMouseOver="hilite(7756)" onMouseOut="lolite()" onClick="logVariable('numSent')" href="../../_variables/numSent.html">$numSent</a>;
<a name="l330"><span class="linenum"> 330</span></a>  }
<a name="l331"><span class="linenum"> 331</span></a>  
<a name="l332"><span class="linenum"> 332</span></a>  
<a name="l333"><span class="linenum"> 333</span></a>  
<a name="l334"><span class="linenum"> 334</span></a>  function <a class="function" onClick="logFunction('securityAlert')" href="../../_functions/securityalert.html" onMouseOver="funcPopup(event,'securityalert')">securityAlert</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>) {
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment">    // Use this function as a shortcut to alert us when suspicious things happen on various pages. </span>
<a name="l336"><span class="linenum"> 336</span></a>      <a class="function" onClick="logFunction('sendEmail')" href="../../_functions/sendemail.html" onMouseOver="funcPopup(event,'sendemail')">sendEmail</a>( &quot;service@lectica.org&quot;, &quot;service@lectica.org&quot;, &quot;&quot;,
<a name="l337"><span class="linenum"> 337</span></a>           &quot;SECURITY ALERT from page &quot;.<a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../_variables/_SERVER.html">$_SERVER</a>['PHP_SELF'],
<a name="l338"><span class="linenum"> 338</span></a>           &quot;The following automatic security alert was triggered by page &quot;.<a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../_variables/_SERVER.html">$_SERVER</a>['PHP_SELF'].&quot;: \n&quot;.
<a name="l339"><span class="linenum"> 339</span></a>           <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a> );
<a name="l340"><span class="linenum"> 340</span></a>  }
<a name="l341"><span class="linenum"> 341</span></a>  
<a name="l342"><span class="linenum"> 342</span></a>  
<a name="l343"><span class="linenum"> 343</span></a>  
<a name="l344"><span class="linenum"> 344</span></a>  function <a class="function" onClick="logFunction('randomPassword')" href="../../_functions/randompassword.html" onMouseOver="funcPopup(event,'randompassword')">randomPassword</a>(<a class="var it2743" onMouseOver="hilite(2743)" onMouseOut="lolite()" onClick="logVariable('pw_length')" href="../../_variables/pw_length.html">$pw_length</a> = 8) { 
<a name="l345"><span class="linenum"> 345</span></a>  <span class="comment">    // * depends on sendEmail to alert us if errors are found.</span>
<a name="l346"><span class="linenum"> 346</span></a>  <span class="comment">    // Also depends on query functionality, which most of my other functions do not do.</span>
<a name="l347"><span class="linenum"> 347</span></a>      global <a class="var it19" onMouseOver="hilite(19)" onMouseOut="lolite()" onClick="logVariable('database_Assessment')" href="../../_variables/database_Assessment.html">$database_Assessment</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('Assessment')" href="../../_variables/Assessment.html">$Assessment</a>;
<a name="l348"><span class="linenum"> 348</span></a>      
<a name="l349"><span class="linenum"> 349</span></a>      
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment">    //                                     Generate a random password</span>
<a name="l351"><span class="linenum"> 351</span></a>          
<a name="l352"><span class="linenum"> 352</span></a>  <span class="comment">    // by default, all passwords are 8 characters in length.</span>
<a name="l353"><span class="linenum"> 353</span></a>  <span class="comment">    // the pw will have between 1 and (length-1) alphabetic characters,</span>
<a name="l354"><span class="linenum"> 354</span></a>      <a class="var it2744" onMouseOver="hilite(2744)" onMouseOut="lolite()" onClick="logVariable('char_length')" href="../../_variables/char_length.html">$char_length</a> = <a class="phpfunction" onClick="logFunction('mt_rand')" href="../../_functions/mt_rand.html" onMouseOver="phpfuncPopup(event,'mt_rand')">mt_rand</a>(1, <a class="var it2743" onMouseOver="hilite(2743)" onMouseOut="lolite()" onClick="logVariable('pw_length')" href="../../_variables/pw_length.html">$pw_length</a> - 1);
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment">    // and the rest will be numbers.</span>
<a name="l356"><span class="linenum"> 356</span></a>      <a class="var it2745" onMouseOver="hilite(2745)" onMouseOut="lolite()" onClick="logVariable('num_length')" href="../../_variables/num_length.html">$num_length</a> = <a class="var it2743" onMouseOver="hilite(2743)" onMouseOut="lolite()" onClick="logVariable('pw_length')" href="../../_variables/pw_length.html">$pw_length</a> - <a class="var it2744" onMouseOver="hilite(2744)" onMouseOut="lolite()" onClick="logVariable('char_length')" href="../../_variables/char_length.html">$char_length</a>;
<a name="l357"><span class="linenum"> 357</span></a>  <span class="comment">    // except there might be an initial capital letter,</span>
<a name="l358"><span class="linenum"> 358</span></a>      <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('capital')" href="../../_variables/capital.html">$capital</a> = &quot;&quot;;
<a name="l359"><span class="linenum"> 359</span></a>      if (<a class="phpfunction" onClick="logFunction('mt_rand')" href="../../_functions/mt_rand.html" onMouseOver="phpfuncPopup(event,'mt_rand')">mt_rand</a>(0,1) == 1) {
<a name="l360"><span class="linenum"> 360</span></a>          <a class="var it2747" onMouseOver="hilite(2747)" onMouseOut="lolite()" onClick="logVariable('capital_pool')" href="../../_variables/capital_pool.html">$capital_pool</a> = &quot;ABCDEFGHNJKLMNOPQRSTUVWXYZ&quot;;
<a name="l361"><span class="linenum"> 361</span></a>          <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('capital')" href="../../_variables/capital.html">$capital</a> = <a class="var it2747" onMouseOver="hilite(2747)" onMouseOut="lolite()" onClick="logVariable('capital_pool')" href="../../_variables/capital_pool.html">$capital_pool</a>[<a class="phpfunction" onClick="logFunction('mt_rand')" href="../../_functions/mt_rand.html" onMouseOver="phpfuncPopup(event,'mt_rand')">mt_rand</a>(0, 25)];
<a name="l362"><span class="linenum"> 362</span></a>          <a class="var it2744" onMouseOver="hilite(2744)" onMouseOut="lolite()" onClick="logVariable('char_length')" href="../../_variables/char_length.html">$char_length</a> --;
<a name="l363"><span class="linenum"> 363</span></a>      }
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment">    // and there also might be a final punctuation mark.</span>
<a name="l365"><span class="linenum"> 365</span></a>      <a class="var it2748" onMouseOver="hilite(2748)" onMouseOut="lolite()" onClick="logVariable('punc')" href="../../_variables/punc.html">$punc</a> = &quot;&quot;;
<a name="l366"><span class="linenum"> 366</span></a>      if (<a class="phpfunction" onClick="logFunction('mt_rand')" href="../../_functions/mt_rand.html" onMouseOver="phpfuncPopup(event,'mt_rand')">mt_rand</a>(0,1) == 1) {
<a name="l367"><span class="linenum"> 367</span></a>          <a class="var it2749" onMouseOver="hilite(2749)" onMouseOut="lolite()" onClick="logVariable('punc_pool')" href="../../_variables/punc_pool.html">$punc_pool</a> = &quot;!@#$%^&amp;*?-=+&quot;;
<a name="l368"><span class="linenum"> 368</span></a>          <a class="var it2748" onMouseOver="hilite(2748)" onMouseOut="lolite()" onClick="logVariable('punc')" href="../../_variables/punc.html">$punc</a> = <a class="var it2749" onMouseOver="hilite(2749)" onMouseOut="lolite()" onClick="logVariable('punc_pool')" href="../../_variables/punc_pool.html">$punc_pool</a>[<a class="phpfunction" onClick="logFunction('mt_rand')" href="../../_functions/mt_rand.html" onMouseOver="phpfuncPopup(event,'mt_rand')">mt_rand</a>(0, 11)];
<a name="l369"><span class="linenum"> 369</span></a>          <a class="var it2745" onMouseOver="hilite(2745)" onMouseOut="lolite()" onClick="logVariable('num_length')" href="../../_variables/num_length.html">$num_length</a> --;
<a name="l370"><span class="linenum"> 370</span></a>      }
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment">    // choose the random letters (weighted towards the more familiar ones)</span>
<a name="l372"><span class="linenum"> 372</span></a>      <a class="var it2750" onMouseOver="hilite(2750)" onMouseOut="lolite()" onClick="logVariable('chars')" href="../../_variables/chars.html">$chars</a> = &quot;&quot;;
<a name="l373"><span class="linenum"> 373</span></a>      while (<a class="var it2744" onMouseOver="hilite(2744)" onMouseOut="lolite()" onClick="logVariable('char_length')" href="../../_variables/char_length.html">$char_length</a> &gt; 0) {
<a name="l374"><span class="linenum"> 374</span></a>          <a class="var it2751" onMouseOver="hilite(2751)" onMouseOut="lolite()" onClick="logVariable('char_pool')" href="../../_variables/char_pool.html">$char_pool</a> = &quot;abcdefghijkmnopqrstuvwxyzabcdefghijkmnop&quot;;
<a name="l375"><span class="linenum"> 375</span></a>          <a class="var it2750" onMouseOver="hilite(2750)" onMouseOut="lolite()" onClick="logVariable('chars')" href="../../_variables/chars.html">$chars</a> .= <a class="var it2751" onMouseOver="hilite(2751)" onMouseOut="lolite()" onClick="logVariable('char_pool')" href="../../_variables/char_pool.html">$char_pool</a>[<a class="phpfunction" onClick="logFunction('mt_rand')" href="../../_functions/mt_rand.html" onMouseOver="phpfuncPopup(event,'mt_rand')">mt_rand</a>(0, 39)];
<a name="l376"><span class="linenum"> 376</span></a>          <a class="var it2744" onMouseOver="hilite(2744)" onMouseOut="lolite()" onClick="logVariable('char_length')" href="../../_variables/char_length.html">$char_length</a> --;
<a name="l377"><span class="linenum"> 377</span></a>      }
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">    // and choose the random numbers</span>
<a name="l379"><span class="linenum"> 379</span></a>      <a class="var it2752" onMouseOver="hilite(2752)" onMouseOut="lolite()" onClick="logVariable('nums')" href="../../_variables/nums.html">$nums</a> = &quot;&quot;;
<a name="l380"><span class="linenum"> 380</span></a>      while (<a class="var it2745" onMouseOver="hilite(2745)" onMouseOut="lolite()" onClick="logVariable('num_length')" href="../../_variables/num_length.html">$num_length</a> &gt; 0) {
<a name="l381"><span class="linenum"> 381</span></a>          <a class="var it2752" onMouseOver="hilite(2752)" onMouseOut="lolite()" onClick="logVariable('nums')" href="../../_variables/nums.html">$nums</a> .= &quot;&quot;.<a class="phpfunction" onClick="logFunction('mt_rand')" href="../../_functions/mt_rand.html" onMouseOver="phpfuncPopup(event,'mt_rand')">mt_rand</a>(0, 9);
<a name="l382"><span class="linenum"> 382</span></a>          <a class="var it2745" onMouseOver="hilite(2745)" onMouseOut="lolite()" onClick="logVariable('num_length')" href="../../_variables/num_length.html">$num_length</a> --;
<a name="l383"><span class="linenum"> 383</span></a>      }
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment">    // and put them all together</span>
<a name="l385"><span class="linenum"> 385</span></a>      <a class="var it2753" onMouseOver="hilite(2753)" onMouseOut="lolite()" onClick="logVariable('pw')" href="../../_variables/pw.html">$pw</a> = &quot;&quot;;
<a name="l386"><span class="linenum"> 386</span></a>      <a class="var it2753" onMouseOver="hilite(2753)" onMouseOut="lolite()" onClick="logVariable('pw')" href="../../_variables/pw.html">$pw</a> .= <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('capital')" href="../../_variables/capital.html">$capital</a>;
<a name="l387"><span class="linenum"> 387</span></a>  <span class="comment">    // with either the letters first or the numbers first</span>
<a name="l388"><span class="linenum"> 388</span></a>      if (<a class="phpfunction" onClick="logFunction('mt_rand')" href="../../_functions/mt_rand.html" onMouseOver="phpfuncPopup(event,'mt_rand')">mt_rand</a>(0,1) == 1) { <a class="var it2753" onMouseOver="hilite(2753)" onMouseOut="lolite()" onClick="logVariable('pw')" href="../../_variables/pw.html">$pw</a> .= <a class="var it2750" onMouseOver="hilite(2750)" onMouseOut="lolite()" onClick="logVariable('chars')" href="../../_variables/chars.html">$chars</a>.<a class="var it2752" onMouseOver="hilite(2752)" onMouseOut="lolite()" onClick="logVariable('nums')" href="../../_variables/nums.html">$nums</a>; } else { <a class="var it2753" onMouseOver="hilite(2753)" onMouseOut="lolite()" onClick="logVariable('pw')" href="../../_variables/pw.html">$pw</a> .= <a class="var it2752" onMouseOver="hilite(2752)" onMouseOut="lolite()" onClick="logVariable('nums')" href="../../_variables/nums.html">$nums</a>.<a class="var it2750" onMouseOver="hilite(2750)" onMouseOut="lolite()" onClick="logVariable('chars')" href="../../_variables/chars.html">$chars</a>; }
<a name="l389"><span class="linenum"> 389</span></a>      <a class="var it2753" onMouseOver="hilite(2753)" onMouseOut="lolite()" onClick="logVariable('pw')" href="../../_variables/pw.html">$pw</a> .= <a class="var it2748" onMouseOver="hilite(2748)" onMouseOut="lolite()" onClick="logVariable('punc')" href="../../_variables/punc.html">$punc</a>;
<a name="l390"><span class="linenum"> 390</span></a>      
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment">    // Example passwords produced in this way include: </span>
<a name="l392"><span class="linenum"> 392</span></a>  <span class="comment">    // 496757zi, X2451whu, 023fknfn, M8ixiue</span>
<a name="l393"><span class="linenum"> 393</span></a>      
<a name="l394"><span class="linenum"> 394</span></a>      <span class="comment">/* This method, by my estimate, should produce passwords of roughly 35 bit-strength.</span>
<a name="l395"><span class="linenum"> 395</span></a>  <span class="comment">       (possible capital letter) + (unknown order of (unknown length of chars) + </span>
<a name="l396"><span class="linenum"> 396</span></a>  <span class="comment">       (unknown length of nums) ) + (possible punctuation mark) = ?</span>
<a name="l397"><span class="linenum"> 397</span></a>  <span class="comment">       36 * (~18^6) * 23 */</span>
<a name="l398"><span class="linenum"> 398</span></a>      
<a name="l399"><span class="linenum"> 399</span></a>      
<a name="l400"><span class="linenum"> 400</span></a>  <span class="comment">    //                                     Check if this password already exists in Registrants</span>
<a name="l401"><span class="linenum"> 401</span></a>          
<a name="l402"><span class="linenum"> 402</span></a>      <a class="var it5357" onMouseOver="hilite(5357)" onMouseOut="lolite()" onClick="logVariable('query_rsPw')" href="../../_variables/query_rsPw.html">$query_rsPw</a> = sprintf(&quot;SELECT userkey, email, user_name, password 
<a name="l403"><span class="linenum"> 403</span></a>      FROM registrants WHERE password = %s&quot;, 
<a name="l404"><span class="linenum"> 404</span></a>              <a class="function" onClick="logFunction('SQLstr')" href="../../_functions/sqlstr.html" onMouseOver="funcPopup(event,'sqlstr')">SQLstr</a>(<a class="var it2753" onMouseOver="hilite(2753)" onMouseOut="lolite()" onClick="logVariable('pw')" href="../../_variables/pw.html">$pw</a>, &quot;text&quot;));
<a name="l405"><span class="linenum"> 405</span></a>      <a class="var it5358" onMouseOver="hilite(5358)" onMouseOut="lolite()" onClick="logVariable('rsPw')" href="../../_variables/rsPw.html">$rsPw</a> = <a class="phpfunction" onClick="logFunction('mysql_query')" href="../../_functions/mysql_query.html" onMouseOver="phpfuncPopup(event,'mysql_query')">mysql_query</a>(<a class="var it5357" onMouseOver="hilite(5357)" onMouseOut="lolite()" onClick="logVariable('query_rsPw')" href="../../_variables/query_rsPw.html">$query_rsPw</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('Assessment')" href="../../_variables/Assessment.html">$Assessment</a>) or die(<a class="phpfunction" onClick="logFunction('mysql_error')" href="../../_functions/mysql_error.html" onMouseOver="phpfuncPopup(event,'mysql_error')">mysql_error</a>());
<a name="l406"><span class="linenum"> 406</span></a>      <a class="var it5359" onMouseOver="hilite(5359)" onMouseOut="lolite()" onClick="logVariable('row_rsPw')" href="../../_variables/row_rsPw.html">$row_rsPw</a> = <a class="phpfunction" onClick="logFunction('mysql_fetch_assoc')" href="../../_functions/mysql_fetch_assoc.html" onMouseOver="phpfuncPopup(event,'mysql_fetch_assoc')">mysql_fetch_assoc</a>(<a class="var it5358" onMouseOver="hilite(5358)" onMouseOut="lolite()" onClick="logVariable('rsPw')" href="../../_variables/rsPw.html">$rsPw</a>);
<a name="l407"><span class="linenum"> 407</span></a>      <a class="var it5360" onMouseOver="hilite(5360)" onMouseOut="lolite()" onClick="logVariable('totalRows_rsPw')" href="../../_variables/totalRows_rsPw.html">$totalRows_rsPw</a> = <a class="phpfunction" onClick="logFunction('mysql_num_rows')" href="../../_functions/mysql_num_rows.html" onMouseOver="phpfuncPopup(event,'mysql_num_rows')">mysql_num_rows</a>(<a class="var it5358" onMouseOver="hilite(5358)" onMouseOut="lolite()" onClick="logVariable('rsPw')" href="../../_variables/rsPw.html">$rsPw</a>);
<a name="l408"><span class="linenum"> 408</span></a>      
<a name="l409"><span class="linenum"> 409</span></a>  <span class="comment">    // If this password already exists in our system, then freak out.</span>
<a name="l410"><span class="linenum"> 410</span></a>      if (<a class="var it5360" onMouseOver="hilite(5360)" onMouseOut="lolite()" onClick="logVariable('totalRows_rsPw')" href="../../_variables/totalRows_rsPw.html">$totalRows_rsPw</a> &gt; 0) {
<a name="l411"><span class="linenum"> 411</span></a>          <a class="var it2340" onMouseOver="hilite(2340)" onMouseOut="lolite()" onClick="logVariable('email_to')" href="../../_variables/email_to.html">$email_to</a> = &quot;service@lectica.org&quot;;
<a name="l412"><span class="linenum"> 412</span></a>          <a class="var it2341" onMouseOver="hilite(2341)" onMouseOut="lolite()" onClick="logVariable('email_from')" href="../../_variables/email_from.html">$email_from</a> = &quot;service@lectica.org&quot;;
<a name="l413"><span class="linenum"> 413</span></a>          <a class="var it2342" onMouseOver="hilite(2342)" onMouseOut="lolite()" onClick="logVariable('email_cc')" href="../../_variables/email_cc.html">$email_cc</a> = &quot;&quot;;
<a name="l414"><span class="linenum"> 414</span></a>          <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../_variables/subject.html">$subject</a> = &quot;ALERT - duplicate random password found in DTS.registrants table&quot;;
<a name="l415"><span class="linenum"> 415</span></a>          <a class="var it211" onMouseOver="hilite(211)" onMouseOut="lolite()" onClick="logVariable('body')" href="../../_variables/body.html">$body</a> = &quot;Warning!! The PHP random password generator on the password reset page has generated a password which already exists in the DTS registrants database. The offending string is: '&quot;.<a class="var it2753" onMouseOver="hilite(2753)" onMouseOut="lolite()" onClick="logVariable('pw')" href="../../_variables/pw.html">$pw</a>.&quot;' Please check to ensure that your PW generator algorithm is up to snuff. This is an automated email sent by dtsservice.&quot;;
<a name="l416"><span class="linenum"> 416</span></a>          <a class="function" onClick="logFunction('sendEmail')" href="../../_functions/sendemail.html" onMouseOver="funcPopup(event,'sendemail')">sendEmail</a>(<a class="var it2340" onMouseOver="hilite(2340)" onMouseOut="lolite()" onClick="logVariable('email_to')" href="../../_variables/email_to.html">$email_to</a>, <a class="var it2341" onMouseOver="hilite(2341)" onMouseOut="lolite()" onClick="logVariable('email_from')" href="../../_variables/email_from.html">$email_from</a>, <a class="var it2342" onMouseOver="hilite(2342)" onMouseOut="lolite()" onClick="logVariable('email_cc')" href="../../_variables/email_cc.html">$email_cc</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../_variables/subject.html">$subject</a>, <a class="var it211" onMouseOver="hilite(211)" onMouseOut="lolite()" onClick="logVariable('body')" href="../../_variables/body.html">$body</a>);
<a name="l417"><span class="linenum"> 417</span></a>          return false;
<a name="l418"><span class="linenum"> 418</span></a>      }
<a name="l419"><span class="linenum"> 419</span></a>      
<a name="l420"><span class="linenum"> 420</span></a>      return <a class="var it2753" onMouseOver="hilite(2753)" onMouseOut="lolite()" onClick="logVariable('pw')" href="../../_variables/pw.html">$pw</a>;
<a name="l421"><span class="linenum"> 421</span></a>  }
<a name="l422"><span class="linenum"> 422</span></a>  
<a name="l423"><span class="linenum"> 423</span></a>  
<a name="l424"><span class="linenum"> 424</span></a>  
<a name="l425"><span class="linenum"> 425</span></a>  
<a name="l426"><span class="linenum"> 426</span></a>  function <a class="function" onClick="logFunction('contactUsForHelp')" href="../../_functions/contactusforhelp.html" onMouseOver="funcPopup(event,'contactusforhelp')">contactUsForHelp</a>( <a class="var it3652" onMouseOver="hilite(3652)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = &quot;contact us&quot;, <a class="var it5361" onMouseOver="hilite(5361)" onMouseOut="lolite()" onClick="logVariable('extraInfo')" href="../../_variables/extraInfo.html">$extraInfo</a>=&quot;&quot; ) {
<a name="l427"><span class="linenum"> 427</span></a>  <span class="comment">    // gathers basic info on the page and prepares it in a help link to contactus.php. If the user clicks the link, info will be pre-filled-in on contactus.php.</span>
<a name="l428"><span class="linenum"> 428</span></a>      
<a name="l429"><span class="linenum"> 429</span></a>      <a class="var it5362" onMouseOver="hilite(5362)" onMouseOut="lolite()" onClick="logVariable('thisPage')" href="../../_variables/thisPage.html">$thisPage</a> = <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../_variables/_SERVER.html">$_SERVER</a>['PHP_SELF'];
<a name="l430"><span class="linenum"> 430</span></a>      <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('queryString')" href="../../_variables/queryString.html">$queryString</a> = <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../_variables/_SERVER.html">$_SERVER</a>['QUERY_STRING'];
<a name="l431"><span class="linenum"> 431</span></a>      <a class="var it4306" onMouseOver="hilite(4306)" onMouseOut="lolite()" onClick="logVariable('navigator_user_agent')" href="../../_variables/navigator_user_agent.html">$navigator_user_agent</a> = ( isset( <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../_variables/_SERVER.html">$_SERVER</a>['HTTP_USER_AGENT'] ) ) ? <a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>( <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../_variables/_SERVER.html">$_SERVER</a>['HTTP_USER_AGENT'] ) : '';
<a name="l432"><span class="linenum"> 432</span></a>      
<a name="l433"><span class="linenum"> 433</span></a>      <a class="var it483" onMouseOver="hilite(483)" onMouseOut="lolite()" onClick="logVariable('instrument_id')" href="../../_variables/instrument_id.html">$instrument_id</a> = &quot;&quot;;
<a name="l434"><span class="linenum"> 434</span></a>      if (isset(<a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('_SESSION')" href="../../_variables/_SESSION.html">$_SESSION</a>['instrument_id'])) {
<a name="l435"><span class="linenum"> 435</span></a>          <a class="var it483" onMouseOver="hilite(483)" onMouseOut="lolite()" onClick="logVariable('instrument_id')" href="../../_variables/instrument_id.html">$instrument_id</a> = <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('_SESSION')" href="../../_variables/_SESSION.html">$_SESSION</a>['instrument_id'].&quot; &quot;;
<a name="l436"><span class="linenum"> 436</span></a>      }
<a name="l437"><span class="linenum"> 437</span></a>      
<a name="l438"><span class="linenum"> 438</span></a>      ?&gt;&lt;a href=&quot;/contactus.php?type=problem&amp;page=&lt;?php echo <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../_variables/_SERVER.html">$_SERVER</a>['PHP_SELF']; ?&gt;&amp;query=&lt;?php echo <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;&amp;&quot;, &quot;^&quot;, <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../_variables/_SERVER.html">$_SERVER</a>['QUERY_STRING']); ?&gt;&amp;browser=&lt;?php echo <a class="var it4306" onMouseOver="hilite(4306)" onMouseOut="lolite()" onClick="logVariable('navigator_user_agent')" href="../../_variables/navigator_user_agent.html">$navigator_user_agent</a>; ?&gt;&lt;?php echo (<a class="var it5361" onMouseOver="hilite(5361)" onMouseOut="lolite()" onClick="logVariable('extraInfo')" href="../../_variables/extraInfo.html">$extraInfo</a> &lt;&gt; &quot;&quot; ? &quot;&amp;other=&quot;.<a class="var it5361" onMouseOver="hilite(5361)" onMouseOut="lolite()" onClick="logVariable('extraInfo')" href="../../_variables/extraInfo.html">$extraInfo</a> : &quot;&quot; );?&gt;&quot; target=&quot;_blank&quot;&gt;&lt;?php echo <a class="var it3652" onMouseOver="hilite(3652)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>; ?&gt;&lt;/a&gt;&lt;?php 
<a name="l439"><span class="linenum"> 439</span></a>      
<a name="l440"><span class="linenum"> 440</span></a>  }
<a name="l441"><span class="linenum"> 441</span></a>  
<a name="l442"><span class="linenum"> 442</span></a>  
<a name="l443"><span class="linenum"> 443</span></a>  
<a name="l444"><span class="linenum"> 444</span></a>  
<a name="l445"><span class="linenum"> 445</span></a>  function <a class="function" onClick="logFunction('downloadData')" href="../../_functions/downloaddata.html" onMouseOver="funcPopup(event,'downloaddata')">downloadData</a>( <a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('rsDownload')" href="../../_variables/rsDownload.html">$rsDownload</a>, <a class="var it349" onMouseOver="hilite(349)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>=&quot;&quot; ) {
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">    // Downloads the recordset as CSV spreadsheet.</span>
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment">    // $row_rsDownload should NOT have been declared before now, or you will miss a row.</span>
<a name="l448"><span class="linenum"> 448</span></a>      
<a name="l449"><span class="linenum"> 449</span></a>      if (<a class="var it349" onMouseOver="hilite(349)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> == &quot;&quot;) { <a class="var it349" onMouseOver="hilite(349)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> = <a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y-m-d').&quot;_download&quot;; }
<a name="l450"><span class="linenum"> 450</span></a>      <a class="var it4450" onMouseOver="hilite(4450)" onMouseOut="lolite()" onClick="logVariable('delim')" href="../../_variables/delim.html">$delim</a>=&quot;,&quot;; <a class="var it4451" onMouseOver="hilite(4451)" onMouseOut="lolite()" onClick="logVariable('delim_replace')" href="../../_variables/delim_replace.html">$delim_replace</a>=&quot;;&quot;; <a class="var it391" onMouseOver="hilite(391)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> = &quot;&quot;;
<a name="l451"><span class="linenum"> 451</span></a>      
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment">    // output header info</span>
<a name="l453"><span class="linenum"> 453</span></a>      <a class="var it5364" onMouseOver="hilite(5364)" onMouseOut="lolite()" onClick="logVariable('totalColumns_rsDownload')" href="../../_variables/totalColumns_rsDownload.html">$totalColumns_rsDownload</a> = <a class="phpfunction" onClick="logFunction('mysql_num_fields')" href="../../_functions/mysql_num_fields.html" onMouseOver="phpfuncPopup(event,'mysql_num_fields')">mysql_num_fields</a>(<a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('rsDownload')" href="../../_variables/rsDownload.html">$rsDownload</a>);
<a name="l454"><span class="linenum"> 454</span></a>      for ( <a class="var it350" onMouseOver="hilite(350)" onMouseOut="lolite()" onClick="logVariable('x')" href="../../_variables/x.html">$x</a> = 0; <a class="var it350" onMouseOver="hilite(350)" onMouseOut="lolite()" onClick="logVariable('x')" href="../../_variables/x.html">$x</a> &lt; <a class="var it5364" onMouseOver="hilite(5364)" onMouseOut="lolite()" onClick="logVariable('totalColumns_rsDownload')" href="../../_variables/totalColumns_rsDownload.html">$totalColumns_rsDownload</a>; <a class="var it350" onMouseOver="hilite(350)" onMouseOut="lolite()" onClick="logVariable('x')" href="../../_variables/x.html">$x</a>++ ) {
<a name="l455"><span class="linenum"> 455</span></a>          if (<a class="var it350" onMouseOver="hilite(350)" onMouseOut="lolite()" onClick="logVariable('x')" href="../../_variables/x.html">$x</a> == <a class="var it5364" onMouseOver="hilite(5364)" onMouseOut="lolite()" onClick="logVariable('totalColumns_rsDownload')" href="../../_variables/totalColumns_rsDownload.html">$totalColumns_rsDownload</a> - 1) { <a class="var it4456" onMouseOver="hilite(4456)" onMouseOut="lolite()" onClick="logVariable('comma')" href="../../_variables/comma.html">$comma</a> = &quot;&quot;; } else { <a class="var it4456" onMouseOver="hilite(4456)" onMouseOut="lolite()" onClick="logVariable('comma')" href="../../_variables/comma.html">$comma</a> = <a class="var it4450" onMouseOver="hilite(4450)" onMouseOut="lolite()" onClick="logVariable('delim')" href="../../_variables/delim.html">$delim</a>; }
<a name="l456"><span class="linenum"> 456</span></a>          <a class="var it391" onMouseOver="hilite(391)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;_&quot;, &quot; &quot;, <a class="phpfunction" onClick="logFunction('mysql_field_name')" href="../../_functions/mysql_field_name.html" onMouseOver="phpfuncPopup(event,'mysql_field_name')">mysql_field_name</a>(<a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('rsDownload')" href="../../_variables/rsDownload.html">$rsDownload</a>, <a class="var it350" onMouseOver="hilite(350)" onMouseOut="lolite()" onClick="logVariable('x')" href="../../_variables/x.html">$x</a>)).<a class="var it4456" onMouseOver="hilite(4456)" onMouseOut="lolite()" onClick="logVariable('comma')" href="../../_variables/comma.html">$comma</a>;
<a name="l457"><span class="linenum"> 457</span></a>      }
<a name="l458"><span class="linenum"> 458</span></a>      <a class="var it391" onMouseOver="hilite(391)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= &quot;\r\n&quot;;
<a name="l459"><span class="linenum"> 459</span></a>      
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment">    // output each row results</span>
<a name="l461"><span class="linenum"> 461</span></a>      while (<a class="var it5363" onMouseOver="hilite(5363)" onMouseOut="lolite()" onClick="logVariable('row_rsDownload')" href="../../_variables/row_rsDownload.html">$row_rsDownload</a> = <a class="phpfunction" onClick="logFunction('mysql_fetch_assoc')" href="../../_functions/mysql_fetch_assoc.html" onMouseOver="phpfuncPopup(event,'mysql_fetch_assoc')">mysql_fetch_assoc</a>(<a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('rsDownload')" href="../../_variables/rsDownload.html">$rsDownload</a>)) {  
<a name="l462"><span class="linenum"> 462</span></a>          <a class="var it4457" onMouseOver="hilite(4457)" onMouseOut="lolite()" onClick="logVariable('fixcomma')" href="../../_variables/fixcomma.html">$fixcomma</a> = array();
<a name="l463"><span class="linenum"> 463</span></a>          foreach (<a class="var it5363" onMouseOver="hilite(5363)" onMouseOut="lolite()" onClick="logVariable('row_rsDownload')" href="../../_variables/row_rsDownload.html">$row_rsDownload</a> as <a class="var it1654" onMouseOver="hilite(1654)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>) {    
<a name="l464"><span class="linenum"> 464</span></a>              <a class="phpfunction" onClick="logFunction('array_push')" href="../../_functions/array_push.html" onMouseOver="phpfuncPopup(event,'array_push')">array_push</a>(<a class="var it4457" onMouseOver="hilite(4457)" onMouseOut="lolite()" onClick="logVariable('fixcomma')" href="../../_variables/fixcomma.html">$fixcomma</a>, <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="var it4450" onMouseOver="hilite(4450)" onMouseOut="lolite()" onClick="logVariable('delim')" href="../../_variables/delim.html">$delim</a>, <a class="var it4451" onMouseOver="hilite(4451)" onMouseOut="lolite()" onClick="logVariable('delim_replace')" href="../../_variables/delim_replace.html">$delim_replace</a>, <a class="var it1654" onMouseOver="hilite(1654)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>)); 
<a name="l465"><span class="linenum"> 465</span></a>          }
<a name="l466"><span class="linenum"> 466</span></a>          <a class="var it221" onMouseOver="hilite(221)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a> = join(<a class="var it4450" onMouseOver="hilite(4450)" onMouseOut="lolite()" onClick="logVariable('delim')" href="../../_variables/delim.html">$delim</a>, <a class="var it4457" onMouseOver="hilite(4457)" onMouseOut="lolite()" onClick="logVariable('fixcomma')" href="../../_variables/fixcomma.html">$fixcomma</a>);
<a name="l467"><span class="linenum"> 467</span></a>          <a class="var it221" onMouseOver="hilite(221)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(array(&quot;\r\n&quot;, &quot;\r&quot;, &quot;\n&quot;), &quot; &quot;,<a class="var it221" onMouseOver="hilite(221)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a>);
<a name="l468"><span class="linenum"> 468</span></a>          <a class="var it221" onMouseOver="hilite(221)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a> = &quot;<a class="var it221" onMouseOver="hilite(221)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a>\n&quot;;
<a name="l469"><span class="linenum"> 469</span></a>          <a class="var it391" onMouseOver="hilite(391)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= <a class="var it221" onMouseOver="hilite(221)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a>;
<a name="l470"><span class="linenum"> 470</span></a>      }
<a name="l471"><span class="linenum"> 471</span></a>      
<a name="l472"><span class="linenum"> 472</span></a>      <a class="var it4458" onMouseOver="hilite(4458)" onMouseOut="lolite()" onClick="logVariable('export_encoding')" href="../../_variables/export_encoding.html">$export_encoding</a>=&quot;utf-8&quot;;
<a name="l473"><span class="linenum"> 473</span></a>      <a class="var it4458" onMouseOver="hilite(4458)" onMouseOut="lolite()" onClick="logVariable('export_encoding')" href="../../_variables/export_encoding.html">$export_encoding</a>=(<a class="var it4458" onMouseOver="hilite(4458)" onMouseOut="lolite()" onClick="logVariable('export_encoding')" href="../../_variables/export_encoding.html">$export_encoding</a>==&quot;&quot;)?&quot;&quot;:(&quot;; charset=&quot;.<a class="var it4458" onMouseOver="hilite(4458)" onMouseOut="lolite()" onClick="logVariable('export_encoding')" href="../../_variables/export_encoding.html">$export_encoding</a>);
<a name="l474"><span class="linenum"> 474</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Content-Type: application/xls&quot;.<a class="var it4458" onMouseOver="hilite(4458)" onMouseOut="lolite()" onClick="logVariable('export_encoding')" href="../../_variables/export_encoding.html">$export_encoding</a>);
<a name="l475"><span class="linenum"> 475</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Pragma: public&quot;);
<a name="l476"><span class="linenum"> 476</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Content-Disposition: attachment; filename=&quot;.<a class="var it349" onMouseOver="hilite(349)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>.&quot;.csv&quot;);
<a name="l477"><span class="linenum"> 477</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Content-Type: application/force-download&quot;);
<a name="l478"><span class="linenum"> 478</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Cache-Control: post-check=0, pre-check=0&quot;, false);
<a name="l479"><span class="linenum"> 479</span></a>      
<a name="l480"><span class="linenum"> 480</span></a>      echo <a class="var it391" onMouseOver="hilite(391)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>;
<a name="l481"><span class="linenum"> 481</span></a>      die();
<a name="l482"><span class="linenum"> 482</span></a>  }
<a name="l483"><span class="linenum"> 483</span></a>  
<a name="l484"><span class="linenum"> 484</span></a>  
<a name="l485"><span class="linenum"> 485</span></a>  
<a name="l486"><span class="linenum"> 486</span></a>  
<a name="l487"><span class="linenum"> 487</span></a>  
<a name="l488"><span class="linenum"> 488</span></a>  function <a class="function" onClick="logFunction('initializeSortSearch')" href="../../_functions/initializesortsearch.html" onMouseOver="funcPopup(event,'initializesortsearch')">initializeSortSearch</a>(<a class="var it5365" onMouseOver="hilite(5365)" onMouseOut="lolite()" onClick="logVariable('urlVars')" href="../../_variables/urlVars.html">$urlVars</a> = &quot;&quot;) {
<a name="l489"><span class="linenum"> 489</span></a>      
<a name="l490"><span class="linenum"> 490</span></a>      global <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('_SESSION')" href="../../_variables/_SESSION.html">$_SESSION</a>; <span class="comment">// Need to know what the previous sort variable was, if one was present.</span>
<a name="l491"><span class="linenum"> 491</span></a>      global <a class="var it87" onMouseOver="hilite(87)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../_variables/_POST.html">$_POST</a>;    <span class="comment">// This function searches through the posted variables.</span>
<a name="l492"><span class="linenum"> 492</span></a>      global <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('_GET')" href="../../_variables/_GET.html">$_GET</a>;    <span class="comment">// also checks for a &quot;sort&quot; $_GET variable.</span>
<a name="l493"><span class="linenum"> 493</span></a>      
<a name="l494"><span class="linenum"> 494</span></a>  <span class="comment">    // Set SESSION[search]</span>
<a name="l495"><span class="linenum"> 495</span></a>      
<a name="l496"><span class="linenum"> 496</span></a>      <a class="var it5366" onMouseOver="hilite(5366)" onMouseOut="lolite()" onClick="logVariable('shouldRefresh')" href="../../_variables/shouldRefresh.html">$shouldRefresh</a> = FALSE;    <span class="comment">// to avoid redirect loops</span>
<a name="l497"><span class="linenum"> 497</span></a>      <a class="var it5367" onMouseOver="hilite(5367)" onMouseOut="lolite()" onClick="logVariable('searchContentExists')" href="../../_variables/searchContentExists.html">$searchContentExists</a> = FALSE; 
<a name="l498"><span class="linenum"> 498</span></a>      <a class="var it5368" onMouseOver="hilite(5368)" onMouseOut="lolite()" onClick="logVariable('searchClause')" href="../../_variables/searchClause.html">$searchClause</a> = &quot;&quot;;
<a name="l499"><span class="linenum"> 499</span></a>      
<a name="l500"><span class="linenum"> 500</span></a>      
<a name="l501"><span class="linenum"> 501</span></a>      
<a name="l502"><span class="linenum"> 502</span></a>      if (isset(<a class="var it87" onMouseOver="hilite(87)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../_variables/_POST.html">$_POST</a>)) {
<a name="l503"><span class="linenum"> 503</span></a>          <a class="var it5366" onMouseOver="hilite(5366)" onMouseOut="lolite()" onClick="logVariable('shouldRefresh')" href="../../_variables/shouldRefresh.html">$shouldRefresh</a> = true;
<a name="l504"><span class="linenum"> 504</span></a>          <a class="var it324" onMouseOver="hilite(324)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 0;
<a name="l505"><span class="linenum"> 505</span></a>          <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it87" onMouseOver="hilite(87)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../_variables/_POST.html">$_POST</a>); <span class="comment">// in case another function has already traversed it!</span>
<a name="l506"><span class="linenum"> 506</span></a>  <span class="comment">        // Go through $_POST array item by array item using next() and current() and key(). </span>
<a name="l507"><span class="linenum"> 507</span></a>          while (<a class="var it324" onMouseOver="hilite(324)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it87" onMouseOver="hilite(87)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../_variables/_POST.html">$_POST</a>)) {
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment">            // If this $_POST array item is labelled as a search column, inspect it.</span>
<a name="l509"><span class="linenum"> 509</span></a>  <span class="comment">            // Also detect &quot;HAVING&quot; columns, but leave the label on them for now.</span>
<a name="l510"><span class="linenum"> 510</span></a>              if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(&quot; &quot;.<a class="phpfunction" onClick="logFunction('key')" href="../../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a>(<a class="var it87" onMouseOver="hilite(87)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../_variables/_POST.html">$_POST</a>), &quot;(s)&quot;) OR <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(&quot; &quot;.<a class="phpfunction" onClick="logFunction('key')" href="../../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a>(<a class="var it87" onMouseOver="hilite(87)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../_variables/_POST.html">$_POST</a>), &quot;(h)&quot;)) {
<a name="l511"><span class="linenum"> 511</span></a>  <span class="comment">                //topher(&quot;Found search column: &quot;.key($_POST));</span>
<a name="l512"><span class="linenum"> 512</span></a>  <span class="comment">                //topher(&quot;The value is: &quot;.current($_POST));</span>
<a name="l513"><span class="linenum"> 513</span></a>                  <a class="var it5367" onMouseOver="hilite(5367)" onMouseOut="lolite()" onClick="logVariable('searchContentExists')" href="../../_variables/searchContentExists.html">$searchContentExists</a> = TRUE;    <span class="comment">// Saveworthy POST material was found! Remember this.</span>
<a name="l514"><span class="linenum"> 514</span></a>                  if (<a class="phpfunction" onClick="logFunction('current')" href="../../_functions/current.html" onMouseOver="phpfuncPopup(event,'current')">current</a>(<a class="var it87" onMouseOver="hilite(87)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../_variables/_POST.html">$_POST</a>) &lt;&gt; &quot;&quot;) {    // if there's a value in that item, add it to search clause.
<a name="l515"><span class="linenum"> 515</span></a>  <span class="comment">                    // get the name of this table column. DO NOT remove the prefix. </span>
<a name="l516"><span class="linenum"> 516</span></a>                      <a class="var it5369" onMouseOver="hilite(5369)" onMouseOut="lolite()" onClick="logVariable('searchCol')" href="../../_variables/searchCol.html">$searchCol</a> = <a class="phpfunction" onClick="logFunction('key')" href="../../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a>(<a class="var it87" onMouseOver="hilite(87)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../_variables/_POST.html">$_POST</a>); <span class="comment">// $searchCol = str_replace(&quot;(s)&quot;, &quot;&quot;, key($_POST));</span>
<a name="l517"><span class="linenum"> 517</span></a>  <span class="comment">                    // If this column was given a table label with the ':' separator, convert it to a '.'</span>
<a name="l518"><span class="linenum"> 518</span></a>                      <a class="var it5369" onMouseOver="hilite(5369)" onMouseOut="lolite()" onClick="logVariable('searchCol')" href="../../_variables/searchCol.html">$searchCol</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;:&quot;, &quot;.&quot;, <a class="var it5369" onMouseOver="hilite(5369)" onMouseOut="lolite()" onClick="logVariable('searchCol')" href="../../_variables/searchCol.html">$searchCol</a>);
<a name="l519"><span class="linenum"> 519</span></a>  <span class="comment">                    // Add this search item to the search clause. Sanitized with SQLstr.</span>
<a name="l520"><span class="linenum"> 520</span></a>                      <a class="var it5368" onMouseOver="hilite(5368)" onMouseOut="lolite()" onClick="logVariable('searchClause')" href="../../_variables/searchClause.html">$searchClause</a> .= &quot;&quot;.<a class="var it5369" onMouseOver="hilite(5369)" onMouseOut="lolite()" onClick="logVariable('searchCol')" href="../../_variables/searchCol.html">$searchCol</a>.&quot;:&quot;.<a class="phpfunction" onClick="logFunction('mysql_real_escape_string')" href="../../_functions/mysql_real_escape_string.html" onMouseOver="phpfuncPopup(event,'mysql_real_escape_string')">mysql_real_escape_string</a>(<a class="phpfunction" onClick="logFunction('current')" href="../../_functions/current.html" onMouseOver="phpfuncPopup(event,'current')">current</a>(<a class="var it87" onMouseOver="hilite(87)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../_variables/_POST.html">$_POST</a>)).&quot;,&quot;;
<a name="l521"><span class="linenum"> 521</span></a>                  }
<a name="l522"><span class="linenum"> 522</span></a>              }
<a name="l523"><span class="linenum"> 523</span></a>              <a class="phpfunction" onClick="logFunction('next')" href="../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>(<a class="var it87" onMouseOver="hilite(87)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../_variables/_POST.html">$_POST</a>); <a class="var it324" onMouseOver="hilite(324)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> ++;
<a name="l524"><span class="linenum"> 524</span></a>          }
<a name="l525"><span class="linenum"> 525</span></a>          
<a name="l526"><span class="linenum"> 526</span></a>  <span class="comment">        // Set the $_SESSION search string to whatever was in POST, if relevant content exists.</span>
<a name="l527"><span class="linenum"> 527</span></a>  <span class="comment">        // Doesn't matter what SESSION[search] previously was.</span>
<a name="l528"><span class="linenum"> 528</span></a>          if (<a class="var it5367" onMouseOver="hilite(5367)" onMouseOut="lolite()" onClick="logVariable('searchContentExists')" href="../../_variables/searchContentExists.html">$searchContentExists</a>) {
<a name="l529"><span class="linenum"> 529</span></a>  <span class="comment">            // SESSION search will be set to something like: &quot;userkey:1050 firstname:joe &quot;</span>
<a name="l530"><span class="linenum"> 530</span></a>              <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('_SESSION')" href="../../_variables/_SESSION.html">$_SESSION</a>['search'] = <a class="var it5368" onMouseOver="hilite(5368)" onMouseOut="lolite()" onClick="logVariable('searchClause')" href="../../_variables/searchClause.html">$searchClause</a>;
<a name="l531"><span class="linenum"> 531</span></a>          }
<a name="l532"><span class="linenum"> 532</span></a>      }
<a name="l533"><span class="linenum"> 533</span></a>      
<a name="l534"><span class="linenum"> 534</span></a>  <span class="comment">    //topher(&quot;Search clause = &quot;.$searchClause);</span>
<a name="l535"><span class="linenum"> 535</span></a>  <span class="comment">    //topher();</span>
<a name="l536"><span class="linenum"> 536</span></a>      
<a name="l537"><span class="linenum"> 537</span></a>  <span class="comment">    // Check for GET requests for a search type...</span>
<a name="l538"><span class="linenum"> 538</span></a>      if (isset(<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('_GET')" href="../../_variables/_GET.html">$_GET</a>['search'])) {
<a name="l539"><span class="linenum"> 539</span></a>  <span class="comment">        // The page can request to clear the search filter with a URL variable.</span>
<a name="l540"><span class="linenum"> 540</span></a>          if (<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('_GET')" href="../../_variables/_GET.html">$_GET</a>['search'] == &quot;clear&quot;) { <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('_SESSION')" href="../../_variables/_SESSION.html">$_SESSION</a>['search'] = &quot;&quot;; }
<a name="l541"><span class="linenum"> 541</span></a>          else { <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('_SESSION')" href="../../_variables/_SESSION.html">$_SESSION</a>['search'] = <a class="phpfunction" onClick="logFunction('mysql_real_escape_string')" href="../../_functions/mysql_real_escape_string.html" onMouseOver="phpfuncPopup(event,'mysql_real_escape_string')">mysql_real_escape_string</a>(<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('_GET')" href="../../_variables/_GET.html">$_GET</a>['search']); }
<a name="l542"><span class="linenum"> 542</span></a>  <span class="comment">        // Then refresh the page to get rid of the Search URL variable. (also clears other URL vars.)</span>
<a name="l543"><span class="linenum"> 543</span></a>          <a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Location: &quot;.<a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../_variables/_SERVER.html">$_SERVER</a>['PHP_SELF']); exit();
<a name="l544"><span class="linenum"> 544</span></a>      }
<a name="l545"><span class="linenum"> 545</span></a>      
<a name="l546"><span class="linenum"> 546</span></a>  <span class="comment">    // Set SESSION[sort] based on URL input</span>
<a name="l547"><span class="linenum"> 547</span></a>      
<a name="l548"><span class="linenum"> 548</span></a>      if (isset(<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('_GET')" href="../../_variables/_GET.html">$_GET</a>['sort'])) {
<a name="l549"><span class="linenum"> 549</span></a>          if (<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('_GET')" href="../../_variables/_GET.html">$_GET</a>['sort'] == 'clear') { 
<a name="l550"><span class="linenum"> 550</span></a>              <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('_SESSION')" href="../../_variables/_SESSION.html">$_SESSION</a>['sort'] = &quot;&quot;; 
<a name="l551"><span class="linenum"> 551</span></a>  <span class="comment">            // Then refresh the page to get rid of the Search URL variable. (also clears other URL vars.)</span>
<a name="l552"><span class="linenum"> 552</span></a>              <a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Location: &quot;.<a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../_variables/_SERVER.html">$_SERVER</a>['PHP_SELF']); exit(); 
<a name="l553"><span class="linenum"> 553</span></a>          }
<a name="l554"><span class="linenum"> 554</span></a>  
<a name="l555"><span class="linenum"> 555</span></a>  <span class="comment">        // Is there an existing SESSION[sort] set?</span>
<a name="l556"><span class="linenum"> 556</span></a>          <a class="var it5370" onMouseOver="hilite(5370)" onMouseOut="lolite()" onClick="logVariable('prevSort')" href="../../_variables/prevSort.html">$prevSort</a> = &quot;&quot;;
<a name="l557"><span class="linenum"> 557</span></a>          if (isset(<a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('_SESSION')" href="../../_variables/_SESSION.html">$_SESSION</a>['sort'])) { <a class="var it5370" onMouseOver="hilite(5370)" onMouseOut="lolite()" onClick="logVariable('prevSort')" href="../../_variables/prevSort.html">$prevSort</a> = <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('_SESSION')" href="../../_variables/_SESSION.html">$_SESSION</a>['sort']; }
<a name="l558"><span class="linenum"> 558</span></a>          
<a name="l559"><span class="linenum"> 559</span></a>  <span class="comment">        // Add the sort column name to the sort clause. Note the SQLstr sanitization.</span>
<a name="l560"><span class="linenum"> 560</span></a>          <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('sortClause')" href="../../_variables/sortClause.html">$sortClause</a> = <a class="phpfunction" onClick="logFunction('mysql_real_escape_string')" href="../../_functions/mysql_real_escape_string.html" onMouseOver="phpfuncPopup(event,'mysql_real_escape_string')">mysql_real_escape_string</a>(<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('_GET')" href="../../_variables/_GET.html">$_GET</a>['sort']);
<a name="l561"><span class="linenum"> 561</span></a>          <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('sortClause')" href="../../_variables/sortClause.html">$sortClause</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;:&quot;, &quot;.&quot;, <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('sortClause')" href="../../_variables/sortClause.html">$sortClause</a>);    <span class="comment">// enable using ':' to specify table prefixes</span>
<a name="l562"><span class="linenum"> 562</span></a>          
<a name="l563"><span class="linenum"> 563</span></a>  <span class="comment">        // Ascending or descending?</span>
<a name="l564"><span class="linenum"> 564</span></a>  <span class="comment">        // If SESSION[sort] already sorts by the same column, then toggle the sort direction.</span>
<a name="l565"><span class="linenum"> 565</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(&quot; &quot;.<a class="var it5370" onMouseOver="hilite(5370)" onMouseOut="lolite()" onClick="logVariable('prevSort')" href="../../_variables/prevSort.html">$prevSort</a>, <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('sortClause')" href="../../_variables/sortClause.html">$sortClause</a>)) {
<a name="l566"><span class="linenum"> 566</span></a>              if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it5370" onMouseOver="hilite(5370)" onMouseOut="lolite()" onClick="logVariable('prevSort')" href="../../_variables/prevSort.html">$prevSort</a>, &quot;:ASC&quot;)) { <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('sortClause')" href="../../_variables/sortClause.html">$sortClause</a> .= &quot;:DESC&quot;; }
<a name="l567"><span class="linenum"> 567</span></a>              else { <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('sortClause')" href="../../_variables/sortClause.html">$sortClause</a> .= &quot;:ASC&quot;; }
<a name="l568"><span class="linenum"> 568</span></a>          }
<a name="l569"><span class="linenum"> 569</span></a>  <span class="comment">        // Default to ascending.</span>
<a name="l570"><span class="linenum"> 570</span></a>          else { <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('sortClause')" href="../../_variables/sortClause.html">$sortClause</a> .= &quot;:ASC&quot;; }
<a name="l571"><span class="linenum"> 571</span></a>          
<a name="l572"><span class="linenum"> 572</span></a>  <span class="comment">        // Set SESSION[sort] to the new sort clause. This will look something like: &quot;finalized:ASC&quot;</span>
<a name="l573"><span class="linenum"> 573</span></a>          <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('_SESSION')" href="../../_variables/_SESSION.html">$_SESSION</a>['sort'] = <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('sortClause')" href="../../_variables/sortClause.html">$sortClause</a>;
<a name="l574"><span class="linenum"> 574</span></a>          
<a name="l575"><span class="linenum"> 575</span></a>  <span class="comment">        // After initializing, the page refreshes in order to clear crud URL variables and to prevent </span>
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment">        // the annoying warning message when you press the BACK button and the browser thinks you want to resubmit.</span>
<a name="l577"><span class="linenum"> 577</span></a>          <a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Location: &quot;.<a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../_variables/_SERVER.html">$_SERVER</a>['PHP_SELF'].&quot;?&quot;.<a class="var it5365" onMouseOver="hilite(5365)" onMouseOut="lolite()" onClick="logVariable('urlVars')" href="../../_variables/urlVars.html">$urlVars</a>); exit();
<a name="l578"><span class="linenum"> 578</span></a>      }
<a name="l579"><span class="linenum"> 579</span></a>  }
<a name="l580"><span class="linenum"> 580</span></a>  
<a name="l581"><span class="linenum"> 581</span></a>  
<a name="l582"><span class="linenum"> 582</span></a>  
<a name="l583"><span class="linenum"> 583</span></a>  function <a class="function" onClick="logFunction('querySortSearch')" href="../../_functions/querysortsearch.html" onMouseOver="funcPopup(event,'querysortsearch')">querySortSearch</a>(<a class="var it1420" onMouseOver="hilite(1420)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>, <a class="var it5372" onMouseOver="hilite(5372)" onMouseOut="lolite()" onClick="logVariable('groupBy')" href="../../_variables/groupBy.html">$groupBy</a> = &quot;&quot;, <a class="var it736" onMouseOver="hilite(736)" onMouseOut="lolite()" onClick="logVariable('defaultSort')" href="../../_variables/defaultSort.html">$defaultSort</a> = &quot;&quot;, <a class="var it5373" onMouseOver="hilite(5373)" onMouseOut="lolite()" onClick="logVariable('sortActive')" href="../../_variables/sortActive.html">$sortActive</a> = 1) {
<a name="l584"><span class="linenum"> 584</span></a>      
<a name="l585"><span class="linenum"> 585</span></a>      <span class="comment">/* FUNCTION QUERYSORTSEARCH</span>
<a name="l586"><span class="linenum"> 586</span></a>  <span class="comment">    This function returns the sort and search text that you add on to the end of your basic query. Run it before you add the LIMIT clause, like this: </span>
<a name="l587"><span class="linenum"> 587</span></a>  <span class="comment">    $query = &quot;basic_query&quot;; </span>
<a name="l588"><span class="linenum"> 588</span></a>  <span class="comment">    $query .= querySortSearch(arguments); </span>
<a name="l589"><span class="linenum"> 589</span></a>  <span class="comment">    $query_limit = $query.&quot;limit clause&quot;;</span>
<a name="l590"><span class="linenum"> 590</span></a>  <span class="comment">    This function depends on $_SESSION['sort'] and $_SESSION['search'], which are set up with initializeSortSearch(). Run the init function at the topish of the page, then run this function to add the appropriate sort/search text to each query.</span>
<a name="l591"><span class="linenum"> 591</span></a>  <span class="comment">     - the first argument is a list of column names which will be accepted as search-able. Separate them with spaces. However you can also plug the entire query in as this argument, and the entire fields clause (section before the word &quot;FROM&quot;) will be cleaned and treated as the column list.</span>
<a name="l592"><span class="linenum"> 592</span></a>  <span class="comment">     - You can specify the exact table label for validColumns, without having to specify the table labels on all the search boxes and so forth. For example if you do a search on the page for a value for &quot;userkey&quot;, but in validColumns you specify &quot;la_data.userkey&quot;, the text for the query will be set as &quot; AND la_data.userkey LIKE '%val%' &quot;.</span>
<a name="l593"><span class="linenum"> 593</span></a>  <span class="comment">     - You should specify a column to group by, even if it's just blank &quot;&quot;.</span>
<a name="l594"><span class="linenum"> 594</span></a>  <span class="comment">     - You may optionally specify how you would like the table to sort by default, either the column name or the column name and sort order. Examples: &quot;group&quot; or &quot;finalized DESC&quot; etc.</span>
<a name="l595"><span class="linenum"> 595</span></a>  <span class="comment">     - sortActive has 3 possible states: 0 = the query will add search filters but not sort. 1 = the query will both search and sort. 2 = the query will sort, but not add search filters.</span>
<a name="l596"><span class="linenum"> 596</span></a>  <span class="comment">      */</span>
<a name="l597"><span class="linenum"> 597</span></a>       
<a name="l598"><span class="linenum"> 598</span></a>      global <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('_SESSION')" href="../../_variables/_SESSION.html">$_SESSION</a>; <span class="comment">// get the sort and search values from $_SESSION. initializeSortSearch() should have been called before any querySortSearch call, and it should have set $_SESSION['sort'] and $_SESSION['search'] even if just to &quot;&quot; empty.</span>
<a name="l599"><span class="linenum"> 599</span></a>      
<a name="l600"><span class="linenum"> 600</span></a>  <span class="comment">    // the $groupBy is a recent addition. To avoid bugs, if it looks like the function was only called with two arguments (the query and the default sort), the query should adapt accordingly.</span>
<a name="l601"><span class="linenum"> 601</span></a>      if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it5372" onMouseOver="hilite(5372)" onMouseOut="lolite()" onClick="logVariable('groupBy')" href="../../_variables/groupBy.html">$groupBy</a>, &quot;ASC&quot;) OR <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it5372" onMouseOver="hilite(5372)" onMouseOut="lolite()" onClick="logVariable('groupBy')" href="../../_variables/groupBy.html">$groupBy</a>, &quot;DESC&quot;)) { 
<a name="l602"><span class="linenum"> 602</span></a>          <a class="var it736" onMouseOver="hilite(736)" onMouseOut="lolite()" onClick="logVariable('defaultSort')" href="../../_variables/defaultSort.html">$defaultSort</a> = <a class="var it5372" onMouseOver="hilite(5372)" onMouseOut="lolite()" onClick="logVariable('groupBy')" href="../../_variables/groupBy.html">$groupBy</a>; <a class="var it5372" onMouseOver="hilite(5372)" onMouseOut="lolite()" onClick="logVariable('groupBy')" href="../../_variables/groupBy.html">$groupBy</a> = &quot;&quot;;
<a name="l603"><span class="linenum"> 603</span></a>      }
<a name="l604"><span class="linenum"> 604</span></a>      
<a name="l605"><span class="linenum"> 605</span></a>      <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a> = <a class="var it1420" onMouseOver="hilite(1420)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>;
<a name="l606"><span class="linenum"> 606</span></a>  <span class="comment">    // Anything after the word FROM should be omitted from $validColumns.</span>
<a name="l607"><span class="linenum"> 607</span></a>      if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>, &quot;FROM&quot;)) {
<a name="l608"><span class="linenum"> 608</span></a>          <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>, 0, <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>, &quot;FROM&quot;)).&quot; &quot;;
<a name="l609"><span class="linenum"> 609</span></a>      }
<a name="l610"><span class="linenum"> 610</span></a>  <span class="comment">    // Remove any commas from the list. Only spaces are used to separate. </span>
<a name="l611"><span class="linenum"> 611</span></a>  <span class="comment">    // Turn commas into extra spaces to avoid crashes in case a space was not added.</span>
<a name="l612"><span class="linenum"> 612</span></a>      <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;,&quot;, &quot; &quot;, <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>);
<a name="l613"><span class="linenum"> 613</span></a>      <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(array(&quot;\n&quot;, &quot;\r&quot;, &quot;`&quot;), &quot; &quot;, <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>);
<a name="l614"><span class="linenum"> 614</span></a>      while (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(&quot;.&quot;.<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>, &quot;  &quot;)) { <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;  &quot;, &quot; &quot;, <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>); }
<a name="l615"><span class="linenum"> 615</span></a>      
<a name="l616"><span class="linenum"> 616</span></a>      <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot; &quot;, <a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>);
<a name="l617"><span class="linenum"> 617</span></a>      <a class="var it5368" onMouseOver="hilite(5368)" onMouseOut="lolite()" onClick="logVariable('searchClause')" href="../../_variables/searchClause.html">$searchClause</a> = &quot;&quot;;
<a name="l618"><span class="linenum"> 618</span></a>      <a class="var it5376" onMouseOver="hilite(5376)" onMouseOut="lolite()" onClick="logVariable('havingClause')" href="../../_variables/havingClause.html">$havingClause</a> = &quot;&quot;;    <span class="comment">// HAVING clause is filled in with any search terms tagged (h) instead of (s).</span>
<a name="l619"><span class="linenum"> 619</span></a>      <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('sortClause')" href="../../_variables/sortClause.html">$sortClause</a> = &quot;&quot;;
<a name="l620"><span class="linenum"> 620</span></a>      
<a name="l621"><span class="linenum"> 621</span></a>  <span class="comment">    // If a SESSION search clause exists, then parse it.</span>
<a name="l622"><span class="linenum"> 622</span></a>      if (isset(<a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('_SESSION')" href="../../_variables/_SESSION.html">$_SESSION</a>['search']) AND <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('_SESSION')" href="../../_variables/_SESSION.html">$_SESSION</a>['search'] &lt;&gt; &quot;&quot;) {
<a name="l623"><span class="linenum"> 623</span></a>  <span class="comment">        // $_SESSION['search'] will look something like &quot;userkey:1050 firstname:joe &quot;.</span>
<a name="l624"><span class="linenum"> 624</span></a>  <span class="comment">        // Break the search string into column-value pairs</span>
<a name="l625"><span class="linenum"> 625</span></a>          
<a name="l626"><span class="linenum"> 626</span></a>          <a class="var it5377" onMouseOver="hilite(5377)" onMouseOut="lolite()" onClick="logVariable('sessionSearch')" href="../../_variables/sessionSearch.html">$sessionSearch</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;,&quot;, <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('_SESSION')" href="../../_variables/_SESSION.html">$_SESSION</a>['search']);
<a name="l627"><span class="linenum"> 627</span></a>          do { // loop for each sessionSearch term (separated by commas)
<a name="l628"><span class="linenum"> 628</span></a>  <span class="comment">            // Grab the column and value text for this column-value pairing</span>
<a name="l629"><span class="linenum"> 629</span></a>              <a class="var it5378" onMouseOver="hilite(5378)" onMouseOut="lolite()" onClick="logVariable('thisSearchPair')" href="../../_variables/thisSearchPair.html">$thisSearchPair</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;:&quot;, <a class="phpfunction" onClick="logFunction('current')" href="../../_functions/current.html" onMouseOver="phpfuncPopup(event,'current')">current</a>(<a class="var it5377" onMouseOver="hilite(5377)" onMouseOut="lolite()" onClick="logVariable('sessionSearch')" href="../../_variables/sessionSearch.html">$sessionSearch</a>));
<a name="l630"><span class="linenum"> 630</span></a>              <a class="var it5379" onMouseOver="hilite(5379)" onMouseOut="lolite()" onClick="logVariable('thisSearchCol')" href="../../_variables/thisSearchCol.html">$thisSearchCol</a> = <a class="var it5378" onMouseOver="hilite(5378)" onMouseOut="lolite()" onClick="logVariable('thisSearchPair')" href="../../_variables/thisSearchPair.html">$thisSearchPair</a>[0];
<a name="l631"><span class="linenum"> 631</span></a>              <a class="var it5380" onMouseOver="hilite(5380)" onMouseOut="lolite()" onClick="logVariable('thisSearchVal')" href="../../_variables/thisSearchVal.html">$thisSearchVal</a> = <a class="var it5378" onMouseOver="hilite(5378)" onMouseOut="lolite()" onClick="logVariable('thisSearchPair')" href="../../_variables/thisSearchPair.html">$thisSearchPair</a>[1];
<a name="l632"><span class="linenum"> 632</span></a>              
<a name="l633"><span class="linenum"> 633</span></a>  <span class="comment">            // $Location is used to track whether this search condition is in the WHERE or HAVING clause.</span>
<a name="l634"><span class="linenum"> 634</span></a>  <span class="comment">            // HAVING clause conditions are marked by (h) and are used to filter on complex columns and aliases.</span>
<a name="l635"><span class="linenum"> 635</span></a>              <a class="var it5381" onMouseOver="hilite(5381)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../_variables/location.html">$location</a> = &quot;&quot;;
<a name="l636"><span class="linenum"> 636</span></a>              if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(&quot; &quot;.<a class="var it5379" onMouseOver="hilite(5379)" onMouseOut="lolite()" onClick="logVariable('thisSearchCol')" href="../../_variables/thisSearchCol.html">$thisSearchCol</a>, &quot;(s)&quot;)) { <a class="var it5381" onMouseOver="hilite(5381)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../_variables/location.html">$location</a> = &quot;WHERE&quot;; }
<a name="l637"><span class="linenum"> 637</span></a>              else if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(&quot; &quot;.<a class="var it5379" onMouseOver="hilite(5379)" onMouseOut="lolite()" onClick="logVariable('thisSearchCol')" href="../../_variables/thisSearchCol.html">$thisSearchCol</a>, &quot;(h)&quot;)) { <a class="var it5381" onMouseOver="hilite(5381)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../_variables/location.html">$location</a> = &quot;HAVING&quot;; }
<a name="l638"><span class="linenum"> 638</span></a>              else { echo &quot;Error: the search term doesn't seem properly marked. 
<a name="l639"><span class="linenum"> 639</span></a>                  Please notify the web administration team. We apologize for the inconvenience. &quot;; }
<a name="l640"><span class="linenum"> 640</span></a>  <span class="comment">            // now make sure the (s) and (h) are removed from the column name before proceeding.</span>
<a name="l641"><span class="linenum"> 641</span></a>              <a class="var it5379" onMouseOver="hilite(5379)" onMouseOut="lolite()" onClick="logVariable('thisSearchCol')" href="../../_variables/thisSearchCol.html">$thisSearchCol</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(array(&quot;(s)&quot;, &quot;(h)&quot;), &quot;&quot;, <a class="var it5379" onMouseOver="hilite(5379)" onMouseOut="lolite()" onClick="logVariable('thisSearchCol')" href="../../_variables/thisSearchCol.html">$thisSearchCol</a>);
<a name="l642"><span class="linenum"> 642</span></a>              
<a name="l643"><span class="linenum"> 643</span></a>  <span class="comment">            // $Comparison tracks how the values should be compared: LIKE, exact equals, or greater / less than?</span>
<a name="l644"><span class="linenum"> 644</span></a>              <a class="var it3436" onMouseOver="hilite(3436)" onMouseOut="lolite()" onClick="logVariable('comparison')" href="../../_variables/comparison.html">$comparison</a> = &quot;LIKE&quot;;
<a name="l645"><span class="linenum"> 645</span></a>  <span class="comment">            // If this search term is the low or high end of a range, treat the comparison differently.</span>
<a name="l646"><span class="linenum"> 646</span></a>              if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it5379" onMouseOver="hilite(5379)" onMouseOut="lolite()" onClick="logVariable('thisSearchCol')" href="../../_variables/thisSearchCol.html">$thisSearchCol</a>, &quot;(low)&quot;)) {
<a name="l647"><span class="linenum"> 647</span></a>                  <a class="var it3436" onMouseOver="hilite(3436)" onMouseOut="lolite()" onClick="logVariable('comparison')" href="../../_variables/comparison.html">$comparison</a> = &quot;&gt;=&quot;;
<a name="l648"><span class="linenum"> 648</span></a>              } else if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it5379" onMouseOver="hilite(5379)" onMouseOut="lolite()" onClick="logVariable('thisSearchCol')" href="../../_variables/thisSearchCol.html">$thisSearchCol</a>, &quot;(high)&quot;)) {
<a name="l649"><span class="linenum"> 649</span></a>                  <a class="var it3436" onMouseOver="hilite(3436)" onMouseOut="lolite()" onClick="logVariable('comparison')" href="../../_variables/comparison.html">$comparison</a> = &quot;&lt;=&quot;;
<a name="l650"><span class="linenum"> 650</span></a>              } else if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it5379" onMouseOver="hilite(5379)" onMouseOut="lolite()" onClick="logVariable('thisSearchCol')" href="../../_variables/thisSearchCol.html">$thisSearchCol</a>, &quot;(e)&quot;)) {
<a name="l651"><span class="linenum"> 651</span></a>                  <a class="var it3436" onMouseOver="hilite(3436)" onMouseOut="lolite()" onClick="logVariable('comparison')" href="../../_variables/comparison.html">$comparison</a> = &quot;=&quot;;
<a name="l652"><span class="linenum"> 652</span></a>              } else if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it5379" onMouseOver="hilite(5379)" onMouseOut="lolite()" onClick="logVariable('thisSearchCol')" href="../../_variables/thisSearchCol.html">$thisSearchCol</a>, &quot;(ci)&quot;)) {
<a name="l653"><span class="linenum"> 653</span></a>                  <a class="var it3436" onMouseOver="hilite(3436)" onMouseOut="lolite()" onClick="logVariable('comparison')" href="../../_variables/comparison.html">$comparison</a> = &quot;CONTAINED_IN&quot;;
<a name="l654"><span class="linenum"> 654</span></a>              }
<a name="l655"><span class="linenum"> 655</span></a>  <span class="comment">            // get rid of the comparison tags.</span>
<a name="l656"><span class="linenum"> 656</span></a>              <a class="var it5379" onMouseOver="hilite(5379)" onMouseOut="lolite()" onClick="logVariable('thisSearchCol')" href="../../_variables/thisSearchCol.html">$thisSearchCol</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(array(&quot;(high)&quot;, &quot;(low)&quot;, &quot;(e)&quot;), &quot;&quot;, <a class="var it5379" onMouseOver="hilite(5379)" onMouseOut="lolite()" onClick="logVariable('thisSearchCol')" href="../../_variables/thisSearchCol.html">$thisSearchCol</a>);
<a name="l657"><span class="linenum"> 657</span></a>              
<a name="l658"><span class="linenum"> 658</span></a>  <span class="comment">            //        Check whether this column counts  </span>
<a name="l659"><span class="linenum"> 659</span></a>              <span class="comment">/* Skim through validColumns (list of columns acceptable for this query) and see if </span>
<a name="l660"><span class="linenum"> 660</span></a>  <span class="comment">            there is any match with this column name. If that match has some table-specific label </span>
<a name="l661"><span class="linenum"> 661</span></a>  <span class="comment">            on it (such as d. ), then make $thisSearchCol match that exact column name. */</span>
<a name="l662"><span class="linenum"> 662</span></a>              <a class="var it5382" onMouseOver="hilite(5382)" onMouseOut="lolite()" onClick="logVariable('columnIsValid')" href="../../_variables/columnIsValid.html">$columnIsValid</a> = FALSE;
<a name="l663"><span class="linenum"> 663</span></a>              do { // loop for each valid column, checking for this sessionSearch term
<a name="l664"><span class="linenum"> 664</span></a>  <span class="comment">                // IGNORE any words that have a parentheses in them, as these indicate SQL functions </span>
<a name="l665"><span class="linenum"> 665</span></a>  <span class="comment">                // and could cause an error with the sort clause.</span>
<a name="l666"><span class="linenum"> 666</span></a>                  if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(&quot; &quot;.<a class="phpfunction" onClick="logFunction('current')" href="../../_functions/current.html" onMouseOver="phpfuncPopup(event,'current')">current</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>), &quot;(&quot;) OR <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(&quot; &quot;.<a class="phpfunction" onClick="logFunction('current')" href="../../_functions/current.html" onMouseOver="phpfuncPopup(event,'current')">current</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>), &quot;)&quot;)) 
<a name="l667"><span class="linenum"> 667</span></a>                  { <a class="phpfunction" onClick="logFunction('next')" href="../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>); }
<a name="l668"><span class="linenum"> 668</span></a>  <span class="comment">                // **** &lt;-- TO TROUBLESHOOT, uncomment all of the starred lines in this section.</span>
<a name="l669"><span class="linenum"> 669</span></a>  <span class="comment">                // echo &quot; checking [&quot;.current($validColumns).&quot;] against the search col [&quot;.$thisSearchCol.&quot;]... &quot;;</span>
<a name="l670"><span class="linenum"> 670</span></a>  <span class="comment">                // IF: 1) this search column is matched exactly, </span>
<a name="l671"><span class="linenum"> 671</span></a>                  if (<a class="phpfunction" onClick="logFunction('current')" href="../../_functions/current.html" onMouseOver="phpfuncPopup(event,'current')">current</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>) == <a class="var it5379" onMouseOver="hilite(5379)" onMouseOut="lolite()" onClick="logVariable('thisSearchCol')" href="../../_variables/thisSearchCol.html">$thisSearchCol</a>) { 
<a name="l672"><span class="linenum"> 672</span></a>  <span class="comment">                    // echo &quot; -- Column found! &lt;br&gt;&lt;br&gt; &quot;;  // ****</span>
<a name="l673"><span class="linenum"> 673</span></a>                      <a class="var it5382" onMouseOver="hilite(5382)" onMouseOut="lolite()" onClick="logVariable('columnIsValid')" href="../../_variables/columnIsValid.html">$columnIsValid</a> = TRUE; 
<a name="l674"><span class="linenum"> 674</span></a>                  }
<a name="l675"><span class="linenum"> 675</span></a>  <span class="comment">                // or 2) this search column is matched AFTER the period in one of the available columns,</span>
<a name="l676"><span class="linenum"> 676</span></a>                  else if (<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="phpfunction" onClick="logFunction('current')" href="../../_functions/current.html" onMouseOver="phpfuncPopup(event,'current')">current</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>), <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(&quot; &quot;.<a class="phpfunction" onClick="logFunction('current')" href="../../_functions/current.html" onMouseOver="phpfuncPopup(event,'current')">current</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>), &quot;.&quot;) )
<a name="l677"><span class="linenum"> 677</span></a>                                                    == <a class="var it5379" onMouseOver="hilite(5379)" onMouseOut="lolite()" onClick="logVariable('thisSearchCol')" href="../../_variables/thisSearchCol.html">$thisSearchCol</a>)  {
<a name="l678"><span class="linenum"> 678</span></a>  <span class="comment">                    // echo &quot; -- Column found! &lt;br&gt;&lt;br&gt; &quot;;  // ****</span>
<a name="l679"><span class="linenum"> 679</span></a>                      <a class="var it5379" onMouseOver="hilite(5379)" onMouseOut="lolite()" onClick="logVariable('thisSearchCol')" href="../../_variables/thisSearchCol.html">$thisSearchCol</a> = <a class="phpfunction" onClick="logFunction('current')" href="../../_functions/current.html" onMouseOver="phpfuncPopup(event,'current')">current</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>);
<a name="l680"><span class="linenum"> 680</span></a>                      <a class="var it5382" onMouseOver="hilite(5382)" onMouseOut="lolite()" onClick="logVariable('columnIsValid')" href="../../_variables/columnIsValid.html">$columnIsValid</a> = TRUE; 
<a name="l681"><span class="linenum"> 681</span></a>                  }
<a name="l682"><span class="linenum"> 682</span></a>  <span class="comment">                // else { echo &quot; - no &lt;br /&gt;  &quot;; } // ****</span>
<a name="l683"><span class="linenum"> 683</span></a>              } while (<a class="phpfunction" onClick="logFunction('next')" href="../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>) !== FALSE); 
<a name="l684"><span class="linenum"> 684</span></a>              <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>);
<a name="l685"><span class="linenum"> 685</span></a>  <span class="comment">            // exit(); // **** &lt;-- TO TROUBLESHOOT, uncomment this and the line above. Outputs all parsed columns.</span>
<a name="l686"><span class="linenum"> 686</span></a>              
<a name="l687"><span class="linenum"> 687</span></a>  <span class="comment">            // if this column-value pair references a valid column for this query, add a filter for it.</span>
<a name="l688"><span class="linenum"> 688</span></a>              if (<a class="var it5382" onMouseOver="hilite(5382)" onMouseOut="lolite()" onClick="logVariable('columnIsValid')" href="../../_variables/columnIsValid.html">$columnIsValid</a>) {
<a name="l689"><span class="linenum"> 689</span></a>                  <a class="var it5383" onMouseOver="hilite(5383)" onMouseOut="lolite()" onClick="logVariable('thisCondition')" href="../../_variables/thisCondition.html">$thisCondition</a> = &quot; AND &quot;.<a class="var it5379" onMouseOver="hilite(5379)" onMouseOut="lolite()" onClick="logVariable('thisSearchCol')" href="../../_variables/thisSearchCol.html">$thisSearchCol</a>;
<a name="l690"><span class="linenum"> 690</span></a>  <span class="comment">                // finish the clause differently depending on the appropriate comparison.</span>
<a name="l691"><span class="linenum"> 691</span></a>                  if (<a class="var it5380" onMouseOver="hilite(5380)" onMouseOut="lolite()" onClick="logVariable('thisSearchVal')" href="../../_variables/thisSearchVal.html">$thisSearchVal</a> == &quot;NULL&quot;) { <a class="var it5383" onMouseOver="hilite(5383)" onMouseOut="lolite()" onClick="logVariable('thisCondition')" href="../../_variables/thisCondition.html">$thisCondition</a> .= &quot; IS NULL &quot;; } 
<a name="l692"><span class="linenum"> 692</span></a>                  else if (<a class="var it3436" onMouseOver="hilite(3436)" onMouseOut="lolite()" onClick="logVariable('comparison')" href="../../_variables/comparison.html">$comparison</a> == &quot;LIKE&quot;) { <a class="var it5383" onMouseOver="hilite(5383)" onMouseOut="lolite()" onClick="logVariable('thisCondition')" href="../../_variables/thisCondition.html">$thisCondition</a> .= &quot; LIKE '%{<a class="var it5380" onMouseOver="hilite(5380)" onMouseOut="lolite()" onClick="logVariable('thisSearchVal')" href="../../_variables/thisSearchVal.html">$thisSearchVal</a>}%' &quot;; }
<a name="l693"><span class="linenum"> 693</span></a>                  else if (<a class="var it3436" onMouseOver="hilite(3436)" onMouseOut="lolite()" onClick="logVariable('comparison')" href="../../_variables/comparison.html">$comparison</a> == &quot;CONTAINED_IN&quot;) { // IS CONTAINED IN = opposite of LIKE
<a name="l694"><span class="linenum"> 694</span></a>                      <a class="var it5383" onMouseOver="hilite(5383)" onMouseOut="lolite()" onClick="logVariable('thisCondition')" href="../../_variables/thisCondition.html">$thisCondition</a> = &quot; AND {<a class="var it5380" onMouseOver="hilite(5380)" onMouseOut="lolite()" onClick="logVariable('thisSearchVal')" href="../../_variables/thisSearchVal.html">$thisSearchVal</a>} LIKE CONCAT('%', {<a class="var it5379" onMouseOver="hilite(5379)" onMouseOut="lolite()" onClick="logVariable('thisSearchCol')" href="../../_variables/thisSearchCol.html">$thisSearchCol</a>}, '%') &quot;;
<a name="l695"><span class="linenum"> 695</span></a>                  } else { <a class="var it5383" onMouseOver="hilite(5383)" onMouseOut="lolite()" onClick="logVariable('thisCondition')" href="../../_variables/thisCondition.html">$thisCondition</a> .= &quot; {<a class="var it3436" onMouseOver="hilite(3436)" onMouseOut="lolite()" onClick="logVariable('comparison')" href="../../_variables/comparison.html">$comparison</a>} '{<a class="var it5380" onMouseOver="hilite(5380)" onMouseOut="lolite()" onClick="logVariable('thisSearchVal')" href="../../_variables/thisSearchVal.html">$thisSearchVal</a>}' &quot;; }
<a name="l696"><span class="linenum"> 696</span></a>  <span class="comment">                // echo &quot;Adding search term: &quot;.$thisCondition.&quot; &lt;br&gt;&quot;; // &lt;-- Uncomment to troubleshoot</span>
<a name="l697"><span class="linenum"> 697</span></a>  <span class="comment">                // add this condition to the WHERE or HAVING clauses, depending on $location</span>
<a name="l698"><span class="linenum"> 698</span></a>                  if (<a class="var it5381" onMouseOver="hilite(5381)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../_variables/location.html">$location</a> == &quot;WHERE&quot;) { <a class="var it5368" onMouseOver="hilite(5368)" onMouseOut="lolite()" onClick="logVariable('searchClause')" href="../../_variables/searchClause.html">$searchClause</a> .= <a class="var it5383" onMouseOver="hilite(5383)" onMouseOut="lolite()" onClick="logVariable('thisCondition')" href="../../_variables/thisCondition.html">$thisCondition</a>; } 
<a name="l699"><span class="linenum"> 699</span></a>                  else if (<a class="var it5381" onMouseOver="hilite(5381)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../_variables/location.html">$location</a> == &quot;HAVING&quot;) { <a class="var it5376" onMouseOver="hilite(5376)" onMouseOut="lolite()" onClick="logVariable('havingClause')" href="../../_variables/havingClause.html">$havingClause</a> .= <a class="var it5383" onMouseOver="hilite(5383)" onMouseOut="lolite()" onClick="logVariable('thisCondition')" href="../../_variables/thisCondition.html">$thisCondition</a>; }
<a name="l700"><span class="linenum"> 700</span></a>              } 
<a name="l701"><span class="linenum"> 701</span></a>          } while (<a class="phpfunction" onClick="logFunction('next')" href="../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>(<a class="var it5377" onMouseOver="hilite(5377)" onMouseOut="lolite()" onClick="logVariable('sessionSearch')" href="../../_variables/sessionSearch.html">$sessionSearch</a>));
<a name="l702"><span class="linenum"> 702</span></a>  <span class="comment">        // produces something like: &quot; AND userkey LIKE '%1050%' AND date_completed &gt;= '2011-01-01' &quot;</span>
<a name="l703"><span class="linenum"> 703</span></a>  <span class="comment">        // echo &quot;searchClause = &quot;.$searchClause.&quot;&lt;br /&gt;havingClause = &quot;.$havingClause.&quot;&lt;br /&gt;&quot;; // **** troubleshoot</span>
<a name="l704"><span class="linenum"> 704</span></a>      }
<a name="l705"><span class="linenum"> 705</span></a>      
<a name="l706"><span class="linenum"> 706</span></a>      
<a name="l707"><span class="linenum"> 707</span></a>  <span class="comment">    // Add sort clause to query, if that sort column is valid for this query.</span>
<a name="l708"><span class="linenum"> 708</span></a>      if (isset(<a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('_SESSION')" href="../../_variables/_SESSION.html">$_SESSION</a>['sort']) AND <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('_SESSION')" href="../../_variables/_SESSION.html">$_SESSION</a>['sort'] &lt;&gt; &quot;&quot; AND <a class="var it5373" onMouseOver="hilite(5373)" onMouseOut="lolite()" onClick="logVariable('sortActive')" href="../../_variables/sortActive.html">$sortActive</a>) {
<a name="l709"><span class="linenum"> 709</span></a>  <span class="comment">        // Get the sort column name &amp; sort direction</span>
<a name="l710"><span class="linenum"> 710</span></a>          <a class="var it5384" onMouseOver="hilite(5384)" onMouseOut="lolite()" onClick="logVariable('sortPairing')" href="../../_variables/sortPairing.html">$sortPairing</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;:&quot;, <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('_SESSION')" href="../../_variables/_SESSION.html">$_SESSION</a>['sort']);
<a name="l711"><span class="linenum"> 711</span></a>          <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sortCol')" href="../../_variables/sortCol.html">$sortCol</a> = <a class="var it5384" onMouseOver="hilite(5384)" onMouseOut="lolite()" onClick="logVariable('sortPairing')" href="../../_variables/sortPairing.html">$sortPairing</a>[0];
<a name="l712"><span class="linenum"> 712</span></a>          <a class="var it5386" onMouseOver="hilite(5386)" onMouseOut="lolite()" onClick="logVariable('sortDir')" href="../../_variables/sortDir.html">$sortDir</a> = <a class="var it5384" onMouseOver="hilite(5384)" onMouseOut="lolite()" onClick="logVariable('sortPairing')" href="../../_variables/sortPairing.html">$sortPairing</a>[1];
<a name="l713"><span class="linenum"> 713</span></a>          
<a name="l714"><span class="linenum"> 714</span></a>  <span class="comment">        // Skim through validColumns (list of columns acceptable for this query) and see if there is any match with this column name. If that match has some table-specific label on it (such as d. ), then make $thisSearchCol match that exact column name.</span>
<a name="l715"><span class="linenum"> 715</span></a>  <span class="comment">        // topher(&quot;search for the sorting column &quot;.$sortCol.&quot;: &quot;); // &lt;-- Uncomment for troubleshooting</span>
<a name="l716"><span class="linenum"> 716</span></a>          
<a name="l717"><span class="linenum"> 717</span></a>          do {
<a name="l718"><span class="linenum"> 718</span></a>  <span class="comment">            // IGNORE any words that have a parentheses in them, as these indicate SQL functions </span>
<a name="l719"><span class="linenum"> 719</span></a>  <span class="comment">            // and could cause an error with the sort clause.</span>
<a name="l720"><span class="linenum"> 720</span></a>              
<a name="l721"><span class="linenum"> 721</span></a>  <span class="comment">            // topher(&quot; | &quot;.current($validColumns).&quot; &quot;); // &lt;-- Uncomment for troubleshooting</span>
<a name="l722"><span class="linenum"> 722</span></a>              
<a name="l723"><span class="linenum"> 723</span></a>              if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(&quot; &quot;.<a class="phpfunction" onClick="logFunction('current')" href="../../_functions/current.html" onMouseOver="phpfuncPopup(event,'current')">current</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>), &quot;(&quot;) OR <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(&quot; &quot;.<a class="phpfunction" onClick="logFunction('current')" href="../../_functions/current.html" onMouseOver="phpfuncPopup(event,'current')">current</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>), &quot;)&quot;)) 
<a name="l724"><span class="linenum"> 724</span></a>              { <a class="phpfunction" onClick="logFunction('next')" href="../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>); }
<a name="l725"><span class="linenum"> 725</span></a>  <span class="comment">            // IF: 1) this sort column is matched exactly, </span>
<a name="l726"><span class="linenum"> 726</span></a>              if (<a class="phpfunction" onClick="logFunction('current')" href="../../_functions/current.html" onMouseOver="phpfuncPopup(event,'current')">current</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>) == <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sortCol')" href="../../_variables/sortCol.html">$sortCol</a>) {  
<a name="l727"><span class="linenum"> 727</span></a>  <span class="comment">                // The direction of sort was determined in initializeSortSearch().</span>
<a name="l728"><span class="linenum"> 728</span></a>                  <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('sortClause')" href="../../_variables/sortClause.html">$sortClause</a> = &quot; ORDER BY &quot;.<a class="phpfunction" onClick="logFunction('current')" href="../../_functions/current.html" onMouseOver="phpfuncPopup(event,'current')">current</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>).&quot; &quot;.<a class="var it5386" onMouseOver="hilite(5386)" onMouseOut="lolite()" onClick="logVariable('sortDir')" href="../../_variables/sortDir.html">$sortDir</a>.&quot; &quot;; 
<a name="l729"><span class="linenum"> 729</span></a>              }
<a name="l730"><span class="linenum"> 730</span></a>  <span class="comment">            // OR 2) this sort column is matched with a table prefix and '.', </span>
<a name="l731"><span class="linenum"> 731</span></a>              else if (<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="phpfunction" onClick="logFunction('current')" href="../../_functions/current.html" onMouseOver="phpfuncPopup(event,'current')">current</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>), <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(&quot; &quot;.<a class="phpfunction" onClick="logFunction('current')" href="../../_functions/current.html" onMouseOver="phpfuncPopup(event,'current')">current</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>), &quot;.&quot;) ) == <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sortCol')" href="../../_variables/sortCol.html">$sortCol</a>) {
<a name="l732"><span class="linenum"> 732</span></a>  <span class="comment">                // write the WHOLE column phrase into sortCol. (NOT just the matching part, include the table prefix!)</span>
<a name="l733"><span class="linenum"> 733</span></a>                  <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sortCol')" href="../../_variables/sortCol.html">$sortCol</a> = <a class="phpfunction" onClick="logFunction('current')" href="../../_functions/current.html" onMouseOver="phpfuncPopup(event,'current')">current</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>);
<a name="l734"><span class="linenum"> 734</span></a>                  <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('sortClause')" href="../../_variables/sortClause.html">$sortClause</a> = &quot; ORDER BY &quot;.<a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sortCol')" href="../../_variables/sortCol.html">$sortCol</a>.&quot; &quot;.<a class="var it5386" onMouseOver="hilite(5386)" onMouseOut="lolite()" onClick="logVariable('sortDir')" href="../../_variables/sortDir.html">$sortDir</a>.&quot; &quot;;
<a name="l735"><span class="linenum"> 735</span></a>              }
<a name="l736"><span class="linenum"> 736</span></a>          } while (<a class="phpfunction" onClick="logFunction('next')" href="../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>) !== false); 
<a name="l737"><span class="linenum"> 737</span></a>          <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it5375" onMouseOver="hilite(5375)" onMouseOut="lolite()" onClick="logVariable('validColumns')" href="../../_variables/validColumns.html">$validColumns</a>);
<a name="l738"><span class="linenum"> 738</span></a>          
<a name="l739"><span class="linenum"> 739</span></a>  <span class="comment">        // topher(&quot;Sort clause: &quot;.$sortClause); topher();    // &lt;-- Uncomment for troubleshooting</span>
<a name="l740"><span class="linenum"> 740</span></a>      }
<a name="l741"><span class="linenum"> 741</span></a>  <span class="comment">    // By default, sort by the default sort column / ordering, if a default was set for this query.</span>
<a name="l742"><span class="linenum"> 742</span></a>      if (<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('sortClause')" href="../../_variables/sortClause.html">$sortClause</a> == &quot;&quot; AND <a class="var it736" onMouseOver="hilite(736)" onMouseOut="lolite()" onClick="logVariable('defaultSort')" href="../../_variables/defaultSort.html">$defaultSort</a> &lt;&gt; &quot;&quot;) {
<a name="l743"><span class="linenum"> 743</span></a>          <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('sortClause')" href="../../_variables/sortClause.html">$sortClause</a> = &quot;ORDER BY &quot;.<a class="var it736" onMouseOver="hilite(736)" onMouseOut="lolite()" onClick="logVariable('defaultSort')" href="../../_variables/defaultSort.html">$defaultSort</a>.&quot; &quot;;
<a name="l744"><span class="linenum"> 744</span></a>      }
<a name="l745"><span class="linenum"> 745</span></a>      
<a name="l746"><span class="linenum"> 746</span></a>  <span class="comment">    // The searchClause will usually be part of the WHERE clause, rather than the HAVING clause. </span>
<a name="l747"><span class="linenum"> 747</span></a>  <span class="comment">    // There are multiple considerations in this choice:</span>
<a name="l748"><span class="linenum"> 748</span></a>  <span class="comment">    //  - I think WHERE clause limitations can improve efficiency by narrowing the conditions during, rather than after, the search.</span>
<a name="l749"><span class="linenum"> 749</span></a>  <span class="comment">    //  - WHERE clause conditions can reference columns that aren't called in the SELECT field, whereas the HAVING clause requires referenced columns to be specified in the SELECT field and will generate an error whenever they aren't present. </span>
<a name="l750"><span class="linenum"> 750</span></a>  <span class="comment">    //  - WHERE clause conditions cannot reference aliases of columns, nor can they reference the result of calculations in the SELECT field. HAVING clause conditions operate upon the results of the query up to that point, so they can reference calculations and column aliases. </span>
<a name="l751"><span class="linenum"> 751</span></a>  <span class="comment">    //  - Adding more text onto the WHERE clause means that no space is left for a &quot;GROUP BY&quot; clause, unless I figure out a way to pass it through this sort/search function. </span>
<a name="l752"><span class="linenum"> 752</span></a>       
<a name="l753"><span class="linenum"> 753</span></a>  <span class="comment">    // If sortActive = 2, then omit the search clause. </span>
<a name="l754"><span class="linenum"> 754</span></a>  <span class="comment">    // If a GROUP clause is present, the search clause should go just before it.</span>
<a name="l755"><span class="linenum"> 755</span></a>  <span class="comment">    // If there were any HAVING conditions, they go just before the sort. </span>
<a name="l756"><span class="linenum"> 756</span></a>      return &quot; &quot;.(<a class="var it5373" onMouseOver="hilite(5373)" onMouseOut="lolite()" onClick="logVariable('sortActive')" href="../../_variables/sortActive.html">$sortActive</a> == 2 ? &quot;&quot; : <a class="var it5368" onMouseOver="hilite(5368)" onMouseOut="lolite()" onClick="logVariable('searchClause')" href="../../_variables/searchClause.html">$searchClause</a>).&quot; &quot;.
<a name="l757"><span class="linenum"> 757</span></a>          (<a class="var it5372" onMouseOver="hilite(5372)" onMouseOut="lolite()" onClick="logVariable('groupBy')" href="../../_variables/groupBy.html">$groupBy</a> &lt;&gt; &quot;&quot; ? &quot; GROUP BY &quot;.<a class="var it5372" onMouseOver="hilite(5372)" onMouseOut="lolite()" onClick="logVariable('groupBy')" href="../../_variables/groupBy.html">$groupBy</a> : &quot;&quot;).&quot; &quot;.
<a name="l758"><span class="linenum"> 758</span></a>          (<a class="var it5376" onMouseOver="hilite(5376)" onMouseOut="lolite()" onClick="logVariable('havingClause')" href="../../_variables/havingClause.html">$havingClause</a> &lt;&gt; &quot;&quot; ? &quot; HAVING 1=1 &quot;.<a class="var it5376" onMouseOver="hilite(5376)" onMouseOut="lolite()" onClick="logVariable('havingClause')" href="../../_variables/havingClause.html">$havingClause</a> : &quot;&quot;).&quot; &quot;.
<a name="l759"><span class="linenum"> 759</span></a>          <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('sortClause')" href="../../_variables/sortClause.html">$sortClause</a>.&quot; &quot;; 
<a name="l760"><span class="linenum"> 760</span></a>  }
<a name="l761"><span class="linenum"> 761</span></a>  
<a name="l762"><span class="linenum"> 762</span></a>  
<a name="l763"><span class="linenum"> 763</span></a>  
<a name="l764"><span class="linenum"> 764</span></a>  
<a name="l765"><span class="linenum"> 765</span></a>  
<a name="l766"><span class="linenum"> 766</span></a>  
<a name="l767"><span class="linenum"> 767</span></a>  function <a class="function" onClick="logFunction('deadlinesCalendar')" href="../../_functions/deadlinescalendar.html" onMouseOver="funcPopup(event,'deadlinescalendar')">deadlinesCalendar</a>(<a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('currentPage')" href="../../_variables/currentPage.html">$currentPage</a>, <a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('userkey')" href="../../_variables/userkey.html">$userkey</a> = &quot;&quot;) {
<a name="l768"><span class="linenum"> 768</span></a>      <span class="comment">/* This function encapsulates the whole deadlines calendar system. It runs </span>
<a name="l769"><span class="linenum"> 769</span></a>  <span class="comment">    the 2 big queries, processes the results, and prints out the calendar. </span>
<a name="l770"><span class="linenum"> 770</span></a>  <span class="comment">    Call the query inside a collapsible panel or </span>
<a name="l771"><span class="linenum"> 771</span></a>  <span class="comment">    whatever container you'd like the table to rest inside. */</span>
<a name="l772"><span class="linenum"> 772</span></a>      
<a name="l773"><span class="linenum"> 773</span></a>  <span class="comment">    // bench();</span>
<a name="l774"><span class="linenum"> 774</span></a>      
<a name="l775"><span class="linenum"> 775</span></a>      global <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('Assessment')" href="../../_variables/Assessment.html">$Assessment</a>;
<a name="l776"><span class="linenum"> 776</span></a>      
<a name="l777"><span class="linenum"> 777</span></a>  <span class="comment">    // Filter is a stopgap to hide irrelevant items.</span>
<a name="l778"><span class="linenum"> 778</span></a>      <a class="var it7757" onMouseOver="hilite(7757)" onMouseOut="lolite()" onClick="logVariable('filter_stopgap')" href="../../_variables/filter_stopgap.html">$filter_stopgap</a> = &quot;&quot;;
<a name="l779"><span class="linenum"> 779</span></a>      <a class="var it7757" onMouseOver="hilite(7757)" onMouseOut="lolite()" onClick="logVariable('filter_stopgap')" href="../../_variables/filter_stopgap.html">$filter_stopgap</a> .= &quot; AND d.instrument_id &lt;&gt; 'SMJ' AND d.instrument_id &lt;&gt; 'SMS' 
<a name="l780"><span class="linenum"> 780</span></a>          AND d.instrument_id &lt;&gt; 'SMA' &quot;;
<a name="l781"><span class="linenum"> 781</span></a>      
<a name="l782"><span class="linenum"> 782</span></a>  <span class="comment">    // By default, the links should refresh you to the scoring or coding pages. But if you aren't</span>
<a name="l783"><span class="linenum"> 783</span></a>  <span class="comment">    // on either of those pages, the links should refresh you back to the same page. </span>
<a name="l784"><span class="linenum"> 784</span></a>      <a class="var it5387" onMouseOver="hilite(5387)" onMouseOut="lolite()" onClick="logVariable('page_code')" href="../../_variables/page_code.html">$page_code</a> = &quot;&quot;;
<a name="l785"><span class="linenum"> 785</span></a>      <a class="var it5388" onMouseOver="hilite(5388)" onMouseOut="lolite()" onClick="logVariable('page_score')" href="../../_variables/page_score.html">$page_score</a> = &quot;&quot;;
<a name="l786"><span class="linenum"> 786</span></a>      if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('currentPage')" href="../../_variables/currentPage.html">$currentPage</a>, &quot;coding_performance_select&quot;) OR 
<a name="l787"><span class="linenum"> 787</span></a>              <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('currentPage')" href="../../_variables/currentPage.html">$currentPage</a>, &quot;scoring_performance_select&quot;)) { 
<a name="l788"><span class="linenum"> 788</span></a>          <a class="var it5387" onMouseOver="hilite(5387)" onMouseOut="lolite()" onClick="logVariable('page_code')" href="../../_variables/page_code.html">$page_code</a> = &quot;la_coding/coding_performance_select.php&quot;; 
<a name="l789"><span class="linenum"> 789</span></a>          <a class="var it5388" onMouseOver="hilite(5388)" onMouseOut="lolite()" onClick="logVariable('page_score')" href="../../_variables/page_score.html">$page_score</a> = &quot;la_scoring/scoring_performance_select.php&quot;; 
<a name="l790"><span class="linenum"> 790</span></a>      } else {
<a name="l791"><span class="linenum"> 791</span></a>          <a class="var it5387" onMouseOver="hilite(5387)" onMouseOut="lolite()" onClick="logVariable('page_code')" href="../../_variables/page_code.html">$page_code</a> = <a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('currentPage')" href="../../_variables/currentPage.html">$currentPage</a>;
<a name="l792"><span class="linenum"> 792</span></a>          <a class="var it5388" onMouseOver="hilite(5388)" onMouseOut="lolite()" onClick="logVariable('page_score')" href="../../_variables/page_score.html">$page_score</a> = <a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('currentPage')" href="../../_variables/currentPage.html">$currentPage</a>; 
<a name="l793"><span class="linenum"> 793</span></a>      }
<a name="l794"><span class="linenum"> 794</span></a>      
<a name="l795"><span class="linenum"> 795</span></a>  <span class="comment">    // V-- Uncomment the below line for troubleshooting.</span>
<a name="l796"><span class="linenum"> 796</span></a>  <span class="comment">    // echo &quot;coding page = &quot;.$page_code.&quot;&lt;br&gt; scoring page = &quot;.$page_score; </span>
<a name="l797"><span class="linenum"> 797</span></a>      
<a name="l798"><span class="linenum"> 798</span></a>      
<a name="l799"><span class="linenum"> 799</span></a>  <span class="comment">    //         Query for counts of assessment totals</span>
<a name="l800"><span class="linenum"> 800</span></a>      
<a name="l801"><span class="linenum"> 801</span></a>      <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT d.instrument_id, d.lakey, SUM(IF(d.completed = 1, 1, 0)) AS total, 
<a name="l802"><span class="linenum"> 802</span></a>          SUM(IF(d.completed = 0, 1, 0)) AS started,
<a name="l803"><span class="linenum"> 803</span></a>          SUM(IF(d.completed = 1 AND (d.scored_1 IS NULL OR d.scored_1 = 0) 
<a name="l804"><span class="linenum"> 804</span></a>                  AND (d.coded_1 IS NULL OR d.coded_1 = 0) 
<a name="l805"><span class="linenum"> 805</span></a>                  AND (d.flag IS NULL OR d.flag = 0), 1, 0)) AS completed,
<a name="l806"><span class="linenum"> 806</span></a>          SUM(IF(d.scored_1 = 1 AND d.finalized = 0
<a name="l807"><span class="linenum"> 807</span></a>                  AND (d.flag IS NULL OR d.flag = 0), 1, 0)) AS 1st_scored,
<a name="l808"><span class="linenum"> 808</span></a>          SUM(IF(d.scored_2 = 1 AND d.finalized = 0
<a name="l809"><span class="linenum"> 809</span></a>                  AND (d.flag IS NULL OR d.flag = 0), 1, 0)) AS 2nd_scored,
<a name="l810"><span class="linenum"> 810</span></a>          SUM(IF(d.coded_1 = 1 AND d.finalized = 0
<a name="l811"><span class="linenum"> 811</span></a>                  AND (d.flag IS NULL OR d.flag = 0), 1, 0)) AS coded,
<a name="l812"><span class="linenum"> 812</span></a>          SUM(IF(d.coded_1_complete = 1 AND d.finalized = 0
<a name="l813"><span class="linenum"> 813</span></a>                  AND (d.flag IS NULL OR d.flag = 0), 1, 0)) AS code_completed,
<a name="l814"><span class="linenum"> 814</span></a>          SUM(IF(d.flag = 1, 1, 0)) AS limbo,
<a name="l815"><span class="linenum"> 815</span></a>          SUM(IF(d.finalized &gt;= 1, 1, 0)) AS finalized,
<a name="l816"><span class="linenum"> 816</span></a>          SUM(IF(d.finalized = 1, 1, 0)) AS released
<a name="l817"><span class="linenum"> 817</span></a>      FROM la_data d
<a name="l818"><span class="linenum"> 818</span></a>          LEFT JOIN la_scores s ON d.lakey = s.lakey
<a name="l819"><span class="linenum"> 819</span></a>          LEFT JOIN la_codes c ON d.lakey = c.lakey 
<a name="l820"><span class="linenum"> 820</span></a>      WHERE 1=1 {<a class="var it7757" onMouseOver="hilite(7757)" onMouseOut="lolite()" onClick="logVariable('filter_stopgap')" href="../../_variables/filter_stopgap.html">$filter_stopgap</a>} &quot;;
<a name="l821"><span class="linenum"> 821</span></a>  <span class="comment">    // possible filter, depending on user</span>
<a name="l822"><span class="linenum"> 822</span></a>      if (<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('userkey')" href="../../_variables/userkey.html">$userkey</a> &lt;&gt; &quot;&quot;) { <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> .= &quot; AND d.resellerkey = &quot;.<a class="function" onClick="logFunction('SQLstr')" href="../../_functions/sqlstr.html" onMouseOver="funcPopup(event,'sqlstr')">SQLstr</a>(<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('userkey')" href="../../_variables/userkey.html">$userkey</a>, 'int'); }
<a name="l823"><span class="linenum"> 823</span></a>      <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> .= &quot; GROUP BY d.instrument_id
<a name="l824"><span class="linenum"> 824</span></a>      HAVING (started &gt; 0 OR completed &gt; 0 OR 1st_scored &gt; 0 OR 2nd_scored &gt; 0 
<a name="l825"><span class="linenum"> 825</span></a>          OR coded &gt; 0 OR code_completed &gt; 0 OR limbo &gt; 0) &quot;;
<a name="l826"><span class="linenum"> 826</span></a>      <a class="var it4288" onMouseOver="hilite(4288)" onMouseOut="lolite()" onClick="logVariable('rsCounts')" href="../../_variables/rsCounts.html">$rsCounts</a> = <a class="phpfunction" onClick="logFunction('mysql_query')" href="../../_functions/mysql_query.html" onMouseOver="phpfuncPopup(event,'mysql_query')">mysql_query</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>) or die(&quot;Count of assessment totals: &quot;.<a class="phpfunction" onClick="logFunction('mysql_error')" href="../../_functions/mysql_error.html" onMouseOver="phpfuncPopup(event,'mysql_error')">mysql_error</a>());
<a name="l827"><span class="linenum"> 827</span></a>      
<a name="l828"><span class="linenum"> 828</span></a>  <span class="comment">    // bench(&quot;calendar: prep&quot;);</span>
<a name="l829"><span class="linenum"> 829</span></a>      
<a name="l830"><span class="linenum"> 830</span></a>      
<a name="l831"><span class="linenum"> 831</span></a>  <span class="comment">    //         DEADLINES CALENDAR QUERIES </span>
<a name="l832"><span class="linenum"> 832</span></a>  
<a name="l833"><span class="linenum"> 833</span></a>      <span class="comment">/* Assignment deadlines query: </span>
<a name="l834"><span class="linenum"> 834</span></a>  <span class="comment">    figure out the number of records we HAVE TO PROCESS for a given deadline date, per instrument ID.</span>
<a name="l835"><span class="linenum"> 835</span></a>  <span class="comment">    This should exclude any records which we have already finalized,</span>
<a name="l836"><span class="linenum"> 836</span></a>  <span class="comment">    but should count people in the assigned group regardless of whether a partially completed la_data record exists.</span>
<a name="l837"><span class="linenum"> 837</span></a>  <span class="comment">     - The insanely long SELECT lines for the total counts, serve to pad the counts with leading 0s. */</span>
<a name="l838"><span class="linenum"> 838</span></a>  
<a name="l839"><span class="linenum"> 839</span></a>      <a class="var it5389" onMouseOver="hilite(5389)" onMouseOut="lolite()" onClick="logVariable('query_rsReleaseDates')" href="../../_variables/query_rsReleaseDates.html">$query_rsReleaseDates</a> = &quot;SELECT r.userkey, sa.userkey, 
<a name="l840"><span class="linenum"> 840</span></a>          LEFT( IF(rb.company &lt;&gt; '', rb.company, CONCAT(rb.firstname, ' ', rb.lastname)),
<a name="l841"><span class="linenum"> 841</span></a>              15) AS bulkcustomer, 
<a name="l842"><span class="linenum"> 842</span></a>          a.assignmentkey, a.instrument_id, a.assign_group, 
<a name="l843"><span class="linenum"> 843</span></a>          a.date_start, a.date_release, 
<a name="l844"><span class="linenum"> 844</span></a>          IF(a.date_release IS NOT NULL, # Calendar should just show assn release dates.
<a name="l845"><span class="linenum"> 845</span></a>               a.date_release, (d.date_completed + INTERVAL 14 DAY)) AS date_due, 
<a name="l846"><span class="linenum"> 846</span></a>          e.status AS email_status, d.lakey, 
<a name="l847"><span class="linenum"> 847</span></a>          IF( <a class="function" onClick="logFunction('LENGTH')" href="../../_functions/length.html" onMouseOver="funcPopup(event,'length')">LENGTH</a>(<a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT r.userkey)) &lt; 2, 
<a name="l848"><span class="linenum"> 848</span></a>              RIGHT(1000 + <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT r.userkey),2), 
<a name="l849"><span class="linenum"> 849</span></a>              <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT r.userkey) ) AS count_assigned, 
<a name="l850"><span class="linenum"> 850</span></a>          IF( <a class="function" onClick="logFunction('LENGTH')" href="../../_functions/length.html" onMouseOver="funcPopup(event,'length')">LENGTH</a>(<a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT d.lakey)) &lt; 2, 
<a name="l851"><span class="linenum"> 851</span></a>              RIGHT(1000 + <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT d.lakey),2), 
<a name="l852"><span class="linenum"> 852</span></a>              <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT d.lakey) ) AS count_started, 
<a name="l853"><span class="linenum"> 853</span></a>          IF( <a class="function" onClick="logFunction('LENGTH')" href="../../_functions/length.html" onMouseOver="funcPopup(event,'length')">LENGTH</a>(<a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT d_com.lakey)) &lt; 2, 
<a name="l854"><span class="linenum"> 854</span></a>              RIGHT(1000 + <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT d_com.lakey),2), 
<a name="l855"><span class="linenum"> 855</span></a>              <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT d_com.lakey) ) AS count_completed, 
<a name="l856"><span class="linenum"> 856</span></a>          IF( <a class="function" onClick="logFunction('LENGTH')" href="../../_functions/length.html" onMouseOver="funcPopup(event,'length')">LENGTH</a>(<a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT d_co.lakey)) &lt; 2, 
<a name="l857"><span class="linenum"> 857</span></a>              RIGHT(1000 + <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT d_co.lakey),2), 
<a name="l858"><span class="linenum"> 858</span></a>              <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT d_co.lakey) ) AS count_coded, 
<a name="l859"><span class="linenum"> 859</span></a>          IF( <a class="function" onClick="logFunction('LENGTH')" href="../../_functions/length.html" onMouseOver="funcPopup(event,'length')">LENGTH</a>(<a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT d_sc.lakey)) &lt; 2, 
<a name="l860"><span class="linenum"> 860</span></a>              RIGHT(1000 + <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT d_sc.lakey),2), 
<a name="l861"><span class="linenum"> 861</span></a>              <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT d_sc.lakey) ) AS count_scored, 
<a name="l862"><span class="linenum"> 862</span></a>          IF( <a class="function" onClick="logFunction('LENGTH')" href="../../_functions/length.html" onMouseOver="funcPopup(event,'length')">LENGTH</a>(<a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT d_fin.lakey)) &lt; 2, 
<a name="l863"><span class="linenum"> 863</span></a>              RIGHT(1000 + <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT d_fin.lakey),2), 
<a name="l864"><span class="linenum"> 864</span></a>              <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT d_fin.lakey) ) AS count_fin, 
<a name="l865"><span class="linenum"> 865</span></a>          CASE 
<a name="l866"><span class="linenum"> 866</span></a>              WHEN DATE_FORMAT(a.date_release, '%w') = 0 
<a name="l867"><span class="linenum"> 867</span></a>                  THEN (a.date_release + INTERVAL -2 DAY)
<a name="l868"><span class="linenum"> 868</span></a>              WHEN DATE_FORMAT(a.date_release, '%w') = 6 
<a name="l869"><span class="linenum"> 869</span></a>                  THEN (a.date_release + INTERVAL -1 DAY)
<a name="l870"><span class="linenum"> 870</span></a>              ELSE (a.date_release)
<a name="l871"><span class="linenum"> 871</span></a>          END releasedate
<a name="l872"><span class="linenum"> 872</span></a>      FROM la_assignments a 
<a name="l873"><span class="linenum"> 873</span></a>          LEFT JOIN students_assignments sa ON a.assignmentkey = sa.assignmentkey
<a name="l874"><span class="linenum"> 874</span></a>          LEFT JOIN registrants r ON sa.userkey = r.userkey
<a name="l875"><span class="linenum"> 875</span></a>          LEFT JOIN registrants rb ON r.bulkuserkey = rb.userkey 
<a name="l876"><span class="linenum"> 876</span></a>          LEFT JOIN emails e ON a.assignmentkey = e.assignmentkey AND e.status = 3
<a name="l877"><span class="linenum"> 877</span></a>          LEFT JOIN la_data d ON r.userkey = d.userkey 
<a name="l878"><span class="linenum"> 878</span></a>              AND d.assignmentkey = a.assignmentkey
<a name="l879"><span class="linenum"> 879</span></a>          LEFT JOIN la_codes c ON d.lakey = c.lakey 
<a name="l880"><span class="linenum"> 880</span></a>          LEFT JOIN la_scores s ON d.lakey = s.lakey
<a name="l881"><span class="linenum"> 881</span></a>          LEFT JOIN la_data d_com ON d_com.lakey = d.lakey AND d_com.completed = 1 
<a name="l882"><span class="linenum"> 882</span></a>              AND (d_com.flag IS NULL OR d_com.flag = 0)
<a name="l883"><span class="linenum"> 883</span></a>          LEFT JOIN la_data d_co ON d_co.lakey = d.lakey AND d.coded_1 = 1
<a name="l884"><span class="linenum"> 884</span></a>          LEFT JOIN la_data d_sc ON d_sc.lakey = d.lakey AND d.scored_1 = 1 
<a name="l885"><span class="linenum"> 885</span></a>          LEFT JOIN la_data d_fin ON d_fin.lakey = d.lakey AND d_fin.finalized &gt;= 1
<a name="l886"><span class="linenum"> 886</span></a>      WHERE a.date_release IS NOT NULL 
<a name="l887"><span class="linenum"> 887</span></a>           &quot;.<a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;d.&quot;, &quot;a.&quot;, <a class="var it7757" onMouseOver="hilite(7757)" onMouseOut="lolite()" onClick="logVariable('filter_stopgap')" href="../../_variables/filter_stopgap.html">$filter_stopgap</a>);
<a name="l888"><span class="linenum"> 888</span></a>      
<a name="l889"><span class="linenum"> 889</span></a>      if (<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('userkey')" href="../../_variables/userkey.html">$userkey</a> &lt;&gt; &quot;&quot;) { <a class="var it5389" onMouseOver="hilite(5389)" onMouseOut="lolite()" onClick="logVariable('query_rsReleaseDates')" href="../../_variables/query_rsReleaseDates.html">$query_rsReleaseDates</a> .= &quot; AND a.bulkcustomerkey = &quot;.<a class="function" onClick="logFunction('SQLstr')" href="../../_functions/sqlstr.html" onMouseOver="funcPopup(event,'sqlstr')">SQLstr</a>(<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('userkey')" href="../../_variables/userkey.html">$userkey</a>, &quot;int&quot;); }
<a name="l890"><span class="linenum"> 890</span></a>      <a class="var it5389" onMouseOver="hilite(5389)" onMouseOut="lolite()" onClick="logVariable('query_rsReleaseDates')" href="../../_variables/query_rsReleaseDates.html">$query_rsReleaseDates</a> .= <a class="function" onClick="logFunction('querySortSearch')" href="../../_functions/querysortsearch.html" onMouseOver="funcPopup(event,'querysortsearch')">querySortSearch</a>(<a class="var it5389" onMouseOver="hilite(5389)" onMouseOut="lolite()" onClick="logVariable('query_rsReleaseDates')" href="../../_variables/query_rsReleaseDates.html">$query_rsReleaseDates</a>, 
<a name="l891"><span class="linenum"> 891</span></a>          &quot;a.assignmentkey&quot;, 
<a name="l892"><span class="linenum"> 892</span></a>          &quot;a.instrument_id ASC, releasedate ASC &quot;, 2);
<a name="l893"><span class="linenum"> 893</span></a>      <a class="var it5390" onMouseOver="hilite(5390)" onMouseOut="lolite()" onClick="logVariable('rsReleaseDates')" href="../../_variables/rsReleaseDates.html">$rsReleaseDates</a> = <a class="phpfunction" onClick="logFunction('mysql_query')" href="../../_functions/mysql_query.html" onMouseOver="phpfuncPopup(event,'mysql_query')">mysql_query</a>(<a class="var it5389" onMouseOver="hilite(5389)" onMouseOut="lolite()" onClick="logVariable('query_rsReleaseDates')" href="../../_variables/query_rsReleaseDates.html">$query_rsReleaseDates</a>) or die(&quot;rsReleaseDates: &quot;.<a class="phpfunction" onClick="logFunction('mysql_error')" href="../../_functions/mysql_error.html" onMouseOver="phpfuncPopup(event,'mysql_error')">mysql_error</a>());
<a name="l894"><span class="linenum"> 894</span></a>      <a class="var it5391" onMouseOver="hilite(5391)" onMouseOut="lolite()" onClick="logVariable('totalRows_rsReleaseDates')" href="../../_variables/totalRows_rsReleaseDates.html">$totalRows_rsReleaseDates</a> = <a class="phpfunction" onClick="logFunction('mysql_num_rows')" href="../../_functions/mysql_num_rows.html" onMouseOver="phpfuncPopup(event,'mysql_num_rows')">mysql_num_rows</a>(<a class="var it5390" onMouseOver="hilite(5390)" onMouseOut="lolite()" onClick="logVariable('rsReleaseDates')" href="../../_variables/rsReleaseDates.html">$rsReleaseDates</a>);
<a name="l895"><span class="linenum"> 895</span></a>      
<a name="l896"><span class="linenum"> 896</span></a>  <span class="comment">    // bench(&quot;calendar: release dates&quot;);</span>
<a name="l897"><span class="linenum"> 897</span></a>      
<a name="l898"><span class="linenum"> 898</span></a>      <span class="comment">/* Completion-date deadlines query: </span>
<a name="l899"><span class="linenum"> 899</span></a>  <span class="comment">    figure out the number of no-assignment-attached records we have to process, based on our promise of turnaround by 10 business days after their completion date.</span>
<a name="l900"><span class="linenum"> 900</span></a>  <span class="comment">    This query relies on la_data, and only references la_assignments in order to require that NO suitable assignment exist. */</span>
<a name="l901"><span class="linenum"> 901</span></a>      
<a name="l902"><span class="linenum"> 902</span></a>      <a class="var it5392" onMouseOver="hilite(5392)" onMouseOut="lolite()" onClick="logVariable('query_rsCompletionDates')" href="../../_variables/query_rsCompletionDates.html">$query_rsCompletionDates</a> = &quot;SELECT d.instrument_id, r.bulkuserkey, r.group, 
<a name="l903"><span class="linenum"> 903</span></a>          LEFT(IF(rb.company &lt;&gt; '', rb.company, 
<a name="l904"><span class="linenum"> 904</span></a>              CONCAT(rb.firstname, ' ', rb.lastname)), 15) AS bulkcustomer, 
<a name="l905"><span class="linenum"> 905</span></a>          d.lakey, <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT d.lakey) AS `count`, d.date_completed, 
<a name="l906"><span class="linenum"> 906</span></a>          CASE 
<a name="l907"><span class="linenum"> 907</span></a>              WHEN DATE_FORMAT(d.date_completed, '%w') = 0 
<a name="l908"><span class="linenum"> 908</span></a>                  THEN (d.date_completed + INTERVAL 12 DAY)
<a name="l909"><span class="linenum"> 909</span></a>              WHEN DATE_FORMAT(d.date_completed, '%w') = 6 
<a name="l910"><span class="linenum"> 910</span></a>                  THEN (d.date_completed + INTERVAL 13 DAY)
<a name="l911"><span class="linenum"> 911</span></a>              ELSE (d.date_completed + INTERVAL 14 DAY)
<a name="l912"><span class="linenum"> 912</span></a>          END duedate
<a name="l913"><span class="linenum"> 913</span></a>      FROM la_data d 
<a name="l914"><span class="linenum"> 914</span></a>      JOIN registrants r ON d.userkey = r.userkey
<a name="l915"><span class="linenum"> 915</span></a>      LEFT JOIN registrants rb ON r.bulkuserkey = rb.userkey 
<a name="l916"><span class="linenum"> 916</span></a>      LEFT JOIN la_assignments a ON d.assignmentkey = a.assignmentkey
<a name="l917"><span class="linenum"> 917</span></a>      WHERE a.assignmentkey IS NULL AND d.date_completed IS NOT NULL
<a name="l918"><span class="linenum"> 918</span></a>          AND d.completed = 1 AND d.finalized = 0 {<a class="var it7757" onMouseOver="hilite(7757)" onMouseOut="lolite()" onClick="logVariable('filter_stopgap')" href="../../_variables/filter_stopgap.html">$filter_stopgap</a>} &quot;;
<a name="l919"><span class="linenum"> 919</span></a>      if (<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('userkey')" href="../../_variables/userkey.html">$userkey</a> &lt;&gt; &quot;&quot;) { 
<a name="l920"><span class="linenum"> 920</span></a>          <a class="var it5392" onMouseOver="hilite(5392)" onMouseOut="lolite()" onClick="logVariable('query_rsCompletionDates')" href="../../_variables/query_rsCompletionDates.html">$query_rsCompletionDates</a> .= sprintf(&quot; AND r.bulkuserkey = %s &quot;, 
<a name="l921"><span class="linenum"> 921</span></a>              <a class="function" onClick="logFunction('SQLstr')" href="../../_functions/sqlstr.html" onMouseOver="funcPopup(event,'sqlstr')">SQLstr</a>(<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('userkey')" href="../../_variables/userkey.html">$userkey</a>, &quot;int&quot;)); 
<a name="l922"><span class="linenum"> 922</span></a>      }
<a name="l923"><span class="linenum"> 923</span></a>      <a class="var it5392" onMouseOver="hilite(5392)" onMouseOut="lolite()" onClick="logVariable('query_rsCompletionDates')" href="../../_variables/query_rsCompletionDates.html">$query_rsCompletionDates</a> .= <a class="function" onClick="logFunction('querySortSearch')" href="../../_functions/querysortsearch.html" onMouseOver="funcPopup(event,'querysortsearch')">querySortSearch</a>(<a class="var it5392" onMouseOver="hilite(5392)" onMouseOut="lolite()" onClick="logVariable('query_rsCompletionDates')" href="../../_variables/query_rsCompletionDates.html">$query_rsCompletionDates</a>, 
<a name="l924"><span class="linenum"> 924</span></a>          &quot;d.instrument_id, duedate, bulkcustomer&quot;, 
<a name="l925"><span class="linenum"> 925</span></a>          &quot;d.instrument_id ASC, duedate ASC &quot;, 2);
<a name="l926"><span class="linenum"> 926</span></a>      <a class="var it5393" onMouseOver="hilite(5393)" onMouseOut="lolite()" onClick="logVariable('rsCompletionDates')" href="../../_variables/rsCompletionDates.html">$rsCompletionDates</a> = <a class="phpfunction" onClick="logFunction('mysql_query')" href="../../_functions/mysql_query.html" onMouseOver="phpfuncPopup(event,'mysql_query')">mysql_query</a>(<a class="var it5392" onMouseOver="hilite(5392)" onMouseOut="lolite()" onClick="logVariable('query_rsCompletionDates')" href="../../_variables/query_rsCompletionDates.html">$query_rsCompletionDates</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('Assessment')" href="../../_variables/Assessment.html">$Assessment</a>) or die(&quot;rsCompletionDates: &quot;.<a class="phpfunction" onClick="logFunction('mysql_error')" href="../../_functions/mysql_error.html" onMouseOver="phpfuncPopup(event,'mysql_error')">mysql_error</a>());
<a name="l927"><span class="linenum"> 927</span></a>      <a class="var it5394" onMouseOver="hilite(5394)" onMouseOut="lolite()" onClick="logVariable('totalRows_rsCompletionDates')" href="../../_variables/totalRows_rsCompletionDates.html">$totalRows_rsCompletionDates</a> = <a class="phpfunction" onClick="logFunction('mysql_num_rows')" href="../../_functions/mysql_num_rows.html" onMouseOver="phpfuncPopup(event,'mysql_num_rows')">mysql_num_rows</a>(<a class="var it5393" onMouseOver="hilite(5393)" onMouseOut="lolite()" onClick="logVariable('rsCompletionDates')" href="../../_variables/rsCompletionDates.html">$rsCompletionDates</a>);
<a name="l928"><span class="linenum"> 928</span></a>      
<a name="l929"><span class="linenum"> 929</span></a>  <span class="comment">    // bench(&quot;calendar: completion dates&quot;);</span>
<a name="l930"><span class="linenum"> 930</span></a>      
<a name="l931"><span class="linenum"> 931</span></a>      
<a name="l932"><span class="linenum"> 932</span></a>      
<a name="l933"><span class="linenum"> 933</span></a>  <span class="comment">    //         PROCESSING THE DEADLINE DATES </span>
<a name="l934"><span class="linenum"> 934</span></a>      
<a name="l935"><span class="linenum"> 935</span></a>      <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('entryText')" href="../../_variables/entryText.html">$entryText</a> = array();
<a name="l936"><span class="linenum"> 936</span></a>      <a class="var it7759" onMouseOver="hilite(7759)" onMouseOut="lolite()" onClick="logVariable('entryDate')" href="../../_variables/entryDate.html">$entryDate</a> = array();
<a name="l937"><span class="linenum"> 937</span></a>      <a class="var it7760" onMouseOver="hilite(7760)" onMouseOut="lolite()" onClick="logVariable('entryLink')" href="../../_variables/entryLink.html">$entryLink</a> = array();
<a name="l938"><span class="linenum"> 938</span></a>      <a class="var it7761" onMouseOver="hilite(7761)" onMouseOut="lolite()" onClick="logVariable('color_releasedate')" href="../../_variables/color_releasedate.html">$color_releasedate</a> = &quot;#BD1F06&quot;;
<a name="l939"><span class="linenum"> 939</span></a>      <a class="var it7762" onMouseOver="hilite(7762)" onMouseOut="lolite()" onClick="logVariable('color_startdate')" href="../../_variables/color_startdate.html">$color_startdate</a> = &quot;#525b3b&quot;; <span class="comment">// &quot;#525b3b&quot;;</span>
<a name="l940"><span class="linenum"> 940</span></a>      <a class="var it7763" onMouseOver="hilite(7763)" onMouseOut="lolite()" onClick="logVariable('color_completedate')" href="../../_variables/color_completedate.html">$color_completedate</a> = &quot;#603864&quot;;
<a name="l941"><span class="linenum"> 941</span></a>      
<a name="l942"><span class="linenum"> 942</span></a>      
<a name="l943"><span class="linenum"> 943</span></a>  <span class="comment">    // Add CALENDAR entries for ASSIGNMENT RELEASE DATES</span>
<a name="l944"><span class="linenum"> 944</span></a>      
<a name="l945"><span class="linenum"> 945</span></a>      while (<a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a> = <a class="phpfunction" onClick="logFunction('mysql_fetch_assoc')" href="../../_functions/mysql_fetch_assoc.html" onMouseOver="phpfuncPopup(event,'mysql_fetch_assoc')">mysql_fetch_assoc</a>(<a class="var it5390" onMouseOver="hilite(5390)" onMouseOut="lolite()" onClick="logVariable('rsReleaseDates')" href="../../_variables/rsReleaseDates.html">$rsReleaseDates</a>)) {
<a name="l946"><span class="linenum"> 946</span></a>          <a class="var it5399" onMouseOver="hilite(5399)" onMouseOut="lolite()" onClick="logVariable('assnDate')" href="../../_variables/assnDate.html">$assnDate</a> = <a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y-m-d', <a class="phpfunction" onClick="logFunction('strtotime')" href="../../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>(<a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['date_due']));
<a name="l947"><span class="linenum"> 947</span></a>  <span class="comment">        // echo &quot;Release date for assignmentkey &quot;.</span>
<a name="l948"><span class="linenum"> 948</span></a>  <span class="comment">        //    $row['assignmentkey'].&quot; = &quot;.$assnDate.&quot;&lt;br&gt;&quot;;</span>
<a name="l949"><span class="linenum"> 949</span></a>          <a class="var it5401" onMouseOver="hilite(5401)" onMouseOut="lolite()" onClick="logVariable('assnInstr')" href="../../_variables/assnInstr.html">$assnInstr</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;_JOURNAL&quot;, &quot; Jo&quot;, <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['instrument_id']);
<a name="l950"><span class="linenum"> 950</span></a>          <a class="var it5402" onMouseOver="hilite(5402)" onMouseOut="lolite()" onClick="logVariable('assnLink')" href="../../_variables/assnLink.html">$assnLink</a> = &quot;&quot;;
<a name="l951"><span class="linenum"> 951</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it5401" onMouseOver="hilite(5401)" onMouseOut="lolite()" onClick="logVariable('assnInstr')" href="../../_variables/assnInstr.html">$assnInstr</a>, &quot;Jo&quot;)) { <a class="var it5402" onMouseOver="hilite(5402)" onMouseOut="lolite()" onClick="logVariable('assnLink')" href="../../_variables/assnLink.html">$assnLink</a> = <a class="var it5387" onMouseOver="hilite(5387)" onMouseOut="lolite()" onClick="logVariable('page_code')" href="../../_variables/page_code.html">$page_code</a>; }
<a name="l952"><span class="linenum"> 952</span></a>          else                                                     { <a class="var it5402" onMouseOver="hilite(5402)" onMouseOut="lolite()" onClick="logVariable('assnLink')" href="../../_variables/assnLink.html">$assnLink</a> = <a class="var it5388" onMouseOver="hilite(5388)" onMouseOut="lolite()" onClick="logVariable('page_score')" href="../../_variables/page_score.html">$page_score</a>; }
<a name="l953"><span class="linenum"> 953</span></a>          
<a name="l954"><span class="linenum"> 954</span></a>  <span class="comment">        // Add this event's RELEASE DATE</span>
<a name="l955"><span class="linenum"> 955</span></a>          <a class="var it7759" onMouseOver="hilite(7759)" onMouseOut="lolite()" onClick="logVariable('entryDate')" href="../../_variables/entryDate.html">$entryDate</a>[] = <a class="phpfunction" onClick="logFunction('strtotime')" href="../../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>(<a class="var it5399" onMouseOver="hilite(5399)" onMouseOut="lolite()" onClick="logVariable('assnDate')" href="../../_variables/assnDate.html">$assnDate</a>) + 20000;
<a name="l956"><span class="linenum"> 956</span></a>          <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('entryText')" href="../../_variables/entryText.html">$entryText</a>[] = &quot;&quot;.<a class="var it5401" onMouseOver="hilite(5401)" onMouseOut="lolite()" onClick="logVariable('assnInstr')" href="../../_variables/assnInstr.html">$assnInstr</a>.&quot; (&quot;.<a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['assign_group'].&quot;) &quot;.
<a name="l957"><span class="linenum"> 957</span></a>  <span class="comment">            // The formula for numbers: </span>
<a name="l958"><span class="linenum"> 958</span></a>  <span class="comment">            // #assigned | #taken : #in_queue | #processed | #finalized </span>
<a name="l959"><span class="linenum"> 959</span></a>              <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['count_assigned'].&quot;|&quot;.
<a name="l960"><span class="linenum"> 960</span></a>              <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['count_started'].&quot;|&quot;.
<a name="l961"><span class="linenum"> 961</span></a>              <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['count_completed'].&quot;:&quot;.
<a name="l962"><span class="linenum"> 962</span></a>              <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['count_coded'].&quot;|&quot;.
<a name="l963"><span class="linenum"> 963</span></a>              <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['count_scored'].&quot;|&quot;.
<a name="l964"><span class="linenum"> 964</span></a>              <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['count_fin'].
<a name="l965"><span class="linenum"> 965</span></a>              (<a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['email_status'] == 3 ? &quot; (e)&quot; : &quot;&quot;);
<a name="l966"><span class="linenum"> 966</span></a>          <a class="var it7760" onMouseOver="hilite(7760)" onMouseOut="lolite()" onClick="logVariable('entryLink')" href="../../_variables/entryLink.html">$entryLink</a>[] = &quot;../set_session_var_instrument.php?link_id=&quot;.<a class="var it5402" onMouseOver="hilite(5402)" onMouseOut="lolite()" onClick="logVariable('assnLink')" href="../../_variables/assnLink.html">$assnLink</a>.
<a name="l967"><span class="linenum"> 967</span></a>              &quot;&amp;sessionVarName=instrument_id&amp;sessionVarValue=&quot;.<a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['instrument_id'].
<a name="l968"><span class="linenum"> 968</span></a>              &quot;&amp;search=(s)assignmentkey(e):&quot;.<a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['assignmentkey'].&quot;,&quot;;
<a name="l969"><span class="linenum"> 969</span></a>          <a class="var it7764" onMouseOver="hilite(7764)" onMouseOut="lolite()" onClick="logVariable('entryColor')" href="../../_variables/entryColor.html">$entryColor</a>[] = <a class="var it7761" onMouseOver="hilite(7761)" onMouseOut="lolite()" onClick="logVariable('color_releasedate')" href="../../_variables/color_releasedate.html">$color_releasedate</a>;
<a name="l970"><span class="linenum"> 970</span></a>          
<a name="l971"><span class="linenum"> 971</span></a>  <span class="comment">        // Add this event's START DATE</span>
<a name="l972"><span class="linenum"> 972</span></a>          <a class="var it7759" onMouseOver="hilite(7759)" onMouseOut="lolite()" onClick="logVariable('entryDate')" href="../../_variables/entryDate.html">$entryDate</a>[] = <a class="phpfunction" onClick="logFunction('strtotime')" href="../../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>(<a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['date_start']);
<a name="l973"><span class="linenum"> 973</span></a>          <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('entryText')" href="../../_variables/entryText.html">$entryText</a>[] = &quot;Start &quot;.<a class="var it5401" onMouseOver="hilite(5401)" onMouseOut="lolite()" onClick="logVariable('assnInstr')" href="../../_variables/assnInstr.html">$assnInstr</a>.&quot; for &quot;.<a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['assign_group'].
<a name="l974"><span class="linenum"> 974</span></a>              (<a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['email_status'] == 3 ? &quot; (e)&quot; : &quot;&quot;);
<a name="l975"><span class="linenum"> 975</span></a>          <a class="var it7760" onMouseOver="hilite(7760)" onMouseOut="lolite()" onClick="logVariable('entryLink')" href="../../_variables/entryLink.html">$entryLink</a>[] = &quot;../set_session_var_instrument.php?link_id=&quot;.<a class="var it5402" onMouseOver="hilite(5402)" onMouseOut="lolite()" onClick="logVariable('assnLink')" href="../../_variables/assnLink.html">$assnLink</a>.
<a name="l976"><span class="linenum"> 976</span></a>              &quot;&amp;sessionVarName=instrument_id&amp;sessionVarValue=&quot;.<a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['instrument_id'].
<a name="l977"><span class="linenum"> 977</span></a>              &quot;&amp;search=(s)assignmentkey(e):&quot;.<a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['assignmentkey'].&quot;,&quot;;
<a name="l978"><span class="linenum"> 978</span></a>          <a class="var it7764" onMouseOver="hilite(7764)" onMouseOut="lolite()" onClick="logVariable('entryColor')" href="../../_variables/entryColor.html">$entryColor</a>[] = <a class="var it7762" onMouseOver="hilite(7762)" onMouseOut="lolite()" onClick="logVariable('color_startdate')" href="../../_variables/color_startdate.html">$color_startdate</a>;
<a name="l979"><span class="linenum"> 979</span></a>          
<a name="l980"><span class="linenum"> 980</span></a>      } <span class="comment">// end WHILE: for each row of the deadlines recordset</span>
<a name="l981"><span class="linenum"> 981</span></a>  <span class="comment">    // Reset the recordset </span>
<a name="l982"><span class="linenum"> 982</span></a>      if (<a class="phpfunction" onClick="logFunction('mysql_num_rows')" href="../../_functions/mysql_num_rows.html" onMouseOver="phpfuncPopup(event,'mysql_num_rows')">mysql_num_rows</a>(<a class="var it5390" onMouseOver="hilite(5390)" onMouseOut="lolite()" onClick="logVariable('rsReleaseDates')" href="../../_variables/rsReleaseDates.html">$rsReleaseDates</a>) &gt; 0) { <a class="phpfunction" onClick="logFunction('mysql_data_seek')" href="../../_functions/mysql_data_seek.html" onMouseOver="phpfuncPopup(event,'mysql_data_seek')">mysql_data_seek</a>(<a class="var it5390" onMouseOver="hilite(5390)" onMouseOut="lolite()" onClick="logVariable('rsReleaseDates')" href="../../_variables/rsReleaseDates.html">$rsReleaseDates</a>, 0); }
<a name="l983"><span class="linenum"> 983</span></a>      
<a name="l984"><span class="linenum"> 984</span></a>      
<a name="l985"><span class="linenum"> 985</span></a>  <span class="comment">    //                     COMPLETION DATES FOR CALENDAR</span>
<a name="l986"><span class="linenum"> 986</span></a>      
<a name="l987"><span class="linenum"> 987</span></a>      while (<a class="var it5408" onMouseOver="hilite(5408)" onMouseOut="lolite()" onClick="logVariable('row_rsCompletionDates')" href="../../_variables/row_rsCompletionDates.html">$row_rsCompletionDates</a> = <a class="phpfunction" onClick="logFunction('mysql_fetch_assoc')" href="../../_functions/mysql_fetch_assoc.html" onMouseOver="phpfuncPopup(event,'mysql_fetch_assoc')">mysql_fetch_assoc</a>(<a class="var it5393" onMouseOver="hilite(5393)" onMouseOut="lolite()" onClick="logVariable('rsCompletionDates')" href="../../_variables/rsCompletionDates.html">$rsCompletionDates</a>)) {
<a name="l988"><span class="linenum"> 988</span></a>          
<a name="l989"><span class="linenum"> 989</span></a>          <a class="var it5409" onMouseOver="hilite(5409)" onMouseOut="lolite()" onClick="logVariable('complDateStart')" href="../../_variables/complDateStart.html">$complDateStart</a> = <a class="var it5408" onMouseOver="hilite(5408)" onMouseOut="lolite()" onClick="logVariable('row_rsCompletionDates')" href="../../_variables/row_rsCompletionDates.html">$row_rsCompletionDates</a>['date_completed'];
<a name="l990"><span class="linenum"> 990</span></a>  <span class="comment">        // If the deadline is Thursday or Friday, the searchable date range should extend to the weekend.</span>
<a name="l991"><span class="linenum"> 991</span></a>          if (<a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('w', <a class="phpfunction" onClick="logFunction('strtotime')" href="../../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>(<a class="var it5409" onMouseOver="hilite(5409)" onMouseOut="lolite()" onClick="logVariable('complDateStart')" href="../../_variables/complDateStart.html">$complDateStart</a>)) &gt;= 4) {
<a name="l992"><span class="linenum"> 992</span></a>              <a class="var it5410" onMouseOver="hilite(5410)" onMouseOut="lolite()" onClick="logVariable('complDateEnd')" href="../../_variables/complDateEnd.html">$complDateEnd</a> = <a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y-m-d', <a class="phpfunction" onClick="logFunction('strtotime')" href="../../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>(<a class="var it5408" onMouseOver="hilite(5408)" onMouseOut="lolite()" onClick="logVariable('row_rsCompletionDates')" href="../../_variables/row_rsCompletionDates.html">$row_rsCompletionDates</a>['date_completed'].' +2 days'));    
<a name="l993"><span class="linenum"> 993</span></a>          } else { <a class="var it5410" onMouseOver="hilite(5410)" onMouseOut="lolite()" onClick="logVariable('complDateEnd')" href="../../_variables/complDateEnd.html">$complDateEnd</a> = <a class="var it5409" onMouseOver="hilite(5409)" onMouseOut="lolite()" onClick="logVariable('complDateStart')" href="../../_variables/complDateStart.html">$complDateStart</a>; } 
<a name="l994"><span class="linenum"> 994</span></a>          <a class="var it5411" onMouseOver="hilite(5411)" onMouseOut="lolite()" onClick="logVariable('assnBc')" href="../../_variables/assnBc.html">$assnBc</a> = <a class="var it5408" onMouseOver="hilite(5408)" onMouseOut="lolite()" onClick="logVariable('row_rsCompletionDates')" href="../../_variables/row_rsCompletionDates.html">$row_rsCompletionDates</a>['bulkcustomer'];
<a name="l995"><span class="linenum"> 995</span></a>          <a class="var it5401" onMouseOver="hilite(5401)" onMouseOut="lolite()" onClick="logVariable('assnInstr')" href="../../_variables/assnInstr.html">$assnInstr</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;_JOURNAL&quot;, &quot; Jo&quot;, <a class="var it5408" onMouseOver="hilite(5408)" onMouseOut="lolite()" onClick="logVariable('row_rsCompletionDates')" href="../../_variables/row_rsCompletionDates.html">$row_rsCompletionDates</a>['instrument_id']);
<a name="l996"><span class="linenum"> 996</span></a>          <a class="var it5402" onMouseOver="hilite(5402)" onMouseOut="lolite()" onClick="logVariable('assnLink')" href="../../_variables/assnLink.html">$assnLink</a> = &quot;&quot;;
<a name="l997"><span class="linenum"> 997</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it5401" onMouseOver="hilite(5401)" onMouseOut="lolite()" onClick="logVariable('assnInstr')" href="../../_variables/assnInstr.html">$assnInstr</a>, &quot;Jo&quot;)) { <a class="var it5402" onMouseOver="hilite(5402)" onMouseOut="lolite()" onClick="logVariable('assnLink')" href="../../_variables/assnLink.html">$assnLink</a> = <a class="var it5387" onMouseOver="hilite(5387)" onMouseOut="lolite()" onClick="logVariable('page_code')" href="../../_variables/page_code.html">$page_code</a>; }
<a name="l998"><span class="linenum"> 998</span></a>          else                                                     { <a class="var it5402" onMouseOver="hilite(5402)" onMouseOut="lolite()" onClick="logVariable('assnLink')" href="../../_variables/assnLink.html">$assnLink</a> = <a class="var it5388" onMouseOver="hilite(5388)" onMouseOut="lolite()" onClick="logVariable('page_score')" href="../../_variables/page_score.html">$page_score</a>; }
<a name="l999"><span class="linenum"> 999</span></a>          <a class="var it5412" onMouseOver="hilite(5412)" onMouseOut="lolite()" onClick="logVariable('assnCount')" href="../../_variables/assnCount.html">$assnCount</a> = <a class="var it5408" onMouseOver="hilite(5408)" onMouseOut="lolite()" onClick="logVariable('row_rsCompletionDates')" href="../../_variables/row_rsCompletionDates.html">$row_rsCompletionDates</a>['count'];
<a name="l1000"><span class="linenum">1000</span></a>          
<a name="l1001"><span class="linenum">1001</span></a>          <a class="var it7759" onMouseOver="hilite(7759)" onMouseOut="lolite()" onClick="logVariable('entryDate')" href="../../_variables/entryDate.html">$entryDate</a>[] = <a class="phpfunction" onClick="logFunction('strtotime')" href="../../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>(<a class="var it5408" onMouseOver="hilite(5408)" onMouseOut="lolite()" onClick="logVariable('row_rsCompletionDates')" href="../../_variables/row_rsCompletionDates.html">$row_rsCompletionDates</a>['duedate']);
<a name="l1002"><span class="linenum">1002</span></a>          <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('entryText')" href="../../_variables/entryText.html">$entryText</a>[] = (<a class="var it5411" onMouseOver="hilite(5411)" onMouseOut="lolite()" onClick="logVariable('assnBc')" href="../../_variables/assnBc.html">$assnBc</a> &lt;&gt; &quot;&quot; ? <a class="var it5411" onMouseOver="hilite(5411)" onMouseOut="lolite()" onClick="logVariable('assnBc')" href="../../_variables/assnBc.html">$assnBc</a>.&quot;, &quot; : &quot;&quot;).<a class="var it5401" onMouseOver="hilite(5401)" onMouseOut="lolite()" onClick="logVariable('assnInstr')" href="../../_variables/assnInstr.html">$assnInstr</a>.&quot;: &quot;.<a class="var it5412" onMouseOver="hilite(5412)" onMouseOut="lolite()" onClick="logVariable('assnCount')" href="../../_variables/assnCount.html">$assnCount</a>;
<a name="l1003"><span class="linenum">1003</span></a>          <a class="var it7760" onMouseOver="hilite(7760)" onMouseOut="lolite()" onClick="logVariable('entryLink')" href="../../_variables/entryLink.html">$entryLink</a>[] = &quot;../set_session_var_instrument.php?link_id=&quot;.<a class="var it5402" onMouseOver="hilite(5402)" onMouseOut="lolite()" onClick="logVariable('assnLink')" href="../../_variables/assnLink.html">$assnLink</a>.
<a name="l1004"><span class="linenum">1004</span></a>              &quot;&amp;sessionVarName=instrument_id&amp;sessionVarValue=&quot;.<a class="var it5408" onMouseOver="hilite(5408)" onMouseOut="lolite()" onClick="logVariable('row_rsCompletionDates')" href="../../_variables/row_rsCompletionDates.html">$row_rsCompletionDates</a>['instrument_id'].
<a name="l1005"><span class="linenum">1005</span></a>              &quot;&amp;search=(s)date_completed(low):&quot;.<a class="var it5409" onMouseOver="hilite(5409)" onMouseOut="lolite()" onClick="logVariable('complDateStart')" href="../../_variables/complDateStart.html">$complDateStart</a>.&quot;,(s)date_completed(high):&quot;.<a class="var it5410" onMouseOver="hilite(5410)" onMouseOut="lolite()" onClick="logVariable('complDateEnd')" href="../../_variables/complDateEnd.html">$complDateEnd</a>.
<a name="l1006"><span class="linenum">1006</span></a>              &quot;,(s)finalized:0,(s)assignmentkey:NULL,&quot;;
<a name="l1007"><span class="linenum">1007</span></a>          <a class="var it7764" onMouseOver="hilite(7764)" onMouseOut="lolite()" onClick="logVariable('entryColor')" href="../../_variables/entryColor.html">$entryColor</a>[] = <a class="var it7763" onMouseOver="hilite(7763)" onMouseOut="lolite()" onClick="logVariable('color_completedate')" href="../../_variables/color_completedate.html">$color_completedate</a>;
<a name="l1008"><span class="linenum">1008</span></a>          
<a name="l1009"><span class="linenum">1009</span></a>      } <span class="comment">// end WHILE: for each row of the deadlines recordset</span>
<a name="l1010"><span class="linenum">1010</span></a>  <span class="comment">    // Reset the recordset </span>
<a name="l1011"><span class="linenum">1011</span></a>      if (<a class="phpfunction" onClick="logFunction('mysql_num_rows')" href="../../_functions/mysql_num_rows.html" onMouseOver="phpfuncPopup(event,'mysql_num_rows')">mysql_num_rows</a>(<a class="var it5393" onMouseOver="hilite(5393)" onMouseOut="lolite()" onClick="logVariable('rsCompletionDates')" href="../../_variables/rsCompletionDates.html">$rsCompletionDates</a>) &gt; 0) { <a class="phpfunction" onClick="logFunction('mysql_data_seek')" href="../../_functions/mysql_data_seek.html" onMouseOver="phpfuncPopup(event,'mysql_data_seek')">mysql_data_seek</a>(<a class="var it5393" onMouseOver="hilite(5393)" onMouseOut="lolite()" onClick="logVariable('rsCompletionDates')" href="../../_variables/rsCompletionDates.html">$rsCompletionDates</a>, 0); }
<a name="l1012"><span class="linenum">1012</span></a>      
<a name="l1013"><span class="linenum">1013</span></a>      
<a name="l1014"><span class="linenum">1014</span></a>      
<a name="l1015"><span class="linenum">1015</span></a>      
<a name="l1016"><span class="linenum">1016</span></a>      
<a name="l1017"><span class="linenum">1017</span></a>      
<a name="l1018"><span class="linenum">1018</span></a>      
<a name="l1019"><span class="linenum">1019</span></a>  <span class="comment">    //                         OVERDUE RELEASE DATES</span>
<a name="l1020"><span class="linenum">1020</span></a>      
<a name="l1021"><span class="linenum">1021</span></a>  <span class="comment">    // Overdue records get their own table, first. </span>
<a name="l1022"><span class="linenum">1022</span></a>  <span class="comment">    // Only appears if overdue records are present.</span>
<a name="l1023"><span class="linenum">1023</span></a>      <a class="var it5413" onMouseOver="hilite(5413)" onMouseOut="lolite()" onClick="logVariable('str_overdue')" href="../../_variables/str_overdue.html">$str_overdue</a> = &quot;&quot;;
<a name="l1024"><span class="linenum">1024</span></a>      while (<a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a> = <a class="phpfunction" onClick="logFunction('mysql_fetch_assoc')" href="../../_functions/mysql_fetch_assoc.html" onMouseOver="phpfuncPopup(event,'mysql_fetch_assoc')">mysql_fetch_assoc</a>(<a class="var it5390" onMouseOver="hilite(5390)" onMouseOut="lolite()" onClick="logVariable('rsReleaseDates')" href="../../_variables/rsReleaseDates.html">$rsReleaseDates</a>)) {
<a name="l1025"><span class="linenum">1025</span></a>          <a class="var it5399" onMouseOver="hilite(5399)" onMouseOut="lolite()" onClick="logVariable('assnDate')" href="../../_variables/assnDate.html">$assnDate</a> = <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['releasedate'];
<a name="l1026"><span class="linenum">1026</span></a>          <a class="var it5401" onMouseOver="hilite(5401)" onMouseOut="lolite()" onClick="logVariable('assnInstr')" href="../../_variables/assnInstr.html">$assnInstr</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;_JOURNAL&quot;, &quot; Jo&quot;, <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['instrument_id']);
<a name="l1027"><span class="linenum">1027</span></a>          <a class="var it5402" onMouseOver="hilite(5402)" onMouseOut="lolite()" onClick="logVariable('assnLink')" href="../../_variables/assnLink.html">$assnLink</a> = &quot;&quot;;
<a name="l1028"><span class="linenum">1028</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it5401" onMouseOver="hilite(5401)" onMouseOut="lolite()" onClick="logVariable('assnInstr')" href="../../_variables/assnInstr.html">$assnInstr</a>, &quot;Jo&quot;)) { <a class="var it5402" onMouseOver="hilite(5402)" onMouseOut="lolite()" onClick="logVariable('assnLink')" href="../../_variables/assnLink.html">$assnLink</a> = <a class="var it5387" onMouseOver="hilite(5387)" onMouseOut="lolite()" onClick="logVariable('page_code')" href="../../_variables/page_code.html">$page_code</a>; }
<a name="l1029"><span class="linenum">1029</span></a>          else                                                     { <a class="var it5402" onMouseOver="hilite(5402)" onMouseOut="lolite()" onClick="logVariable('assnLink')" href="../../_variables/assnLink.html">$assnLink</a> = <a class="var it5388" onMouseOver="hilite(5388)" onMouseOut="lolite()" onClick="logVariable('page_score')" href="../../_variables/page_score.html">$page_score</a>; }
<a name="l1030"><span class="linenum">1030</span></a>          
<a name="l1031"><span class="linenum">1031</span></a>          if (<a class="var it5399" onMouseOver="hilite(5399)" onMouseOut="lolite()" onClick="logVariable('assnDate')" href="../../_variables/assnDate.html">$assnDate</a> &lt;= <a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y-m-d')  
<a name="l1032"><span class="linenum">1032</span></a>                  AND <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['count_completed'] &gt; <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['count_fin']) {
<a name="l1033"><span class="linenum">1033</span></a>              <a class="var it5413" onMouseOver="hilite(5413)" onMouseOut="lolite()" onClick="logVariable('str_overdue')" href="../../_variables/str_overdue.html">$str_overdue</a> .= &quot;&lt;tr&gt;
<a name="l1034"><span class="linenum">1034</span></a>                  &lt;td&gt;&quot;.<a class="var it5401" onMouseOver="hilite(5401)" onMouseOut="lolite()" onClick="logVariable('assnInstr')" href="../../_variables/assnInstr.html">$assnInstr</a>.&quot;&lt;/td&gt;
<a name="l1035"><span class="linenum">1035</span></a>                  &lt;td&gt;&quot;.<a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['lakey'].&quot;&lt;/td&gt;
<a name="l1036"><span class="linenum">1036</span></a>                  &lt;td&gt;&quot;.<a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['bulkcustomer'].&quot;&lt;/td&gt;
<a name="l1037"><span class="linenum">1037</span></a>                  &lt;td align=\&quot;center\&quot;&gt;&quot;.<a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['assign_group'].&quot;&lt;/td&gt;
<a name="l1038"><span class="linenum">1038</span></a>                  &lt;td align=\&quot;center\&quot;&gt;&quot;.<a class="var it5399" onMouseOver="hilite(5399)" onMouseOut="lolite()" onClick="logVariable('assnDate')" href="../../_variables/assnDate.html">$assnDate</a>.&quot;&lt;/td&gt;
<a name="l1039"><span class="linenum">1039</span></a>                  &lt;td align=\&quot;center\&quot;&gt;&quot;.
<a name="l1040"><span class="linenum">1040</span></a>                      <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['count_assigned'].&quot;|&quot;.<a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['count_started'].&quot;|&quot;.
<a name="l1041"><span class="linenum">1041</span></a>                      <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['count_completed'].&quot;:&quot;.
<a name="l1042"><span class="linenum">1042</span></a>                      <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['count_coded'].&quot;|&quot;.<a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['count_scored'].&quot;|&quot;.
<a name="l1043"><span class="linenum">1043</span></a>                      <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['count_fin'].
<a name="l1044"><span class="linenum">1044</span></a>                  (<a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['email_status'] == 3 ? &quot;:e&quot; : &quot;&quot;).
<a name="l1045"><span class="linenum">1045</span></a>                  &quot;&lt;/td&gt;
<a name="l1046"><span class="linenum">1046</span></a>                  &lt;td align=\&quot;center\&quot;&gt;
<a name="l1047"><span class="linenum">1047</span></a>                      &lt;a href='../set_session_var_instrument.php?link_id=&quot;.<a class="var it5402" onMouseOver="hilite(5402)" onMouseOut="lolite()" onClick="logVariable('assnLink')" href="../../_variables/assnLink.html">$assnLink</a>.
<a name="l1048"><span class="linenum">1048</span></a>                      &quot;&amp;sessionVarName=instrument_id&amp;sessionVarValue=&quot;.
<a name="l1049"><span class="linenum">1049</span></a>                      <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['instrument_id'].
<a name="l1050"><span class="linenum">1050</span></a>                      &quot;&amp;search=(s)assignmentkey(e):&quot;.
<a name="l1051"><span class="linenum">1051</span></a>                      <a class="var it444" onMouseOver="hilite(444)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>['assignmentkey'].&quot;,'&gt;view&lt;/a&gt;&lt;/td&gt;
<a name="l1052"><span class="linenum">1052</span></a>                  &lt;/tr&gt;&quot;;
<a name="l1053"><span class="linenum">1053</span></a>          }
<a name="l1054"><span class="linenum">1054</span></a>      }
<a name="l1055"><span class="linenum">1055</span></a>      
<a name="l1056"><span class="linenum">1056</span></a>      
<a name="l1057"><span class="linenum">1057</span></a>      
<a name="l1058"><span class="linenum">1058</span></a>  <span class="comment">    //                 OVERDUE COMPLETION DATES </span>
<a name="l1059"><span class="linenum">1059</span></a>      
<a name="l1060"><span class="linenum">1060</span></a>      <a class="var it5414" onMouseOver="hilite(5414)" onMouseOut="lolite()" onClick="logVariable('str_overdue_compl')" href="../../_variables/str_overdue_compl.html">$str_overdue_compl</a> = &quot;&quot;;
<a name="l1061"><span class="linenum">1061</span></a>      
<a name="l1062"><span class="linenum">1062</span></a>      while (<a class="var it5408" onMouseOver="hilite(5408)" onMouseOut="lolite()" onClick="logVariable('row_rsCompletionDates')" href="../../_variables/row_rsCompletionDates.html">$row_rsCompletionDates</a> = <a class="phpfunction" onClick="logFunction('mysql_fetch_assoc')" href="../../_functions/mysql_fetch_assoc.html" onMouseOver="phpfuncPopup(event,'mysql_fetch_assoc')">mysql_fetch_assoc</a>(<a class="var it5393" onMouseOver="hilite(5393)" onMouseOut="lolite()" onClick="logVariable('rsCompletionDates')" href="../../_variables/rsCompletionDates.html">$rsCompletionDates</a>)) {
<a name="l1063"><span class="linenum">1063</span></a>          
<a name="l1064"><span class="linenum">1064</span></a>          <a class="var it5399" onMouseOver="hilite(5399)" onMouseOut="lolite()" onClick="logVariable('assnDate')" href="../../_variables/assnDate.html">$assnDate</a> = <a class="var it5408" onMouseOver="hilite(5408)" onMouseOut="lolite()" onClick="logVariable('row_rsCompletionDates')" href="../../_variables/row_rsCompletionDates.html">$row_rsCompletionDates</a>['duedate'];
<a name="l1065"><span class="linenum">1065</span></a>          <a class="var it5409" onMouseOver="hilite(5409)" onMouseOut="lolite()" onClick="logVariable('complDateStart')" href="../../_variables/complDateStart.html">$complDateStart</a> = <a class="var it5408" onMouseOver="hilite(5408)" onMouseOut="lolite()" onClick="logVariable('row_rsCompletionDates')" href="../../_variables/row_rsCompletionDates.html">$row_rsCompletionDates</a>['date_completed'];
<a name="l1066"><span class="linenum">1066</span></a>  <span class="comment">        // If the deadline is Thursday or Friday, the searchable date range should extend to the weekend.</span>
<a name="l1067"><span class="linenum">1067</span></a>          if (<a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('w', <a class="phpfunction" onClick="logFunction('strtotime')" href="../../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>(<a class="var it5409" onMouseOver="hilite(5409)" onMouseOut="lolite()" onClick="logVariable('complDateStart')" href="../../_variables/complDateStart.html">$complDateStart</a>)) &gt;= 4) {
<a name="l1068"><span class="linenum">1068</span></a>              <a class="var it5410" onMouseOver="hilite(5410)" onMouseOut="lolite()" onClick="logVariable('complDateEnd')" href="../../_variables/complDateEnd.html">$complDateEnd</a> = <a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y-m-d', <a class="phpfunction" onClick="logFunction('strtotime')" href="../../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>(<a class="var it5409" onMouseOver="hilite(5409)" onMouseOut="lolite()" onClick="logVariable('complDateStart')" href="../../_variables/complDateStart.html">$complDateStart</a>.' +2 days'));
<a name="l1069"><span class="linenum">1069</span></a>          } else { <a class="var it5410" onMouseOver="hilite(5410)" onMouseOut="lolite()" onClick="logVariable('complDateEnd')" href="../../_variables/complDateEnd.html">$complDateEnd</a> = <a class="var it5409" onMouseOver="hilite(5409)" onMouseOut="lolite()" onClick="logVariable('complDateStart')" href="../../_variables/complDateStart.html">$complDateStart</a>; } 
<a name="l1070"><span class="linenum">1070</span></a>          <a class="var it5401" onMouseOver="hilite(5401)" onMouseOut="lolite()" onClick="logVariable('assnInstr')" href="../../_variables/assnInstr.html">$assnInstr</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;_JOURNAL&quot;, &quot; Jo&quot;, <a class="var it5408" onMouseOver="hilite(5408)" onMouseOut="lolite()" onClick="logVariable('row_rsCompletionDates')" href="../../_variables/row_rsCompletionDates.html">$row_rsCompletionDates</a>['instrument_id']);
<a name="l1071"><span class="linenum">1071</span></a>          <a class="var it5402" onMouseOver="hilite(5402)" onMouseOut="lolite()" onClick="logVariable('assnLink')" href="../../_variables/assnLink.html">$assnLink</a> = &quot;&quot;;
<a name="l1072"><span class="linenum">1072</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it5401" onMouseOver="hilite(5401)" onMouseOut="lolite()" onClick="logVariable('assnInstr')" href="../../_variables/assnInstr.html">$assnInstr</a>, &quot;Jo&quot;)) { <a class="var it5402" onMouseOver="hilite(5402)" onMouseOut="lolite()" onClick="logVariable('assnLink')" href="../../_variables/assnLink.html">$assnLink</a> = <a class="var it5387" onMouseOver="hilite(5387)" onMouseOut="lolite()" onClick="logVariable('page_code')" href="../../_variables/page_code.html">$page_code</a>; }
<a name="l1073"><span class="linenum">1073</span></a>          else                                                     { <a class="var it5402" onMouseOver="hilite(5402)" onMouseOut="lolite()" onClick="logVariable('assnLink')" href="../../_variables/assnLink.html">$assnLink</a> = <a class="var it5388" onMouseOver="hilite(5388)" onMouseOut="lolite()" onClick="logVariable('page_score')" href="../../_variables/page_score.html">$page_score</a>; }
<a name="l1074"><span class="linenum">1074</span></a>          
<a name="l1075"><span class="linenum">1075</span></a>          if (<a class="var it5399" onMouseOver="hilite(5399)" onMouseOut="lolite()" onClick="logVariable('assnDate')" href="../../_variables/assnDate.html">$assnDate</a> &lt;= <a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y-m-d')) {
<a name="l1076"><span class="linenum">1076</span></a>              <a class="var it5414" onMouseOver="hilite(5414)" onMouseOut="lolite()" onClick="logVariable('str_overdue_compl')" href="../../_variables/str_overdue_compl.html">$str_overdue_compl</a> .= &quot;&lt;tr&gt;
<a name="l1077"><span class="linenum">1077</span></a>                  &lt;td&gt;&quot;.<a class="var it5401" onMouseOver="hilite(5401)" onMouseOut="lolite()" onClick="logVariable('assnInstr')" href="../../_variables/assnInstr.html">$assnInstr</a>.&quot;&lt;/td&gt;
<a name="l1078"><span class="linenum">1078</span></a>                  &lt;td&gt;&quot;.<a class="var it5408" onMouseOver="hilite(5408)" onMouseOut="lolite()" onClick="logVariable('row_rsCompletionDates')" href="../../_variables/row_rsCompletionDates.html">$row_rsCompletionDates</a>['lakey'].&quot;&lt;/td&gt;
<a name="l1079"><span class="linenum">1079</span></a>                  &lt;td&gt;&quot;.<a class="var it5408" onMouseOver="hilite(5408)" onMouseOut="lolite()" onClick="logVariable('row_rsCompletionDates')" href="../../_variables/row_rsCompletionDates.html">$row_rsCompletionDates</a>['bulkcustomer'].&quot;&lt;/td&gt;
<a name="l1080"><span class="linenum">1080</span></a>                  &lt;td&gt; &lt;/td&gt;
<a name="l1081"><span class="linenum">1081</span></a>                  &lt;td align=\&quot;center\&quot;&gt;&quot;.<a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y-m-d', <a class="phpfunction" onClick="logFunction('strtotime')" href="../../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>(<a class="var it5399" onMouseOver="hilite(5399)" onMouseOut="lolite()" onClick="logVariable('assnDate')" href="../../_variables/assnDate.html">$assnDate</a>)).&quot;&lt;/td&gt;
<a name="l1082"><span class="linenum">1082</span></a>                  &lt;td align=\&quot;center\&quot;&gt;&quot;.<a class="var it5408" onMouseOver="hilite(5408)" onMouseOut="lolite()" onClick="logVariable('row_rsCompletionDates')" href="../../_variables/row_rsCompletionDates.html">$row_rsCompletionDates</a>['count'].&quot;&lt;/td&gt;
<a name="l1083"><span class="linenum">1083</span></a>                  &lt;td align=\&quot;center\&quot;&gt;&lt;a href=\&quot;../set_session_var_instrument.php?link_id=&quot;.<a class="var it5402" onMouseOver="hilite(5402)" onMouseOut="lolite()" onClick="logVariable('assnLink')" href="../../_variables/assnLink.html">$assnLink</a>.
<a name="l1084"><span class="linenum">1084</span></a>                  &quot;&amp;sessionVarName=instrument_id&amp;sessionVarValue=&quot;.<a class="var it5408" onMouseOver="hilite(5408)" onMouseOut="lolite()" onClick="logVariable('row_rsCompletionDates')" href="../../_variables/row_rsCompletionDates.html">$row_rsCompletionDates</a>['instrument_id'].
<a name="l1085"><span class="linenum">1085</span></a>                  &quot;&amp;search=(s)date_completed(low):&quot;.<a class="var it5409" onMouseOver="hilite(5409)" onMouseOut="lolite()" onClick="logVariable('complDateStart')" href="../../_variables/complDateStart.html">$complDateStart</a>.&quot;,(s)date_completed(high):&quot;.<a class="var it5410" onMouseOver="hilite(5410)" onMouseOut="lolite()" onClick="logVariable('complDateEnd')" href="../../_variables/complDateEnd.html">$complDateEnd</a>.
<a name="l1086"><span class="linenum">1086</span></a>                  &quot;,(s)finalized:0,(s)assignmentkey:NULL,\&quot;&gt;view&lt;/a&gt;&lt;/td&gt;
<a name="l1087"><span class="linenum">1087</span></a>                  &lt;/tr&gt;&quot;;
<a name="l1088"><span class="linenum">1088</span></a>          }
<a name="l1089"><span class="linenum">1089</span></a>      }
<a name="l1090"><span class="linenum">1090</span></a>      
<a name="l1091"><span class="linenum">1091</span></a>  <span class="comment">    // If there's overdue completion dates present, add them to the list of overdues.</span>
<a name="l1092"><span class="linenum">1092</span></a>      if (<a class="var it5414" onMouseOver="hilite(5414)" onMouseOut="lolite()" onClick="logVariable('str_overdue_compl')" href="../../_variables/str_overdue_compl.html">$str_overdue_compl</a> &lt;&gt; &quot;&quot;) { 
<a name="l1093"><span class="linenum">1093</span></a>  <span class="comment">        // spacer column between the assignments and un-assigned</span>
<a name="l1094"><span class="linenum">1094</span></a>          <a class="var it5413" onMouseOver="hilite(5413)" onMouseOut="lolite()" onClick="logVariable('str_overdue')" href="../../_variables/str_overdue.html">$str_overdue</a> .= &quot;&lt;tr&gt;&lt;td align='center' colspan='2'&gt;&lt;strong&gt;Unassigned&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;&quot;;    
<a name="l1095"><span class="linenum">1095</span></a>          <a class="var it5413" onMouseOver="hilite(5413)" onMouseOut="lolite()" onClick="logVariable('str_overdue')" href="../../_variables/str_overdue.html">$str_overdue</a> .= <a class="var it5414" onMouseOver="hilite(5414)" onMouseOut="lolite()" onClick="logVariable('str_overdue_compl')" href="../../_variables/str_overdue_compl.html">$str_overdue_compl</a>;
<a name="l1096"><span class="linenum">1096</span></a>      }
<a name="l1097"><span class="linenum">1097</span></a>      
<a name="l1098"><span class="linenum">1098</span></a>  <span class="comment">    // bench(&quot;calendar prep code&quot;); </span>
<a name="l1099"><span class="linenum">1099</span></a>      
<a name="l1100"><span class="linenum">1100</span></a>  <span class="comment">    // PRINT OUT TOTAL COUNTS ?&gt;</span>
<a name="l1101"><span class="linenum">1101</span></a>    
<a name="l1102"><span class="linenum">1102</span></a>    &lt;h3&gt;Explanations&lt;/h3&gt;
<a name="l1103"><span class="linenum">1103</span></a>    &lt;p&gt;Assignment numbers: assigned|started|completed: coded|scored|finalized&lt;/p&gt;
<a name="l1104"><span class="linenum">1104</span></a>    &lt;p&gt;Calendar colors: &lt;span class='integralmind'&gt;Green&lt;/span&gt; = start date | 
<a name="l1105"><span class="linenum">1105</span></a>        &lt;span class='integralbody'&gt;Red&lt;/span&gt; = release date | 
<a name="l1106"><span class="linenum">1106</span></a>      &lt;span class='integralspirit'&gt;Purple&lt;/span&gt; = no assignment
<a name="l1107"><span class="linenum">1107</span></a>    &lt;/p&gt;
<a name="l1108"><span class="linenum">1108</span></a>    
<a name="l1109"><span class="linenum">1109</span></a>    &lt;h3&gt;TOTALS&lt;/h3&gt;
<a name="l1110"><span class="linenum">1110</span></a>    &lt;table&gt;
<a name="l1111"><span class="linenum">1111</span></a>      &lt;tr class=&quot;tablehead_knockout&quot;&gt;
<a name="l1112"><span class="linenum">1112</span></a>        &lt;td align=&quot;center&quot;&gt;Instrument&lt;/td&gt;
<a name="l1113"><span class="linenum">1113</span></a>        &lt;td align=&quot;center&quot;&gt;Started&lt;/td&gt;
<a name="l1114"><span class="linenum">1114</span></a>        &lt;td align=&quot;center&quot;&gt;Compl&lt;/td&gt;
<a name="l1115"><span class="linenum">1115</span></a>        &lt;td align=&quot;center&quot;&gt;1st-s&lt;/td&gt;
<a name="l1116"><span class="linenum">1116</span></a>        &lt;td align=&quot;center&quot;&gt;2nd-s&lt;/td&gt;
<a name="l1117"><span class="linenum">1117</span></a>        &lt;td align=&quot;center&quot;&gt;Coded&lt;/td&gt;
<a name="l1118"><span class="linenum">1118</span></a>        &lt;td align=&quot;center&quot;&gt;C-compl&lt;/td&gt;
<a name="l1119"><span class="linenum">1119</span></a>        &lt;td align=&quot;center&quot;&gt;Limbo&lt;/td&gt;
<a name="l1120"><span class="linenum">1120</span></a>        &lt;td align=&quot;center&quot;&gt;Finalized&lt;/td&gt;
<a name="l1121"><span class="linenum">1121</span></a>        &lt;td align=&quot;center&quot;&gt;Released&lt;/td&gt;
<a name="l1122"><span class="linenum">1122</span></a>        &lt;td align=&quot;center&quot;&gt;Total&lt;/td&gt;
<a name="l1123"><span class="linenum">1123</span></a>      &lt;/tr&gt;
<a name="l1124"><span class="linenum">1124</span></a>    &lt;?php 
<a name="l1125"><span class="linenum">1125</span></a>    while (<a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a> = <a class="phpfunction" onClick="logFunction('mysql_fetch_assoc')" href="../../_functions/mysql_fetch_assoc.html" onMouseOver="phpfuncPopup(event,'mysql_fetch_assoc')">mysql_fetch_assoc</a>(<a class="var it4288" onMouseOver="hilite(4288)" onMouseOut="lolite()" onClick="logVariable('rsCounts')" href="../../_variables/rsCounts.html">$rsCounts</a>)) { ?&gt;
<a name="l1126"><span class="linenum">1126</span></a>      &lt;tr&gt;
<a name="l1127"><span class="linenum">1127</span></a>        &lt;td align=&quot;right&quot;&gt;&lt;?php 
<a name="l1128"><span class="linenum">1128</span></a>          echo <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;_&quot;, &quot; &quot;, <a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a>['instrument_id']); ?&gt;&lt;/td&gt;
<a name="l1129"><span class="linenum">1129</span></a>        &lt;td align=&quot;right&quot; &lt;?php 
<a name="l1130"><span class="linenum">1130</span></a>          if (<a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a>['started'] == 0) { ?&gt;class=&quot;gray&quot;&lt;?php } ?&gt;&gt;
<a name="l1131"><span class="linenum">1131</span></a>          &lt;?php echo <a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a>['started']; ?&gt;&lt;/td&gt;
<a name="l1132"><span class="linenum">1132</span></a>        &lt;td align=&quot;right&quot; &lt;?php 
<a name="l1133"><span class="linenum">1133</span></a>          if (<a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a>['completed'] == 0) { ?&gt;class=&quot;gray&quot;&lt;?php } ?&gt;&gt;
<a name="l1134"><span class="linenum">1134</span></a>          &lt;?php echo <a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a>['completed']; ?&gt;&lt;/td&gt;
<a name="l1135"><span class="linenum">1135</span></a>        &lt;td align=&quot;right&quot; &lt;?php 
<a name="l1136"><span class="linenum">1136</span></a>          if (<a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a>['1st_scored'] == 0) { ?&gt;class=&quot;gray&quot;&lt;?php } ?&gt;&gt;
<a name="l1137"><span class="linenum">1137</span></a>          &lt;?php echo <a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a>['1st_scored']; ?&gt;&lt;/td&gt;
<a name="l1138"><span class="linenum">1138</span></a>        &lt;td align=&quot;right&quot; &lt;?php 
<a name="l1139"><span class="linenum">1139</span></a>          if (<a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a>['2nd_scored'] == 0) { ?&gt;class=&quot;gray&quot;&lt;?php } ?&gt;&gt;
<a name="l1140"><span class="linenum">1140</span></a>          &lt;?php echo <a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a>['2nd_scored']; ?&gt;&lt;/td&gt;
<a name="l1141"><span class="linenum">1141</span></a>        &lt;td align=&quot;right&quot; &lt;?php 
<a name="l1142"><span class="linenum">1142</span></a>          if (<a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a>['coded'] == 0) { ?&gt;class=&quot;gray&quot;&lt;?php } ?&gt;&gt;
<a name="l1143"><span class="linenum">1143</span></a>          &lt;?php echo <a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a>['coded']; ?&gt;&lt;/td&gt;
<a name="l1144"><span class="linenum">1144</span></a>        &lt;td align=&quot;right&quot; &lt;?php 
<a name="l1145"><span class="linenum">1145</span></a>          if (<a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a>['code_completed'] == 0) { ?&gt;class=&quot;gray&quot;&lt;?php } ?&gt;&gt;
<a name="l1146"><span class="linenum">1146</span></a>          &lt;?php echo <a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a>['code_completed']; ?&gt;&lt;/td&gt;
<a name="l1147"><span class="linenum">1147</span></a>        &lt;td align=&quot;right&quot; &lt;?php 
<a name="l1148"><span class="linenum">1148</span></a>          if (<a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a>['limbo'] == 0) { ?&gt;class=&quot;gray&quot;&lt;?php } ?&gt;&gt;
<a name="l1149"><span class="linenum">1149</span></a>          &lt;?php echo <a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a>['limbo']; ?&gt;&lt;/td&gt;
<a name="l1150"><span class="linenum">1150</span></a>        &lt;td align=&quot;right&quot; &lt;?php 
<a name="l1151"><span class="linenum">1151</span></a>          if (<a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a>['finalized'] == 0) { ?&gt;class=&quot;gray&quot;&lt;?php } ?&gt;&gt;
<a name="l1152"><span class="linenum">1152</span></a>          &lt;?php echo <a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a>['finalized']; ?&gt;&lt;/td&gt;
<a name="l1153"><span class="linenum">1153</span></a>        &lt;td align=&quot;right&quot; &lt;?php 
<a name="l1154"><span class="linenum">1154</span></a>          if (<a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a>['released'] == 0) { ?&gt;class=&quot;gray&quot;&lt;?php } ?&gt;&gt;
<a name="l1155"><span class="linenum">1155</span></a>          &lt;?php echo <a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a>['released']; ?&gt;&lt;/td&gt;
<a name="l1156"><span class="linenum">1156</span></a>        &lt;td align=&quot;right&quot; &lt;?php 
<a name="l1157"><span class="linenum">1157</span></a>          if (<a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a>['total'] == 0) { ?&gt;class=&quot;gray&quot;&lt;?php } ?&gt;&gt;
<a name="l1158"><span class="linenum">1158</span></a>          &lt;?php echo <a class="var it4289" onMouseOver="hilite(4289)" onMouseOut="lolite()" onClick="logVariable('row_rsCounts')" href="../../_variables/row_rsCounts.html">$row_rsCounts</a>['total']; ?&gt;&lt;/td&gt;
<a name="l1159"><span class="linenum">1159</span></a>      &lt;/tr&gt;
<a name="l1160"><span class="linenum">1160</span></a>      &lt;?php
<a name="l1161"><span class="linenum">1161</span></a>    } ?&gt;
<a name="l1162"><span class="linenum">1162</span></a>    &lt;/table&gt;
<a name="l1163"><span class="linenum">1163</span></a>    
<a name="l1164"><span class="linenum">1164</span></a>    
<a name="l1165"><span class="linenum">1165</span></a>      &lt;?php //    PRINT OUT TABLE OF OVERDUES
<a name="l1166"><span class="linenum">1166</span></a>      if (<a class="var it5413" onMouseOver="hilite(5413)" onMouseOut="lolite()" onClick="logVariable('str_overdue')" href="../../_variables/str_overdue.html">$str_overdue</a> &lt;&gt; &quot;&quot;) {  ?&gt;
<a name="l1167"><span class="linenum">1167</span></a>      
<a name="l1168"><span class="linenum">1168</span></a>    &lt;h3&gt;OVERDUE&lt;/h3&gt;
<a name="l1169"><span class="linenum">1169</span></a>      &lt;table&gt;
<a name="l1170"><span class="linenum">1170</span></a>          &lt;tr class=&quot;tablehead_knockout&quot;&gt;
<a name="l1171"><span class="linenum">1171</span></a>              &lt;td&gt;&lt;a href=&quot;&lt;?php echo <a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('currentPage')" href="../../_variables/currentPage.html">$currentPage</a>; ?&gt;?sort=instrument_id&amp;showOpen=yes&quot;&gt;Instr&lt;/a&gt;&lt;/td&gt;
<a name="l1172"><span class="linenum">1172</span></a>        &lt;td&gt;Lakey&lt;/td&gt;
<a name="l1173"><span class="linenum">1173</span></a>              &lt;td&gt;&lt;a href=&quot;&lt;?php echo <a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('currentPage')" href="../../_variables/currentPage.html">$currentPage</a>; ?&gt;?sort=bulkcustomer&amp;showOpen=yes&quot;&gt;Client&lt;/a&gt;&lt;/td&gt;
<a name="l1174"><span class="linenum">1174</span></a>              &lt;td&gt;Group&lt;/td&gt;
<a name="l1175"><span class="linenum">1175</span></a>              &lt;td&gt;Due&lt;/td&gt;
<a name="l1176"><span class="linenum">1176</span></a>              &lt;td&gt;Assignment&lt;/td&gt;
<a name="l1177"><span class="linenum">1177</span></a>              &lt;td&gt;View&lt;/td&gt;
<a name="l1178"><span class="linenum">1178</span></a>          &lt;/tr&gt; 
<a name="l1179"><span class="linenum">1179</span></a>          &lt;?php echo <a class="var it5413" onMouseOver="hilite(5413)" onMouseOut="lolite()" onClick="logVariable('str_overdue')" href="../../_variables/str_overdue.html">$str_overdue</a>; ?&gt; 
<a name="l1180"><span class="linenum">1180</span></a>      &lt;/table&gt; 
<a name="l1181"><span class="linenum">1181</span></a>      
<a name="l1182"><span class="linenum">1182</span></a>      &lt;?php }
<a name="l1183"><span class="linenum">1183</span></a>      
<a name="l1184"><span class="linenum">1184</span></a>      
<a name="l1185"><span class="linenum">1185</span></a>  <span class="comment">    //                        PRINTING OUT THE CALENDAR</span>
<a name="l1186"><span class="linenum">1186</span></a>      
<a name="l1187"><span class="linenum">1187</span></a>      ?&gt;
<a name="l1188"><span class="linenum">1188</span></a>    
<a name="l1189"><span class="linenum">1189</span></a>    &lt;div id=&quot;calendar&quot;&gt;
<a name="l1190"><span class="linenum">1190</span></a>      &lt;!-- Filled in by the Jquery FullCalendar code --&gt;
<a name="l1191"><span class="linenum">1191</span></a>    &lt;/div&gt;
<a name="l1192"><span class="linenum">1192</span></a>    
<a name="l1193"><span class="linenum">1193</span></a>    
<a name="l1194"><span class="linenum">1194</span></a>    &lt;script type=&quot;text/javascript&quot;&gt;
<a name="l1195"><span class="linenum">1195</span></a>          
<a name="l1196"><span class="linenum">1196</span></a>  <span class="comment">    //$(document).ready(function() {</span>
<a name="l1197"><span class="linenum">1197</span></a>          
<a name="l1198"><span class="linenum">1198</span></a>          $('#calendar').fullCalendar({
<a name="l1199"><span class="linenum">1199</span></a>              header: {
<a name="l1200"><span class="linenum">1200</span></a>                  left: 'prev,next today',
<a name="l1201"><span class="linenum">1201</span></a>                  center: 'title',
<a name="l1202"><span class="linenum">1202</span></a>                  right: ''
<a name="l1203"><span class="linenum">1203</span></a>              },
<a name="l1204"><span class="linenum">1204</span></a>              default: 'month',
<a name="l1205"><span class="linenum">1205</span></a>              editable: false,
<a name="l1206"><span class="linenum">1206</span></a>              events: [
<a name="l1207"><span class="linenum">1207</span></a>                  {
<a name="l1208"><span class="linenum">1208</span></a>                      title: '',
<a name="l1209"><span class="linenum">1209</span></a>                      start: &lt;?php echo <a class="phpfunction" onClick="logFunction('strtotime')" href="../../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>('2011-01-01'); ?&gt;
<a name="l1210"><span class="linenum">1210</span></a>                  }&lt;?php
<a name="l1211"><span class="linenum">1211</span></a>                  
<a name="l1212"><span class="linenum">1212</span></a>                  <a class="var it324" onMouseOver="hilite(324)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 0;
<a name="l1213"><span class="linenum">1213</span></a>                  while (isset(<a class="var it7759" onMouseOver="hilite(7759)" onMouseOut="lolite()" onClick="logVariable('entryDate')" href="../../_variables/entryDate.html">$entryDate</a>[<a class="var it324" onMouseOver="hilite(324)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l1214"><span class="linenum">1214</span></a>                      ?&gt;,
<a name="l1215"><span class="linenum">1215</span></a>                      {
<a name="l1216"><span class="linenum">1216</span></a>                          title: &quot;&lt;?php echo <a class="var it7758" onMouseOver="hilite(7758)" onMouseOut="lolite()" onClick="logVariable('entryText')" href="../../_variables/entryText.html">$entryText</a>[<a class="var it324" onMouseOver="hilite(324)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]; ?&gt;&quot;,
<a name="l1217"><span class="linenum">1217</span></a>                          start: &quot;&lt;?php echo <a class="var it7759" onMouseOver="hilite(7759)" onMouseOut="lolite()" onClick="logVariable('entryDate')" href="../../_variables/entryDate.html">$entryDate</a>[<a class="var it324" onMouseOver="hilite(324)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]; ?&gt;&quot;,
<a name="l1218"><span class="linenum">1218</span></a>                          url: &quot;&lt;?php echo <a class="var it7760" onMouseOver="hilite(7760)" onMouseOut="lolite()" onClick="logVariable('entryLink')" href="../../_variables/entryLink.html">$entryLink</a>[<a class="var it324" onMouseOver="hilite(324)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]; ?&gt;&quot;,
<a name="l1219"><span class="linenum">1219</span></a>                          color: &quot;&lt;?php echo <a class="var it7764" onMouseOver="hilite(7764)" onMouseOut="lolite()" onClick="logVariable('entryColor')" href="../../_variables/entryColor.html">$entryColor</a>[<a class="var it324" onMouseOver="hilite(324)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]; ?&gt;&quot;
<a name="l1220"><span class="linenum">1220</span></a>                      } &lt;?php
<a name="l1221"><span class="linenum">1221</span></a>                      <a class="var it324" onMouseOver="hilite(324)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> ++;
<a name="l1222"><span class="linenum">1222</span></a>                  } ?&gt;
<a name="l1223"><span class="linenum">1223</span></a>              ]
<a name="l1224"><span class="linenum">1224</span></a>          });
<a name="l1225"><span class="linenum">1225</span></a>          
<a name="l1226"><span class="linenum">1226</span></a>  <span class="comment">    //});</span>
<a name="l1227"><span class="linenum">1227</span></a>      
<a name="l1228"><span class="linenum">1228</span></a>      
<a name="l1229"><span class="linenum">1229</span></a>      &lt;/script&gt;
<a name="l1230"><span class="linenum">1230</span></a>    
<a name="l1231"><span class="linenum">1231</span></a>    &lt;br class=&quot;clearfloat&quot; /&gt;
<a name="l1232"><span class="linenum">1232</span></a>    
<a name="l1233"><span class="linenum">1233</span></a>      
<a name="l1234"><span class="linenum">1234</span></a>      
<a name="l1235"><span class="linenum">1235</span></a>      &lt;p&gt;&amp;nbsp;&lt;/p&gt;
<a name="l1236"><span class="linenum">1236</span></a>      
<a name="l1237"><span class="linenum">1237</span></a>      
<a name="l1238"><span class="linenum">1238</span></a>      &lt;?php 
<a name="l1239"><span class="linenum">1239</span></a>      
<a name="l1240"><span class="linenum">1240</span></a>      
<a name="l1241"><span class="linenum">1241</span></a>  }
<a name="l1242"><span class="linenum">1242</span></a>  
<a name="l1243"><span class="linenum">1243</span></a>  
<a name="l1244"><span class="linenum">1244</span></a>  
<a name="l1245"><span class="linenum">1245</span></a>  
<a name="l1246"><span class="linenum">1246</span></a>  
<a name="l1247"><span class="linenum">1247</span></a>  
<a name="l1248"><span class="linenum">1248</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'downloaddata': ['downloaddata', '', [['DTS/includes','general_custom_functions.php',260],['DTS/includes','dts_functions.php',445],['DTS/includes','dts_functions_2.php',303]], 10],
'setpassword': ['setpassword', 'Set the password to authenticate with. ', [['DTS/includes/swiftmailer/classes/Swift/Transport/Esmtp','AuthHandler.php',101],['DTS/includes/swiftmailer/classes/Swift/Plugins','PopBeforeSmtpPlugin.php',122]], 1],
'setcc': ['setcc', 'Set the Cc addresses of this message. ', [['DTS/includes/swiftmailer/classes/Swift/Mime','SimpleMessage.php',337],['DTS/includes/swiftmailer/classes/Swift/Mime','Message.php',181],['DTS/includes/tng/triggers','tNG_Email.class.php',195],['DTS/includes/tng/triggers','tNG_email.class.php',195]], 6],
'deadlinescalendar': ['deadlinescalendar', '', [['DTS/includes','general_custom_functions.php',580],['DTS/includes','dts_functions.php',767],['DTS/includes','dts_functions_2.php',625]], 3],
'newinstance': ['newinstance', 'Create a new FailoverTransport instance. ', [['DTS/includes/swiftmailer/classes/Swift','FailoverTransport.php',36],['DTS/includes/swiftmailer/classes/Swift','Message.php',52],['DTS/includes/swiftmailer/classes/Swift','SpoolTransport.php',35],['DTS/includes/swiftmailer/classes/Swift','Attachment.php',45],['DTS/includes/swiftmailer/classes/Swift','MailTransport.php',36],['DTS/includes/swiftmailer/classes/Swift','Mailer.php',34],['DTS/includes/swiftmailer/classes/Swift','SmtpTransport.php',41],['DTS/includes/swiftmailer/classes/Swift','NullTransport.php',30],['DTS/includes/swiftmailer/classes/Swift','MimePart.php',50],['DTS/includes/swiftmailer/classes/Swift/Plugins','PopBeforeSmtpPlugin.php',65],['DTS/includes/swiftmailer/classes/Swift/Mime','HeaderSet.php',137],['DTS/includes/swiftmailer/classes/Swift','SendmailTransport.php',36],['DTS/includes/swiftmailer/classes/Swift','EmbeddedFile.php',45],['DTS/includes/swiftmailer/classes/Swift','Image.php',34],['DTS/includes/swiftmailer/classes/Swift/Mime','SimpleHeaderSet.php',245],['DTS/includes/swiftmailer/classes/Swift','LoadBalancedTransport.php',36]], 11],
'setbody': ['setbody', 'Set the body of this entity, either as a string, or as an instance of {@link Swift_OutputByteStream}. ', [['DTS/includes/swiftmailer/classes/Swift/Mime','SimpleMimeEntity.php',348],['DTS/includes/swiftmailer/classes/Swift/Mime','MimePart.php',54],['DTS/includes/swiftmailer/classes/Swift/Mime','MimeEntity.php',86]], 12],
'querysortsearch': ['querysortsearch', '', [['DTS/includes','general_custom_functions.php',402],['DTS/includes','dts_functions.php',583],['DTS/includes','dts_functions_2.php',445]], 24],
'bench': ['bench', '', [['DTS/includes','dts_functions.php',156],['DTS/includes','dts_functions_2.php',12]], 9],
'pageid': ['pageid', '', [['DTS/includes','dts_functions.php',14]], 6],
'sqlrstr': ['sqlrstr', '', [['DTS/includes','dts_functions.php',239]], 17],
'friendly_date': ['friendly_date', '', [['DTS/includes','dts_functions.php',134]], 7],
'query_sort': ['query_sort', '', [['DTS/includes','dts_functions.php',81]], 2],
'sendemail': ['sendemail', '', [['DTS/includes','general_custom_functions.php',50],['DTS/includes/common/lib/email','KT_Email.class.php',152],['DTS/includes','dts_functions.php',270],['DTS/includes','dts_functions_2.php',93],['DTS/includes/common/lib/email','KT_email.class.php',152]], 51],
'linknewtab': ['linknewtab', '', [['DTS/includes','dts_functions.php',132]], 59],
'zeropad': ['zeropad', '', [['DTS/includes/fullcalendar','fullcalendar.js',1825],['DTS/includes','dts_functions.php',181]], 87],
'setusername': ['setusername', 'Set the username to authenticate with. ', [['DTS/includes/swiftmailer/classes/Swift/Transport/Esmtp','AuthHandler.php',83],['DTS/includes/swiftmailer/classes/Swift/Plugins','PopBeforeSmtpPlugin.php',111]], 1],
'lookup_profession': ['lookup_profession', '', [['DTS/includes','dts_functions.php',145]], 3],
'randompassword': ['randompassword', '', [['DTS/includes','general_custom_functions.php',159],['DTS/includes','dts_functions.php',344],['DTS/includes','dts_functions_2.php',202]], 6],
'initializesortsearch': ['initializesortsearch', '', [['DTS/includes','general_custom_functions.php',318],['DTS/includes','dts_functions.php',488],['DTS/includes','dts_functions_2.php',361]], 9],
'send': ['send', 'Implements Mail::send() function using php\'s built-in mail() command. ', [['DTS/includes/common/lib/email/Pear','Mail.php',62],['DTS/includes/swiftmailer/classes/Swift','Mailer.php',58],['DTS/includes/swiftmailer/classes/Swift/Transport','SendmailTransport.php',86],['DTS/includes/common/lib/email/Pear/Mail','smtp.php',159],['DTS/includes/swiftmailer/classes/Swift/Transport','FailoverTransport.php',37],['DTS/includes/swiftmailer/classes/Swift/Transport','LoadBalancedTransport.php',90],['DTS/includes/swiftmailer/classes/Swift/Transport','AbstractSmtpTransport.php',145],['DTS/includes/swiftmailer/classes/Swift','Transport.php',39],['DTS/includes/common/lib/email/Pear/Mail','mail.php',60],['DTS/includes/swiftmailer/classes/Swift/Transport','MailTransport.php',98],['DTS/includes/common/lib/email/Pear/Mail','sendmail.php',72],['DTS/includes/swiftmailer/classes/Swift/Transport','NullTransport.php',53],['DTS/includes/common/lib/email/Pear/Mail','null.php',30],['DTS/includes/swiftmailer/classes/Swift/Transport','SpoolTransport.php',77]], 36],
'prepboilerplate': ['prepboilerplate', '', [['DTS/includes','dts_functions.php',254]], 21],
'setsubject': ['setsubject', 'Sets the Subject header ', [['DTS/includes/common/lib/email/Pear/Mail','mime.php',621],['DTS/includes/swiftmailer/classes/Swift/Mime','SimpleMessage.php',67],['DTS/includes/swiftmailer/classes/Swift/Mime','Message.php',30],['DTS/includes/tng/triggers','tNG_Email.class.php',215],['DTS/includes/tng/triggers','tNG_email.class.php',215]], 5],
'prepsql': ['prepsql', '', [['DTS/includes','dts_functions.php',18]], 33],
'setfrom': ['setfrom', 'Set an email to the From (the sender) header ', [['DTS/includes/common/lib/email/Pear/Mail','mime.php',632],['DTS/includes/swiftmailer/classes/Swift/Mime','SimpleMessage.php',181],['DTS/includes/swiftmailer/classes/Swift/Mime','Message.php',100],['DTS/includes/tng/triggers','tNG_Email.class.php',175],['DTS/includes/tng/triggers','tNG_email.class.php',175]], 5],
'setto': ['setto', 'Set the to addresses of this message. ', [['DTS/includes/swiftmailer/classes/Swift/Mime','SimpleMessage.php',285],['DTS/includes/swiftmailer/classes/Swift/Mime','Message.php',156],['DTS/includes/tng/triggers','tNG_Email.class.php',185],['DTS/includes/tng/triggers','tNG_email.class.php',185]], 7],
'wa_auth_rulepasses': ['wa_auth_rulepasses', '', [['DTS/WA_SecurityAssist','Helper_PHP.php',160]], 771],
'contactusforhelp': ['contactusforhelp', '', [['DTS/includes','general_custom_functions.php',241],['DTS/includes','dts_functions.php',426],['DTS/includes','dts_functions_2.php',284]], 21],
'securityalert': ['securityalert', '', [['DTS/includes','general_custom_functions.php',149],['DTS/includes','dts_functions.php',334],['DTS/includes','dts_functions_2.php',192]], 1],
'query': ['query', '', [['DTS/includes','dts_functions.php',59]], 37],
'sqlstr': ['sqlstr', '', [['DTS/includes','general_custom_functions.php',16],['DTS/includes','dts_functions.php',206],['DTS/includes','dts_functions_2.php',57],['DTS/_sorttask','sorttasklead.php',5]], 1466],
'topher': ['topher', '', [['DTS/includes','general_custom_functions.php',5],['DTS/includes','dts_functions.php',188],['DTS/includes','dts_functions_2.php',39]], 2],
'length': ['length', '', [['DTS/openflashcharts/actionscript','Values.as',106]], 28],
'friendly_time': ['friendly_time', '', [['DTS/includes','dts_functions.php',140]], 0],
'next': ['next', '', [], 89],
'date': ['date', '', [], 457],
'array_push': ['array_push', '', [], 153],
'explode': ['explode', '', [], 287],
'substr': ['substr', '', [], 478],
'mt_rand': ['mt_rand', '', [], 34],
'mysql_query': ['mysql_query', '', [], 5079],
'key': ['key', '', [], 43],
'strtolower': ['strtolower', '', [], 187],
'mysql_error': ['mysql_error', '', [], 4717],
'strpos': ['strpos', '', [], 897],
'error_log': ['error_log', '', [], 23],
'count': ['count', '', [], 697],
'microtime': ['microtime', '', [], 9],
'mysql_real_escape_string': ['mysql_real_escape_string', '', [], 721],
'preg_match': ['preg_match', '', [], 156],
'is_string': ['is_string', '', [], 14],
'mysql_fetch_assoc': ['mysql_fetch_assoc', '', [], 9670],
'strtotime': ['strtotime', '', [], 218],
'str_replace': ['str_replace', '', [], 1019],
'time': ['time', '', [], 44],
'function_exists': ['function_exists', '', [], 1464],
'mysql_field_name': ['mysql_field_name', '', [], 11],
'intval': ['intval', '', [], 754],
'round': ['round', '', [], 364],
'mysql_data_seek': ['mysql_data_seek', '', [], 2414],
'mysql_num_rows': ['mysql_num_rows', '', [], 6640],
'reset': ['reset', '', [], 44],
'func_get_args': ['func_get_args', '', [], 7],
'array_shift': ['array_shift', '', [], 16],
'setcookie': ['setcookie', '', [], 15],
'preg_replace': ['preg_replace', '', [], 113],
'current': ['current', '', [], 99],
'str_pad': ['str_pad', '', [], 53],
'mysql_num_fields': ['mysql_num_fields', '', [], 12],
'sort': ['sort', '', [], 50],
'header': ['header', '', [], 717]};
CLASS_DATA={
'swift_mailer': ['swift_mailer', 'Swift Mailer class. ', [['DTS/includes/swiftmailer/classes/Swift','Mailer.php',12]], 1],
'swift_message': ['swift_message', 'The Message class for building emails. ', [['DTS/includes/swiftmailer/classes/Swift','Message.php',12]], 1],
'swift_smtptransport': ['swift_smtptransport', 'Sends Messages over SMTP with ESMTP support. ', [['DTS/includes/swiftmailer/classes/Swift','SmtpTransport.php',12]], 1]};
CONST_DATA={
};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Mon May  5 14:14:03 2014</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
